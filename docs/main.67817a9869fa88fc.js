"use strict";(self.webpackChunklibrary_plus=self.webpackChunklibrary_plus||[]).push([[792],{848:()=>{function Au(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Li(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){Au(s,i,r,o,a,"next",c)}function a(c){Au(s,i,r,o,a,"throw",c)}o(void 0)})}}function pf(n,e){return Object.is(n,e)}let Dn=null,Iu=!1,iv=1;const ti=Symbol("SIGNAL");function ot(n){const e=Dn;return Dn=n,e}const bc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ru(n){if(Iu)throw new Error("");if(null===Dn)return;Dn.consumerOnSignalRead(n);const e=Dn.nextProducerIndex++;_f(Dn),e<Dn.producerNode.length&&Dn.producerNode[e]!==n&&Ou(Dn)&&yf(Dn.producerNode[e],Dn.producerIndexOfThis[e]),Dn.producerNode[e]!==n&&(Dn.producerNode[e]=n,Dn.producerIndexOfThis[e]=Ou(Dn)?aC(n,Dn,e):0),Dn.producerLastReadVersion[e]=n.version}function Pu(n){if((!Ou(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==iv)){if(!n.producerMustRecompute(n)&&!mf(n))return void gf(n);n.producerRecomputeValue(n),gf(n)}}function sC(n){if(void 0===n.liveConsumerNode)return;const e=Iu;Iu=!0;try{for(const t of n.liveConsumerNode)t.dirty||Zk(t)}finally{Iu=e}}function oC(){return!1!==Dn?.consumerAllowSignalWrites}function Zk(n){n.dirty=!0,sC(n),n.consumerMarkedDirty?.(n)}function gf(n){n.dirty=!1,n.lastCleanEpoch=iv}function Mc(n){return n&&(n.nextProducerIndex=0),ot(n)}function Nu(n,e){if(ot(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ou(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function mf(n){_f(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Pu(t),i!==t.version))return!0}return!1}function vf(n){if(_f(n),Ou(n))for(let e=0;e<n.producerNode.length;e++)yf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function aC(n,e,t){if(cC(n),0===n.liveConsumerNode.length&&lC(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=aC(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yf(n,e){if(cC(n),1===n.liveConsumerNode.length&&lC(n))for(let i=0;i<n.producerNode.length;i++)yf(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];_f(r),r.producerIndexOfThis[i]=e}}function Ou(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _f(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function cC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function lC(n){return void 0!==n.producerNode}const sa=Symbol("UNSET"),wc=Symbol("COMPUTING"),fo=Symbol("ERRORED"),Jk={...bc,value:sa,dirty:!0,error:null,equal:pf,kind:"computed",producerMustRecompute:n=>n.value===sa||n.value===wc,producerRecomputeValue(n){if(n.value===wc)throw new Error("Detected cycle in computations.");const e=n.value;n.value=wc;const t=Mc(n);let i,r=!1;try{i=n.computation(),ot(null),r=e!==sa&&e!==fo&&i!==fo&&n.equal(e,i)}catch(s){i=fo,n.error=s}finally{Nu(n,t)}r?n.value=e:(n.value=i,n.version++)}};let uC=function Qk(){throw new Error};function dC(n){uC(n)}function bf(n,e){oC()||dC(n),n.equal(n.value,e)||(n.value=e,function n3(n){n.version++,function Yk(){iv++}(),sC(n)}(n))}const sv={...bc,equal:pf,value:void 0,kind:"signal"};let ov;function Mf(){return ov}function po(n){const e=ov;return ov=n,e}const av=Symbol("NotFound");function rn(n){return"function"==typeof n}function cv(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Error;const lv=cv(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function uv(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class mi{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(rn(i))try{i()}catch(s){e=s instanceof lv?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{mC(s)}catch(o){e=e??[],o instanceof lv?e=[...e,...o.errors]:e.push(o)}}if(e)throw new lv(e)}}add(e){var t;if(e&&e!==this)if(this.closed)mC(e);else{if(e instanceof mi){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&uv(t,e)}remove(e){const{_finalizers:t}=this;t&&uv(t,e),e instanceof mi&&e._removeParent(this)}}mi.EMPTY=(()=>{const n=new mi;return n.closed=!0,n})();const pC=mi.EMPTY;function gC(n){return n instanceof mi||n&&"closed"in n&&rn(n.remove)&&rn(n.add)&&rn(n.unsubscribe)}function mC(n){rn(n)?n():n.unsubscribe()}const oa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},wf={setTimeout(n,e,...t){const{delegate:i}=wf;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=wf;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vC(n){wf.setTimeout(()=>{const{onUnhandledError:e}=oa;if(!e)throw n;e(n)})}function dv(){}const c3=hv("C",void 0,void 0);function hv(n,e,t){return{kind:n,value:e,error:t}}let aa=null;function Sf(n){if(oa.useDeprecatedSynchronousErrorHandling){const e=!aa;if(e&&(aa={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=aa;if(aa=null,t)throw i}}else n()}class fv extends mi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gC(e)&&e.add(this)):this.destination=g3}static create(e,t,i){return new gv(e,t,i)}next(e){this.isStopped?mv(function u3(n){return hv("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?mv(function l3(n){return hv("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?mv(c3,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const h3=Function.prototype.bind;function pv(n,e){return h3.call(n,e)}class f3{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Cf(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Cf(i)}else Cf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cf(t)}}}class gv extends fv{constructor(e,t,i){let r;if(super(),rn(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&oa.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&pv(e.next,s),error:e.error&&pv(e.error,s),complete:e.complete&&pv(e.complete,s)}):r=e}this.destination=new f3(r)}}function Cf(n){oa.useDeprecatedSynchronousErrorHandling?function d3(n){oa.useDeprecatedSynchronousErrorHandling&&aa&&(aa.errorThrown=!0,aa.error=n)}(n):vC(n)}function mv(n,e){const{onStoppedNotification:t}=oa;t&&wf.setTimeout(()=>t(n,e))}const g3={closed:!0,next:dv,error:function p3(n){throw n},complete:dv},vv="function"==typeof Symbol&&Symbol.observable||"@@observable";function ca(n){return n}function yC(n){return 0===n.length?ca:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let qn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function y3(n){return n&&n instanceof fv||function v3(n){return n&&rn(n.next)&&rn(n.error)&&rn(n.complete)}(n)&&gC(n)}(t)?t:new gv(t,i,r);return Sf(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=_C(i))((r,s)=>{const o=new gv({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[vv](){return this}pipe(...t){return yC(t)(this)}toPromise(t){return new(t=_C(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function _C(n){var e;return null!==(e=n??oa.Promise)&&void 0!==e?e:Promise}const _3=cv(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Fi=(()=>{class n extends qn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new xC(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new _3}next(t){Sf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Sf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Sf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?pC:(this.currentObservers=null,s.push(t),new mi(()=>{this.currentObservers=null,uv(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new qn;return t.source=this,t}}return n.create=(e,t)=>new xC(e,t),n})();class xC extends Fi{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:pC}}class _r extends Fi{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function bC(n){return rn(n?.lift)}function ni(n){return e=>{if(bC(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fn(n,e,t,i,r){return new x3(n,e,t,i,r)}class x3 extends fv{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ut(n,e){return ni((t,i)=>{let r=0;t.subscribe(Fn(i,s=>{i.next(n.call(e,s,r++))}))})}const MC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class ne extends Error{code;constructor(e,t){super(function Ds(n,e){return`${function b3(n){return`NG0${Math.abs(n)}`}(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Ef=Symbol("InputSignalNode#UNSET"),wC={...sv,transformFn:void 0,applyValueToInputSignal(n,e){bf(n,e)}};function SC(n,e){const t=Object.create(wC);function i(){if(Ru(t),t.value===Ef)throw new ne(-950,null);return t.value}return t.value=n,t.transformFn=e?.transform,i[ti]=t,i}function Ts(n){return{toString:n}.toString()}const Cc="__parameters__";function Dc(n,e,t){return Ts(()=>{const i=function yv(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(Cc)?c[Cc]:Object.defineProperty(c,Cc,{value:[]})[Cc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}const mn=globalThis;function Bt(n){for(let e in n)if(n[e]===Bt)return e;throw Error("Could not find renamed property on target object.")}function M3(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kn(n){if("string"==typeof n)return n;if(Array.isArray(n))return`[${n.map(kn).join(", ")}]`;if(null==n)return""+n;const e=n.overriddenName||n.name;if(e)return`${e}`;const t=n.toString();if(null==t)return""+t;const i=t.indexOf("\n");return i>=0?t.slice(0,i):t}function _v(n,e){return n?e?`${n} ${e}`:n:e||""}const w3=Bt({__forward_ref__:Bt});function Qt(n){return n.__forward_ref__=Qt,n.toString=function(){return kn(this())},n}function Ze(n){return Df(n)?n():n}function Df(n){return"function"==typeof n&&n.hasOwnProperty(w3)&&n.__forward_ref__===Qt}function Ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function go(n){return{providers:n.providers||[],imports:n.imports||[]}}function Tf(n){return EC(n,If)||EC(n,DC)}function EC(n,e){return n.hasOwnProperty(e)?n[e]:null}function Af(n){return n&&(n.hasOwnProperty(xv)||n.hasOwnProperty(A3))?n[xv]:null}const If=Bt({\u0275prov:Bt}),xv=Bt({\u0275inj:Bt}),DC=Bt({ngInjectableDef:Bt}),A3=Bt({ngInjectorDef:Bt});class ge{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wv(n){return n&&!!n.\u0275providers}const Tc=Bt({\u0275cmp:Bt}),Sv=Bt({\u0275dir:Bt}),Cv=Bt({\u0275pipe:Bt}),AC=Bt({\u0275mod:Bt}),As=Bt({\u0275fac:Bt}),Lu=Bt({__NG_ELEMENT_ID__:Bt}),IC=Bt({__NG_ENV_ID__:Bt});function nt(n){return"string"==typeof n?n:null==n?"":String(n)}function RC(n,e){throw new ne(-200,n)}function Ev(n,e){throw new ne(-201,!1)}var mt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(mt||{});let Dv;function PC(){return Dv}function Ui(n){const e=Dv;return Dv=n,e}function NC(n,e,t){const i=Tf(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&mt.Optional?null:void 0!==e?e:void Ev()}const ua={},Tv="__NG_DI_FLAG__";class OC{injector;constructor(e){this.injector=e}retrieve(e,t){return this.injector.get(e,t.optional?av:ua,t)}}const Nf="ngTempTokenPath",O3=/\n/gm,LC="__source";function F3(n,e=mt.Default){if(void 0===Mf())throw new ne(-203,!1);if(null===Mf())return NC(n,void 0,e);{const t=Mf();let i;return i=t instanceof OC?t.injector:t,i.get(n,e&mt.Optional?null:void 0,e)}}function qe(n,e=mt.Default){return(PC()||F3)(Ze(n),e)}function te(n,e=mt.Default){return qe(n,Of(e))}function Of(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Av(n){const e=[];for(let t=0;t<n.length;t++){const i=Ze(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ne(900,!1);let r,s=mt.Default;for(let o=0;o<i.length;o++){const a=i[o],c=k3(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(qe(r,s))}else e.push(qe(i))}return e}function Fu(n,e){return n[Tv]=e,n.prototype[Tv]=e,n}function k3(n){return n[Tv]}const Iv=Fu(Dc("Optional"),8),Rv=Fu(Dc("SkipSelf"),4);function da(n,e){return n.hasOwnProperty(As)?n[As]:null}function Ac(n,e){n.forEach(t=>Array.isArray(t)?Ac(t,e):e(t))}function kC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Lf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function nr(n,e,t){let i=ku(n,e);return i>=0?n[1|i]=t:(i=~i,function BC(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Pv(n,e){const t=ku(n,e);if(t>=0)return n[1|t]}function ku(n,e){return function W3(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Or={},Tt=[],xr=new ge(""),VC=new ge("",-1),Nv=new ge("");class kf{get(e,t=ua){if(t===ua){const i=new Error(`NullInjectorError: No provider for ${kn(e)}!`);throw i.name="NullInjectorError",i}return t}}function ir(n,e){const t=n[AC]||null;if(!t&&!0===e)throw new Error(`Type ${kn(n)} does not have '\u0275mod' property.`);return t}function vt(n){return n[Tc]||null}function rr(n){return n[Cv]||null}function j3(...n){return{\u0275providers:Ov(0,n),\u0275fromNgModule:!0}}function Ov(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return Ac(e,o=>{const a=o;Uf(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&zC(r,s),t}function zC(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Lv(r,s=>{e(s,i)})}}function Uf(n,e,t,i){if(!(n=Ze(n)))return!1;let r=null,s=Af(n);const o=!s&&vt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=Af(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Uf(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{Ac(s.imports,u=>{Uf(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&zC(l,e)}if(!a){const l=da(r)||(()=>new r);e({provide:r,useFactory:l,deps:Tt},r),e({provide:Nv,useValue:r,multi:!0},r),e({provide:xr,useValue:()=>qe(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=n;Lv(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function Lv(n,e){for(let t of n)wv(t)&&(t=t.\u0275providers),Array.isArray(t)?Lv(t,e):e(t)}const $3=Bt({provide:String,useValue:Bt});function Fv(n){return null!==n&&"object"==typeof n&&$3 in n}function fa(n){return"function"==typeof n}const kv=new ge(""),Bf={},WC={};let Uv;function Vf(){return void 0===Uv&&(Uv=new kf),Uv}class Vi{}class pa extends Vi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,Vv(e,o=>this.processProvider(o)),this.records.set(VC,Ic(void 0,this)),r.has("environment")&&this.records.set(Vi,Ic(void 0,this));const s=this.records.get(kv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Nv,Tt,mt.Self))}retrieve(e,t){return this.get(e,t.optional?av:ua,t)}destroy(){Uu(this),this._destroyed=!0;const e=ot(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ot(e)}}onDestroy(e){return Uu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Uu(this);const t=po(this),i=Ui(void 0);try{return e()}finally{po(t),Ui(i)}}get(e,t=ua,i=mt.Default){if(Uu(this),e.hasOwnProperty(IC))return e[IC](this);i=Of(i);const s=po(this),o=Ui(void 0);try{if(!(i&mt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function J3(n){return"function"==typeof n||"object"==typeof n&&n instanceof ge}(e)&&Tf(e);c=l&&this.injectableDefInScope(l)?Ic(Bv(e),Bf):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&mt.Self?Vf():this.parent).get(e,t=i&mt.Optional&&t===ua?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Nf]=a[Nf]||[]).unshift(kn(e)),s)throw a;return function U3(n,e,t,i){const r=n[Nf];throw e[LC]&&r.unshift(e[LC]),n.message=function B3(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=kn(e);if(Array.isArray(e))r=e.map(kn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):kn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(O3,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Nf]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Ui(o),po(s)}}resolveInjectorInitializers(){const e=ot(null),t=po(this),i=Ui(void 0);try{const s=this.get(xr,Tt,mt.Self);for(const o of s)o()}finally{po(t),Ui(i),ot(e)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(kn(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){let t=fa(e=Ze(e))?e:Ze(e&&e.provide);const i=function Y3(n){return Fv(n)?Ic(void 0,n.useValue):Ic(jC(n),Bf)}(e);if(!fa(e)&&!0===e.multi){let r=this.records.get(t);r||(r=Ic(void 0,Bf,!0),r.factory=()=>Av(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){const i=ot(null);try{return t.value===WC?RC(kn(e)):t.value===Bf&&(t.value=WC,t.value=t.factory()),"object"==typeof t.value&&t.value&&function K3(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ot(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Bv(n){const e=Tf(n),t=null!==e?e.factory:da(n);if(null!==t)return t;if(n instanceof ge)throw new ne(204,!1);if(n instanceof Function)return function X3(n){if(n.length>0)throw new ne(204,!1);const t=function T3(n){return n&&(n[If]||n[DC])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ne(204,!1)}function jC(n,e,t){let i;if(fa(n)){const r=Ze(n);return da(r)||Bv(r)}if(Fv(n))i=()=>Ze(n.useValue);else if(function GC(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Av(n.deps||[]));else if(function HC(n){return!(!n||!n.useExisting)}(n))i=()=>qe(Ze(n.useExisting));else{const r=Ze(n&&(n.useClass||n.provide));if(!function Z3(n){return!!n.deps}(n))return da(r)||Bv(r);i=()=>new r(...Av(n.deps))}return i}function Uu(n){if(n.destroyed)throw new ne(205,!1)}function Ic(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vv(n,e){for(const t of n)Array.isArray(t)?Vv(t,e):t&&wv(t)?Vv(t.\u0275providers,e):e(t)}function Lr(n,e){let t;n instanceof pa?(Uu(n),t=n):t=new OC(n);const r=po(t),s=Ui(void 0);try{return e()}finally{po(r),Ui(s)}}function $C(){return void 0!==PC()||null!=Mf()}function yn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Bn(n){return Array.isArray(n)&&!0===n[1]}function Gv(n){return!!(4&n.flags)}function kr(n){return n.componentOffset>-1}function jf(n){return!(1&~n.flags)}function or(n){return!!n.template}function Rs(n){return!!(512&n[2])}function yo(n){return!(256&~n[2])}class u6{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function eE(n,e,t,i){null!==e?e.applyValueToInputSignal(e,i):n[t]=i}const Ur=(()=>{const n=()=>tE;return n.ngInherit=!0,n})();function tE(n){return n.type.prototype.ngOnChanges&&(n.setInput=h6),d6}function d6(){const n=iE(this),e=n?.current;if(e){const t=n.previous;if(t===Or)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function h6(n,e,t,i,r){const s=this.declaredInputs[i],o=iE(n)||function f6(n,e){return n[nE]=e}(n,{previous:Or,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new u6(l&&l.currentValue,t,c===Or),eE(n,e,r,t)}const nE="__ngSimpleChanges__";function iE(n){return n[nE]||null}function St(n){for(;Array.isArray(n);)n=n[0];return n}function Uc(n,e){return St(e[n])}function yi(n,e){return St(e[n.index])}function ya(n,e){return n.data[e]}function _i(n,e){const t=e[n];return yn(t)?t:t[0]}function $v(n){return!(128&~n[2])}function br(n,e){return null==e?null:n[e]}function oE(n){n[17]=0}function qv(n){1024&n[2]||(n[2]|=1024,$v(n)&&Bc(n))}function zu(n){return!!(9216&n[2]||n[24]?.dirty)}function Xv(n){n[10].changeDetectionScheduler?.notify(8),64&n[2]&&(n[2]|=1024),zu(n)&&Bc(n)}function Bc(n){n[10].changeDetectionScheduler?.notify(0);let e=Ps(n);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,$v(e));)e=Ps(e)}function qf(n,e){if(yo(n))throw new ne(911,!1);null===n[21]&&(n[21]=[]),n[21].push(e)}function Ps(n){const e=n[3];return Bn(e)?e[3]:e}function Zv(n){return n[7]??=[]}function Kv(n){return n.cleanup??=[]}const Ke={lFrame:mE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Qv=!1;function ey(){return Ke.bindingsEnabled}function B(){return Ke.lFrame.lView}function je(){return Ke.lFrame.tView}function _o(n){return Ke.lFrame.contextLView=n,n[8]}function xo(n){return Ke.lFrame.contextLView=null,n}function gt(){let n=cE();for(;null!==n&&64===n.type;)n=n.parent;return n}function cE(){return Ke.lFrame.currentTNode}function Br(n,e){const t=Ke.lFrame;t.currentTNode=n,t.isParent=e}function ty(){return Ke.lFrame.isParent}function dE(){return Qv}function Yf(n){const e=Qv;return Qv=n,e}function xi(){const n=Ke.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Mr(){return Ke.lFrame.bindingIndex++}function Os(n){const e=Ke.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function T6(n,e){const t=Ke.lFrame;t.bindingIndex=t.bindingRootIndex=n,iy(e)}function iy(n){Ke.lFrame.currentDirectiveIndex=n}function sy(){return Ke.lFrame.currentQueryIndex}function Zf(n){Ke.lFrame.currentQueryIndex=n}function I6(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[5]:null}function pE(n,e,t){if(t&mt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&mt.Host||(r=I6(s),null===r||(s=s[14],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ke.lFrame=gE();return i.currentTNode=e,i.lView=n,!0}function oy(n){const e=gE(),t=n[1];Ke.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gE(){const n=Ke.lFrame,e=null===n?null:n.child;return null===e?mE(n):e}function mE(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function vE(){const n=Ke.lFrame;return Ke.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const yE=vE;function ay(){const n=vE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ri(){return Ke.lFrame.selectedIndex}function ba(n){Ke.lFrame.selectedIndex=n}function Wt(){const n=Ke.lFrame;return ya(n.tView,n.selectedIndex)}let xE=!0;function Gu(){return xE}function ss(n){xE=n}function cy(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Kf(n,e,t){bE(n,e,3,t)}function Jf(n,e,t,i){(3&n[2])===t&&bE(n,e,t,i)}function ly(n,e){let t=n[2];(3&t)===e&&(t&=16383,t+=1,n[2]=t)}function bE(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[17]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[17]+=65536),(a<s||-1==s)&&(k6(n,t,e,c),n[17]=(4294901760&n[17])+c+2),c++}function ME(n,e){const t=ot(null);try{e.call(n)}finally{ot(t)}}function k6(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[2]>>14<n[17]>>16&&(3&n[2])===e&&(n[2]+=16384,ME(a,s)):ME(a,s)}class Wu{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}}function wE(n){return 3===n||4===n||6===n}function SE(n){return 64===n.charCodeAt(0)}function zc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||CE(n,t,r,0,-1===t||2===t?e[++i]:null)}}return n}function CE(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t)return void(null!==r&&(n[s+1]=r));s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r)}function hy(n){return-1!==n}function ju(n){return 32767&n}function $u(n,e){let t=function H6(n){return n>>16}(n),i=e;for(;t>0;)i=i[14],t--;return i}let fy=!0;function Qf(n){const e=fy;return fy=n,e}let G6=0;const os={};function ep(n,e){const t=TE(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,py(i.data,n),py(e,null),py(i.blueprint,null));const r=tp(n,e),s=n.injectorIndex;if(hy(r)){const o=ju(r),a=$u(r,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function py(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TE(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function tp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=LE(r),null===i)return-1;if(t++,r=r[14],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function gy(n,e,t){!function W6(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Lu)&&(i=t[Lu]),null==i&&(i=t[Lu]=G6++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function AE(n,e,t){if(t&mt.Optional||void 0!==n)return n;Ev()}function IE(n,e,t,i){if(t&mt.Optional&&void 0===i&&(i=null),!(t&(mt.Self|mt.Host))){const r=n[9],s=Ui(void 0);try{return r?r.get(e,i,t&mt.Optional):NC(e,i,t&mt.Optional)}finally{Ui(s)}}return AE(i,0,t)}function RE(n,e,t,i=mt.Default,r){if(null!==n){if(2048&e[2]&&!(i&mt.Self)){const o=function Y6(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[2]&&!Rs(o);){const a=PE(s,o,t,i|mt.Self,os);if(a!==os)return a;let c=s.parent;if(!c){const l=o[20];if(l){const u=l.get(t,os,i);if(u!==os)return u}c=LE(o),o=o[14]}s=c}return r}(n,e,t,i,os);if(o!==os)return o}const s=PE(n,e,t,i,os);if(s!==os)return s}return IE(e,t,i,r)}function PE(n,e,t,i,r){const s=function q6(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Lu)?n[Lu]:void 0;return"number"==typeof e?e>=0?255&e:X6:e}(t);if("function"==typeof s){if(!pE(e,n,i))return i&mt.Host?AE(r,0,i):IE(e,t,i,r);try{let o;if(o=s(i),null!=o||i&mt.Optional)return o;Ev()}finally{yE()}}else if("number"==typeof s){let o=null,a=TE(n,e),c=-1,l=i&mt.Host?e[15][5]:null;for((-1===a||i&mt.SkipSelf)&&(c=-1===a?tp(n,e):e[a+8],-1!==c&&OE(i,!1)?(o=e[1],a=ju(c),e=$u(c,e)):a=-1);-1!==a;){const u=e[1];if(NE(s,a,u.data)){const d=$6(a,e,t,o,i,l);if(d!==os)return d}c=e[a+8],-1!==c&&OE(i,e[1].data[a+8]===l)&&NE(s,a,e)?(o=u,a=ju(c),e=$u(c,e)):a=-1}}return r}function $6(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=np(a,o,t,null==i?kr(a)&&fy:i!=o&&!!(3&a.type),r&mt.Host&&s===a);return null!==u?qu(e,o,u,a):os}function np(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,f=r?a+u:n.directiveEnd;for(let h=i?a:a+u;h<f;h++){const p=o[h];if(h<c&&t===p||h>=c&&p.type===t)return h}if(r){const h=o[c];if(h&&or(h)&&h.type===t)return c}return null}function qu(n,e,t,i){let r=n[t];const s=e.data;if(r instanceof Wu){const o=r;o.resolving&&RC(function Rt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():nt(n)}(s[t]));const a=Qf(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ui(o.injectImpl):null;pE(n,i,mt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function F6(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=tE(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Ui(l),Qf(a),o.resolving=!1,yE()}}return r}function NE(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function OE(n,e){return!(n&mt.Self||n&mt.Host&&e)}class _n{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return RE(this._tNode,this._lView,e,Of(i),t)}}function X6(){return new _n(gt(),B())}function Yn(n){return Ts(()=>{const e=n.prototype.constructor,t=e[As]||my(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[As]||my(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function my(n){return Df(n)?()=>{const e=my(Ze(n));return e&&e()}:da(n)}function LE(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[5]:null}function VE(n,e=null,t=null,i){const r=zE(n,e,t,i);return r.resolveInjectorInitializers(),r}function zE(n,e=null,t=null,i,r=new Set){const s=[t||Tt,j3(n)];return i=i||("object"==typeof n?void 0:kn(n)),new pa(s,e||Vf(),i||null,r)}class Vn{static THROW_IF_NOT_FOUND=ua;static NULL=new kf;static create(e,t){if(Array.isArray(e))return VE({name:""},t,e,"");{const i=e.name??"";return VE({name:i},e.parent,e.providers,i)}}static \u0275prov=Ne({token:Vn,providedIn:"any",factory:()=>qe(VC)});static __NG_ELEMENT_ID__=-1}new ge("").__NG_ELEMENT_ID__=n=>{const e=gt();if(null===e)throw new ne(204,!1);if(2&e.type)return e.value;if(n&mt.Optional)return null;throw new ne(204,!1)};const HE=!1;let Ls=(()=>class n{static __NG_ELEMENT_ID__=rU;static __NG_ENV_ID__=t=>t})();class GE extends Ls{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return qf(this._lView,e),()=>function Yv(n,e){if(null===n[21])return;const t=n[21].indexOf(e);-1!==t&&n[21].splice(t,1)}(this._lView,e)}}function rU(){return new GE(B())}class Fs{}const Yu=new ge("",{providedIn:"root",factory:()=>!1}),WE=new ge(""),yy=new ge("");let Mo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new _r(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}return n})();const Rn=class oU extends Fi{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,$C()&&(this.destroyRef=te(Ls,{optional:!0})??void 0,this.pendingTasks=te(Mo,{optional:!0})??void 0)}emit(e){const t=ot(null);try{super.next(e)}finally{ot(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof mi&&e.add(a),a}wrapInTimeout(e){return t=>{const i=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==i&&this.pendingTasks?.remove(i)})}}};function Zu(...n){}function jE(n){let e,t;function i(){n=Zu;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function $E(n){return queueMicrotask(()=>n()),()=>{n=Zu}}const _y="isAngularZone",rp=_y+"_ID";let aU=0;class Pt{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Rn(!1);onMicrotaskEmpty=new Rn(!1);onStable=new Rn(!1);onError=new Rn(!1);constructor(e){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=HE}=e;if(typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,function uU(n){const e=()=>{!function lU(n){function e(){jE(()=>{n.callbackScheduled=!1,by(n),n.isCheckStableRunning=!0,xy(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),by(n))}(n)},t=aU++;n._inner=n._inner.fork({name:"angular",properties:{[_y]:!0,[rp]:t,[rp+t]:!0},onInvokeTask:(i,r,s,o,a,c)=>{if(function dU(n){return YE(n,"__ignore_ng_zone__")}(c))return i.invokeTask(s,o,a,c);try{return qE(n),i.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),XE(n)}},onInvoke:(i,r,s,o,a,c,l)=>{try{return qE(n),i.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function hU(n){return YE(n,"__scheduler_tick__")}(c)&&e(),XE(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,by(n),xy(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(_y)}static assertInAngularZone(){if(!Pt.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(Pt.isInAngularZone())throw new ne(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,cU,Zu,Zu);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const cU={};function xy(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function by(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function qE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XE(n){n._nesting--,xy(n)}class My{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Rn;onMicrotaskEmpty=new Rn;onStable=new Rn;onError=new Rn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}function YE(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Vr{_console=console;handleError(e){this._console.error("ERROR",e)}}const pU=new ge("",{providedIn:"root",factory:()=>{const n=te(Pt),e=te(Vr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function KE(n,e){return SC(n,e)}const mU=(KE.required=function gU(n){return SC(Ef,n)},KE);function vU(){return Hc(gt(),B())}function Hc(n,e){return new ar(yi(n,e))}let ar=(()=>class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=vU})();function JE(n){return n instanceof ar?n.nativeElement:n}function as(n,e){const t=function t3(n,e){const t=Object.create(sv);t.value=n,void 0!==e&&(t.equal=e);const i=()=>(Ru(t),t.value);return i[ti]=t,i}(n,e?.equal),i=t[ti];return t.set=r=>bf(i,r),t.update=r=>function hC(n,e){oC()||dC(n),bf(n,e(n.value))}(i,r),t.asReadonly=sp.bind(t),t}function sp(){const n=this[ti];if(void 0===n.readonlyFn){const e=()=>this();e[ti]=n,n.readonlyFn=e}return n.readonlyFn}function eD(n){return function QE(n){return"function"==typeof n&&void 0!==n[ti]}(n)&&"function"==typeof n.set}function yU(){return this._results[Symbol.iterator]()}class _U{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Fi}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Bi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function G3(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yU}function Ju(n){return!(128&~n.flags)}var op=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(op||{});const ap=new Map;let bU=0;function Sy(n){ap.delete(n[19])}const Ey="__ngContext__";function Hi(n,e){yn(e)?(n[Ey]=e[19],function wU(n){ap.set(n[19],n)}(e)):n[Ey]=e}function lD(n){return dD(n[12])}function uD(n){return dD(n[4])}function dD(n){for(;null!==n&&!Bn(n);)n=n[4];return n}let Ty;const wa=new ge("",{providedIn:"root",factory:()=>HU}),HU="ng",Ay=new ge(""),Iy=new ge("",{providedIn:"platform",factory:()=>"unknown"}),yD=new ge("",{providedIn:"root",factory:()=>function cs(){if(void 0!==Ty)return Ty;if(typeof document<"u")return document;throw new ne(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),MD=new ge("",{providedIn:"root",factory:()=>!1});var zy=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(zy||{});const Wc=new ge(""),ED=new Set;function cr(n){ED.has(n)||(ED.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}let fp=(()=>class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=qU})();function qU(){return new fp(B(),gt())}var jc=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(jc||{});let Hy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}return n})();const DD=[jc.EarlyRead,jc.Write,jc.MixedReadWrite,jc.Read];let TD=(()=>{class n{ngZone=te(Pt);scheduler=te(Fs);errorHandler=te(Vr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){te(Wc,{optional:!0})}execute(){this.executing=!0;for(const i of DD)for(const r of this.sequences)if(!r.erroredOrDestroyed&&r.hooks[i])try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,r.hooks[i])(r.pipelinedValue),r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(const i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(const i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){const{view:i}=t;void 0!==i?((i[25]??=[]).push(t),Bc(i),i[2]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(zy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}return n})();class AD{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,s,o=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const e=this.view?.[25];e&&(this.view[25]=e.filter(t=>t!==this))}}function Gy(n,e){!e?.injector&&function Rc(n){if(!$C())throw new ne(-203,!1)}();const t=e?.injector??te(Vn);return cr("NgAfterNextRender"),function RD(n,e,t,i){const r=e.get(Hy);r.impl??=e.get(TD);const s=e.get(Wc,null,{optional:!0}),o=t?.phase??jc.MixedReadWrite,a=!0!==t?.manualCleanup?e.get(Ls):null,c=e.get(fp,null,{optional:!0}),l=new AD(r.impl,function XU(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,o),c?.view,i,a,s?.snapshot(null));return r.impl.register(l),l}(n,t,e,!0)}function tT(n,e){const t=n.contentQueries;if(null!==t){const i=ot(null);try{for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];Zf(t[r]),a.contentQueries(2,e[o],o)}}}finally{ot(i)}}}function n_(n,e,t){Zf(0);const i=ot(null);try{e(n,t)}finally{ot(i)}}function i_(n,e,t){if(Gv(e)){const i=ot(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ot(i)}}}var wr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(wr||{});let Mp,wp;function sT(n){return function r_(){if(void 0===wp&&(wp=null,mn.trustedTypes))try{wp=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wp}()?.createScriptURL(n)||n}class oT{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${MC})`}}function So(n){return n instanceof oT?n.changingThisBreaksApplicationSecurity:n}function dd(n,e){const t=function L4(n){return n instanceof oT&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${MC})`)}return t===e}const B4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var el=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(el||{});function ls(n){const e=fd();return e?e.sanitize(el.URL,n)||"":dd(n,"URL")?So(n):function s_(n){return(n=String(n)).match(B4)?n:"unsafe:"+n}(nt(n))}function gT(n){const e=fd();if(e)return sT(e.sanitize(el.RESOURCE_URL,n)||"");if(dd(n,"ResourceURL"))return sT(So(n));throw new ne(904,!1)}function mT(n){return function A4(n){return function nT(){if(void 0===Mp&&(Mp=null,mn.trustedTypes))try{Mp=mn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Mp}()?.createScriptURL(n)||n}(n[0])}function fd(){const n=B();return n&&n[10].sanitizer}function us(n){return n instanceof Function?n():n}function fB(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const ET="ng-template";function pB(n,e,t,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==fB(e[r+1].toLowerCase(),t,0))return!0}else if(d_(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===t)return!0}return!1}function d_(n){return 4===n.type&&n.value!==ET}function gB(n,e,t){return e===(4!==n.type||t?n.value:ET)}function mB(n,e,t){let i=4;const r=n.attrs,s=null!==r?function _B(n){for(let e=0;e<n.length;e++)if(wE(n[e]))return e;return n.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!gB(n,c,t)||""===c&&1===e.length){if(zr(i))return!1;o=!0}}else if(8&i){if(null===r||!pB(n,r,c,t)){if(zr(i))return!1;o=!0}}else{const l=e[++a],u=vB(c,r,d_(n),t);if(-1===u){if(zr(i))return!1;o=!0;continue}if(""!==l){let d;if(d=u>s?"":r[u+1].toLowerCase(),2&i&&l!==d){if(zr(i))return!1;o=!0}}}}else{if(!o&&!zr(i)&&!zr(c))return!1;if(o&&zr(c))continue;o=!1,i=c|1&i}}return zr(i)||o}function zr(n){return!(1&n)}function vB(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function xB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function DT(n,e,t=!1){for(let i=0;i<e.length;i++)if(mB(n,e[i],t))return!0;return!1}function TT(n,e){return n?":not("+e.trim()+")":e}function MB(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!zr(o)&&(e+=TT(s,r),r=""),i=o,s=s||!zr(i);t++}return""!==r&&(e+=TT(s,r)),e}const it={};function Dp(n,e,t){return n.createElement(e,t)}function Ea(n,e,t,i,r){n.insertBefore(e,t,i,r)}function IT(n,e,t){n.appendChild(e,t)}function RT(n,e,t,i,r){null!==i?Ea(n,e,t,i,r):IT(n,e,t)}function NT(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&function z6(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];SE(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}}(n,e,i),null!==r&&function EB(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}(n,e,r),null!==s&&function CB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function p_(n,e,t,i,r,s,o,a,c,l,u){const d=26+i,f=d+r,h=function DB(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:it);return t}(d,f),p="function"==typeof l?l():l;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function Tp(n,e,t,i,r,s,o,a,c,l,u){const d=e.blueprint.slice();return d[0]=r,d[2]=1228|i,(null!==l||n&&2048&n[2])&&(d[2]|=2048),oE(d),d[3]=d[14]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[9]=c||n&&n[9]||null,d[5]=s,d[19]=function MU(){return bU++}(),d[6]=u,d[20]=l,d[15]=2==e.type?n[15]:d,d}function g_(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function gd(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function m_(n,e){return n[12]?n[13][4]=e:n[12]=e,n[13]=e,e}function fe(n=1){LT(je(),B(),ri()+n,!1)}function LT(n,e,t,i){if(!i)if(3&~e[2]){const s=n.preOrderHooks;null!==s&&Jf(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Kf(e,s,t)}ba(t)}var Ap=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ap||{});function v_(n,e,t,i){const r=ot(null);try{const[s,o,a]=n.inputs[t];let c=null;!!(o&Ap.SignalBased)&&(c=e[s][ti]),null!==c&&void 0!==c.transformFn?i=c.transformFn(i):null!==a&&(i=a.call(e,i)),null!==n.setInput?n.setInput(e,c,i,t,s):eE(e,c,s,i)}finally{ot(r)}}function FT(n,e,t,i,r){const s=ri(),o=2&i;try{ba(-1),o&&e.length>26&&LT(n,e,26,!1),t(i,r)}finally{ba(s)}}function Ip(n,e,t){(function LB(n,e,t){const i=t.directiveStart,r=t.directiveEnd;kr(t)&&function TB(n,e,t){const i=yi(e,n),r=function OT(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=p_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}(t),s=n[10].rendererFactory,o=m_(n,Tp(n,r,null,g_(t),i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ep(t,e);const s=t.initialInputs;for(let o=i;o<r;o++){const a=n.data[o],c=qu(e,n,o,t);Hi(c,e),null!==s&&UB(0,o-i,c,a,0,s),or(a)&&(_i(t.index,e)[8]=qu(e,n,o,t))}})(n,e,t),!(64&~t.flags)&&function FB(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function A6(){return Ke.lFrame.currentDirectiveIndex}();try{ba(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];iy(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&kB(c,l)}}finally{ba(-1),iy(o)}}(n,e,t)}function y_(n,e,t=yi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}let kT=()=>null;function Gi(n,e,t,i,r,s,o,a){if(a||!M_(e,n,t,i,r)){if(3&e.type){const c=yi(e,t);i=function NB(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r)}}else kr(e)&&function OB(n,e){const t=_i(e,n);16&t[2]||(t[2]|=64)}(t,e.index)}function kB(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function __(n,e){const t=n.directiveRegistry;let i=null;if(t)for(let r=0;r<t.length;r++){const s=t[r];DT(e,s.selectors,!1)&&(i??=[],or(s)?i.unshift(s):i.push(s))}return i}function ds(n,e,t,i,r,s){const o=yi(n,e);!function x_(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?nt(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function UB(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;a+=2)v_(i,t,o[a],o[a+1])}function M_(n,e,t,i,r){const s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i];let a=!1;if(o)for(let c=0;c<o.length;c+=2){const l=o[c];v_(e.data[l],t[l],o[c+1],r),a=!0}if(s)for(const c of s)v_(e.data[c],t[c],i,r),a=!0;return a}function BB(n,e){const t=_i(e,n),i=t[1];!function VB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[0];null!==r&&null===t[6]&&(t[6]=null),Rp(i,t,t[8])}function Rp(n,e,t){oy(e);try{const i=n.viewQuery;null!==i&&n_(1,i,t);const r=n.template;null!==r&&FT(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[18]?.finishViewCreation(n),n.staticContentQueries&&tT(n,e),n.staticViewQueries&&n_(2,n.viewQuery,t);const s=n.components;null!==s&&function zB(n,e){for(let t=0;t<e.length;t++)BB(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,ay()}}function Da(n,e){return!e||null===e.firstChild||Ju(n)}function S_(n,e){return undefined(n,e)}var Co=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Co||{});function Eo(n){return!(32&~n.flags)}function il(n,e,t,i,r){if(null!=i){let s,o=!1;Bn(i)?s=i:yn(i)&&(o=!0,i=i[0]);const a=St(i);0===n&&null!==t?null==r?IT(e,t,a):Ea(e,t,a,r||null,!0):1===n&&null!==t?Ea(e,t,a,r||null,!0):2===n?function pd(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function XB(n,e,t,i,r){const s=t[7];s!==St(t)&&il(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];Np(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function zT(n,e){e[10].changeDetectionScheduler?.notify(9),Np(n,e,e[11],2,null,null)}function C_(n,e){const t=n[9],i=t.indexOf(e);t.splice(i,1)}function md(n,e){if(yo(e))return;const t=e[11];t.destroyNode&&Np(n,e,t,3,null,null),function WB(n){let e=n[12];if(!e)return E_(n[1],n);for(;e;){let t=null;if(yn(e))t=e[12];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)yn(e)&&E_(e[1],e),e=e[3];null===e&&(e=n),yn(e)&&E_(e[1],e),t=e&&e[4]}e=t}}(e)}function E_(n,e){if(yo(e))return;const t=ot(null);try{e[2]&=-129,e[2]|=256,e[24]&&vf(e[24]),function $B(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Wu)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function jB(n,e){const t=n.cleanup,i=e[7];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[7]=null);const r=e[21];if(null!==r){e[21]=null;for(let o=0;o<r.length;o++)(0,r[o])()}const s=e[23];if(null!==s){e[23]=null;for(const o of s)o.destroy()}}(n,e),1===e[1].type&&e[11].destroy();const i=e[16];if(null!==i&&Bn(e[3])){i!==e[3]&&C_(i,e);const r=e[18];null!==r&&r.detachView(n)}Sy(e)}finally{ot(t)}}function D_(n,e,t){return function HT(n,e,t){let i=e;for(;null!==i&&168&i.type;)i=(e=i).parent;if(null===i)return t[0];if(kr(i)){const{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===wr.None||r===wr.Emulated)return null}return yi(i,t)}(n,e.parent,t)}let jT=function WT(n,e,t){return 40&n.type?yi(n,t):null};function Pp(n,e,t,i){const r=D_(n,i,e),s=e[11],a=function GT(n,e,t){return jT(n,e,t)}(i.parent||e[5],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)RT(s,r,t[c],a,!1);else RT(s,r,t,a,!1)}function Ta(n,e){if(null!==e){const t=e.type;if(3&t)return yi(e,n);if(4&t)return A_(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Ta(n,i);{const r=n[e.index];return Bn(r)?A_(-1,r):St(r)}}if(128&t)return Ta(n,e.next);if(32&t)return S_(e,n)()||St(n[e.index]);{const i=qT(n,e);return null!==i?Array.isArray(i)?i[0]:Ta(Ps(n[15]),i):Ta(n,e.next)}}return null}function qT(n,e){return null!==e?n[15][5].projection[e.projection]:null}function A_(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Ta(i,r)}return e[7]}function I_(n,e,t,i,r,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Hi(St(a),i),t.flags|=2),!Eo(t))if(8&c)I_(n,e,t.child,i,r,s,!1),il(e,n,r,a,s);else if(32&c){const l=S_(t,i);let u;for(;u=l();)il(e,n,r,u,s);il(e,n,r,a,s)}else 16&c?XT(n,e,i,t,r,s):il(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Np(n,e,t,i,r,s){I_(t,i,n.firstChild,e,r,s,!1)}function XT(n,e,t,i,r,s){const o=t[15],c=o[5].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)il(e,n,r,c[l],s);else{let l=c;const u=o[3];Ju(i)&&(l.flags|=128),I_(n,e,l,u,r,s,!0)}}function rl(n,e,t,i,r=!1){for(;null!==t;){if(128===t.type){t=r?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&i.push(St(s)),Bn(s)&&R_(s,i);const o=t.type;if(8&o)rl(n,e,t.child,i);else if(32&o){const a=S_(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=qT(e,t);if(Array.isArray(a))i.push(...a);else{const c=Ps(e[15]);rl(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function R_(n,e){for(let t=10;t<n.length;t++){const i=n[t],r=i[1].firstChild;null!==r&&rl(i[1],i,r,e)}n[7]!==n[0]&&e.push(n[7])}function YT(n){if(null!==n[25]){for(const e of n[25])e.impl.addSequence(e);n[25].length=0}}let ZT=[];const QB={...bc,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Bc(n.lView)},consumerOnSignalRead(){this.lView[24]=this}},tV={...bc,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ps(n.lView);for(;e&&!KT(e[1]);)e=Ps(e);e&&qv(e)},consumerOnSignalRead(){this.lView[24]=this}};function KT(n){return 2!==n.type}function JT(n){if(null===n[23])return;let e=!0;for(;e;){let t=!1;for(const i of n[23])i.dirty&&(t=!0,null===i.zone||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(8192&n[2])}}function Op(n,e=!0,t=0){const r=n[10].rendererFactory;r.begin?.();try{!function iV(n,e){const t=dE();try{Yf(!0),P_(n,e);let i=0;for(;zu(n);){if(100===i)throw new ne(103,!1);i++,P_(n,1)}}finally{Yf(t)}}(n,t)}catch(o){throw e&&function b_(n,e){const t=n[9],i=t?t.get(Vr,null):null;i&&i.handleError(e)}(n,o),o}finally{r.end?.()}}function eA(n,e,t,i){if(yo(e))return;const r=e[2];oy(e);let a=!0,c=null,l=null;KT(n)?(l=function ZB(n){return n[24]??function KB(n){const e=ZT.pop()??Object.create(QB);return e.lView=n,e}(n)}(e),c=Mc(l)):null===function rv(){return Dn}()?(a=!1,l=function eV(n){const e=n[24]??Object.create(tV);return e.lView=n,e}(e),c=Mc(l)):e[24]&&(vf(e[24]),e[24]=null);try{oE(e),function hE(n){return Ke.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&FT(n,e,t,2,i);const u=!(3&~r);if(u){const h=n.preOrderCheckHooks;null!==h&&Kf(e,h,null)}else{const h=n.preOrderHooks;null!==h&&Jf(e,h,0,null),ly(e,0)}if(function rV(n){for(let e=lD(n);null!==e;e=uD(e)){if(!(2&e[2]))continue;const t=e[9];for(let i=0;i<t.length;i++)qv(t[i])}}(e),JT(e),tA(e,0),null!==n.contentQueries&&tT(n,e),u){const h=n.contentCheckHooks;null!==h&&Kf(e,h)}else{const h=n.contentHooks;null!==h&&Jf(e,h,1),ly(e,1)}!function oV(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)ba(~r);else{const s=r,o=t[++i],a=t[++i];T6(o,s);const c=e[s];a(2,c)}}}finally{ba(-1)}}(n,e);const d=n.components;null!==d&&iA(e,d,0);const f=n.viewQuery;if(null!==f&&n_(2,f,i),u){const h=n.viewCheckHooks;null!==h&&Kf(e,h)}else{const h=n.viewHooks;null!==h&&Jf(e,h,2),ly(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[22]){for(const h of e[22])h();e[22]=null}YT(e),e[2]&=-73}catch(u){throw Bc(e),u}finally{null!==l&&(Nu(l,c),a&&function JB(n){n.lView[24]!==n&&(n.lView=null,ZT.push(n))}(l)),ay()}}function tA(n,e){for(let t=lD(n);null!==t;t=uD(t))for(let i=10;i<t.length;i++)nA(t[i],e)}function sV(n,e,t){const i=_i(e,n);nA(i,t)}function nA(n,e){$v(n)&&P_(n,e)}function P_(n,e){const i=n[1],r=n[2],s=n[24];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!mf(s)),o||=!1,s&&(s.dirty=!1),n[2]&=-9217,o)eA(i,n,i.template,n[8]);else if(8192&r){JT(n),tA(n,1);const a=i.components;null!==a&&iA(n,a,1),YT(n)}}function iA(n,e,t){for(let i=0;i<e.length;i++)sV(n,e[i],t)}function vd(n,e){const t=dE()?64:1088;for(n[10].changeDetectionScheduler?.notify(e);n;){n[2]|=t;const i=Ps(n);if(Rs(n)&&!i)return n;n=i}return null}function rA(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function yd(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[16];null!==r&&r!==n&&C_(r,i),e>0&&(n[t-1][4]=i[4]);const s=Lf(n,10+e);!function VT(n,e){zT(n,e),e[0]=null,e[5]=null}(i[1],i);const o=s[18];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function oA(n,e){const t=n[9],i=e[3];(yn(i)||e[15]!==i[3][15])&&(n[2]|=2),null===t?n[9]=[e]:t.push(e)}let _d=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){const e=this._lView,t=e[1];return rl(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return yo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Bn(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(yd(e,i),Lf(t,i))}this._attachedToViewContainer=!1}md(this._lView[1],this._lView)}onDestroy(e){qf(this._lView,e)}markForCheck(){vd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Xv(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,Op(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Rs(this._lView),t=this._lView[16];null!==t&&!e&&C_(t,this._lView),zT(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e;const t=Rs(this._lView),i=this._lView[16];null!==i&&!t&&oA(i,this._lView),Xv(this._lView)}},Vs=(()=>class n{static __NG_ELEMENT_ID__=uV})();const cV=Vs,lV=class extends cV{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function nl(n,e,t,i){const r=ot(null);try{const s=e.tView,c=Tp(n,s,t,4096&n[2]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[16]=n[e.index];const u=n[18];return null!==u&&(c[18]=u.createEmbeddedView(s)),Rp(s,c,t),c}finally{ot(r)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new _d(r)}};function uV(){return Lp(gt(),B())}function Lp(n,e){return 4&n.type?new lV(e,n,Hc(n,e)):null}function ol(n,e,t,i,r){let s=n.data[e];if(null===s)s=function k_(n,e,t,i,r){const s=cE(),o=ty(),c=n.data[e]=function xV(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return function xa(){return null!==Ke.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return function _V(n,e,t,i){null===n.firstChild&&(n.firstChild=e),null!==t&&(i?null==t.child&&null!==e.parent&&(t.child=e):null===t.next&&(t.next=e,e.prev=t))}(n,c,s,o),c}(n,e,t,i,r),function D6(){return Ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Hu(){const n=Ke.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Br(s,!0),s}let oz=class{},AA=class{};class az{resolveComponentFactory(e){throw Error(`No component factory found for ${kn(e)}.`)}}let Hp=class{static NULL=new az};class j_{}let zs=(()=>class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>function cz(){const n=B(),t=_i(gt().index,n);return(yn(t)?t:n)[11]}()})(),lz=(()=>{class n{static \u0275prov=Ne({token:n,providedIn:"root",factory:()=>null})}return n})();const q_={};class ll{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Of(i);const r=this.injector.get(e,q_,i);return r!==q_||t===q_?r:this.parentInjector.get(e,t,i)}}function X_(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=_v(r,a):2==s&&(i=_v(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function le(n,e=mt.Default){const t=B();return null===t?qe(n,e):RE(gt(),t,Ze(n),e)}function Y_(n,e,t,i,r){const s=null===i?null:{"":-1},o=r(n,t);if(null!==o){let a,c=null,l=null;const u=function pz(n){let e=null,t=!1;for(let o=0;o<n.length;o++){const a=n[o];if(0===o&&or(a)&&(e=a),null!==a.findHostDirectiveDefs){t=!0;break}}if(!t)return null;let i=null,r=null,s=null;for(const o of n)null!==o.findHostDirectiveDefs&&(i??=[],r??=new Map,s??=new Map,gz(o,i,s,r)),o===e&&(i??=[],i.push(o));return null!==i?(i.push(...null===e?n:n.slice(1)),[i,r,s]):null}(o);null===u?a=o:[a,c,l]=u,function vz(n,e,t,i,r,s,o){const a=i.length;let c=!1;for(let f=0;f<a;f++){const h=i[f];!c&&or(h)&&(c=!0,mz(n,t,f)),gy(ep(t,e),n,h.type)}!function wz(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,a);for(let f=0;f<a;f++){const h=i[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=gd(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){const h=i[f];if(t.mergedAttrs=zc(t.mergedAttrs,h.hostAttrs),_z(n,t,e,d,h),Mz(d,h,r),null!==o&&o.has(h)){const[v,m]=o.get(h);t.directiveToIndex.set(h.type,[d,v+t.directiveStart,m+t.directiveStart])}else(null===s||!s.has(h))&&t.directiveToIndex.set(h.type,d);null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const p=h.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}!function yz(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){const r=n.data[i];if(null!==t&&t.has(r)){const s=t.get(r);NA(0,e,s,i),NA(1,e,s,i),LA(e,i,!0)}else PA(0,e,r,i),PA(1,e,r,i),LA(e,i,!1)}}(n,t,s)}(n,e,t,a,s,c,l)}null!==s&&null!==i&&function fz(n,e,t){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ne(-301,!1);i.push(e[r],s)}}(t,i,s)}function gz(n,e,t,i){const r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function mz(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function PA(n,e,t,i){const r=0===n?t.inputs:t.outputs;for(const s in r)if(r.hasOwnProperty(s)){let o;o=0===n?e.inputs??={}:e.outputs??={},o[s]??=[],o[s].push(i),OA(e,s)}}function NA(n,e,t,i){const r=0===n?t.inputs:t.outputs;for(const s in r)if(r.hasOwnProperty(s)){const o=r[s];let a;a=0===n?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),OA(e,o)}}function OA(n,e){"class"===e?n.flags|=8:"style"===e&&(n.flags|=16)}function LA(n,e,t){const{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(null===i||!t&&null===r||t&&null===s||d_(n))return n.initialInputs??=[],void n.initialInputs.push(null);let o=null,a=0;for(;a<i.length;){const c=i[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!t&&r.hasOwnProperty(c)){const l=r[c];for(const u of l)if(u===e){o??=[],o.push(c,i[a+1]);break}}else if(t&&s.hasOwnProperty(c)){const l=s[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){o??=[],o.push(l[u+1],i[a+1]);break}}a+=2}else a+=2;else a+=4}n.initialInputs??=[],n.initialInputs.push(o)}function _z(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=da(r.type)),o=new Wu(s,or(r),le);n.blueprint[i]=o,t[i]=o,function xz(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function bz(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,gd(n,t,r.hostVars,it),r)}function Mz(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;or(e)&&(t[""]=n)}}function FA(n,e,t,i,r,s,o,a){const c=e.consts,u=ol(e,n,2,i,br(c,o));return s&&Y_(e,t,u,br(c,a),r),u.mergedAttrs=zc(u.mergedAttrs,u.attrs),null!==u.attrs&&X_(u,u.attrs,!1),null!==u.mergedAttrs&&X_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}function kA(n,e){cy(n,e),Gv(e)&&n.queries.elementEnd(e)}class UA extends Hp{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=vt(e);return new Ad(t,this.ngModule)}}class Ad extends AA{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function Sz(n){return Object.keys(n).map(e=>{const[t,i,r]=n[e],s={propName:t,templateName:e,isSignal:!!(i&Ap.SignalBased)};return r&&(s.transform=r),s})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function Cz(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function wB(n){return n.map(MB).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){const s=ot(null);try{const o=this.componentDef,a=i?["ng-version","19.2.5"]:function SB(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!zr(r))break;r=s}i++}return t.length&&e.push(1,...t),e}(this.componentDef.selectors[0]),c=p_(0,null,null,1,0,null,null,null,null,[a],null),l=function Ez(n,e,t){let i=e instanceof Vi?e:e?.injector;return i&&null!==n.getStandaloneInjector&&(i=n.getStandaloneInjector(i)||i),i?new ll(t,i):t}(o,r||this.ngModule,e),u=function Dz(n){const e=n.get(j_,null);if(null===e)throw new ne(407,!1);return{rendererFactory:e,sanitizer:n.get(lz,null),changeDetectionScheduler:n.get(Fs,null)}}(l),d=u.rendererFactory.createRenderer(null,o),f=i?function AB(n,e,t,i){const s=i.get(MD,!1)||t===wr.ShadowDom,o=n.selectRootElement(e,s);return function IB(n){kT(n)}(o),o}(d,i,o.encapsulation,l):function Tz(n,e){const t=(n.selectors[0][0]||"div").toLowerCase();return Dp(e,t,"svg"===t?"svg":"math"===t?"math":null)}(o,d),h=Tp(null,c,null,512|g_(o),null,null,u,d,l,null,null);h[26]=f,oy(h);let p=null;try{const v=FA(26,c,h,"#host",()=>[this.componentDef],!0,0);f&&(NT(d,f,v),Hi(f,h)),Ip(c,h,v),i_(c,v,h),kA(c,v),void 0!==t&&function Iz(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s&&s.length?Array.from(s):null)}}(v,this.ngContentSelectors,t),p=_i(v.index,h),h[8]=p[8],Rp(c,h,null)}catch(v){throw null!==p&&Sy(p),Sy(h),v}finally{ay()}return new Az(this.componentType,h)}finally{ot(s)}}}class Az extends oz{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=ya(t[1],26),this.location=Hc(this._tNode,t),this.instance=_i(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new _d(t,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const r=this._rootLView;M_(i,r[1],r,e,t),this.previousInputValues.set(e,t),vd(_i(i.index,r),1)}get injector(){return new _n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let Hr=(()=>class n{static __NG_ELEMENT_ID__=Rz})();function Rz(){return zA(gt(),B())}const Pz=Hr,BA=class extends Pz{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Hc(this._hostTNode,this._hostLView)}get injector(){return new _n(this._hostTNode,this._hostLView)}get parentInjector(){const e=tp(this._hostTNode,this._hostLView);if(hy(e)){const t=$u(e,this._hostLView),i=ju(e);return new _n(t[1].data[i+8],t)}return new _n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=VA(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,Da(this._hostTNode,null)),a}createComponent(e,t,i,r,s){const o=e&&!function Bu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const c=o?e:new Ad(vt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const v=(o?l:this.parentInjector).get(Vi,null);v&&(s=v)}vt(c.componentType??{});const h=c.create(l,r,null,s);return this.insertImpl(h.hostView,a,Da(this._hostTNode,null)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function v6(n){return Bn(n[3])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[3],l=new BA(c,c[5],c[3]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return function sl(n,e,t,i=!0){const r=e[1];if(function aV(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],kC(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[16];null!==o&&t!==o&&oA(o,e);const a=e[18];null!==a&&a.insertView(n),Xv(e),e[2]|=128}(r,e,n,t),i){const o=A_(t,n),a=e[11],c=a.parentNode(n[7]);null!==c&&function GB(n,e,t,i,r,s){i[0]=r,i[5]=e,Np(n,i,t,1,r,s)}(r,n[5],a,e,c,o)}const s=e[6];null!==s&&null!==s.firstChild&&(s.firstChild=null)}(o,r,s,i),e.attachToViewContainerRef(),kC(Z_(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=VA(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=yd(this._lContainer,t);i&&(Lf(Z_(this._lContainer),t),md(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=yd(this._lContainer,t);return i&&null!=Lf(Z_(this._lContainer),t)?new _d(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function VA(n){return n[8]}function Z_(n){return n[8]||(n[8]=[])}function zA(n,e){let t;const i=e[n.index];return Bn(i)?t=i:(t=rA(i,e,null,n),e[n.index]=t,m_(e,t)),HA(t,e,n,i),new BA(t,n,e)}let HA=function WA(n,e,t,i){if(n[7])return;let r;r=8&t.type?St(i):function Nz(n,e){const t=n[11],i=t.createComment(""),r=yi(e,n),s=t.parentNode(r);return Ea(t,s,i,t.nextSibling(r),!1),i}(e,t),n[7]=r};class J_{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new J_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Q_{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Q_(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==rx(e,t).matches&&this.queries[t].setDirty()}}class jA{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof e?function zz(n){return n.split(",").map(e=>e.trim())}(e):e}}class ex{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new ex(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class tx{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new tx(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,kz(t,s)),this.matchTNodeWithReadOption(e,t,np(t,e,s,!1,!1))}else i===Vs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,np(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ar||r===Hr||r===Vs&&4&t.type)this.addMatch(t.index,-2);else{const s=np(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function kz(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Bz(n,e,t,i){return-1===t?function Uz(n,e){return 11&n.type?Hc(n,e):4&n.type?Lp(n,e):null}(e,n):-2===t?function Vz(n,e,t){return t===ar?Hc(e,n):t===Vs?Lp(e,n):t===Hr?zA(e,n):void 0}(n,e,i):qu(n,n[1],t,e)}function $A(n,e,t,i){const r=e[18].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const l=o[c];a.push(l<0?null:Bz(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function nx(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=$A(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=10;d<u.length;d++){const f=u[d];f[16]===f[3]&&nx(f[1],f,l,i)}if(null!==u[9]){const d=u[9];for(let f=0;f<d.length;f++){const h=d[f];nx(h[1],h,l,i)}}}}}return i}function XA(n,e,t){const i=je();return i.firstCreatePass&&(function ZA(n,e,t){null===n.queries&&(n.queries=new ex),n.queries.track(new tx(e,t))}(i,new jA(n,e,t),-1),!(2&~e)&&(i.staticViewQueries=!0)),function qA(n,e,t){const i=new _U(!(4&~t));return function y6(n,e,t,i){const r=Zv(e);r.push(t),n.firstCreatePass&&Kv(n).push(i,r.length-1)}(n,e,i,i.destroy),(e[18]??=new Q_).queries.push(new J_(i))-1}(i,B(),e)}function rx(n,e){return n.queries.getByIndex(e)}function KA(n,e){const t=n[1],i=rx(t,e);return i.crossesNgTemplate?nx(t,n,e,[]):$A(t,n,i,e)}let Ra=class{},c1=class{};class ax extends Ra{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new UA(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;const s=ir(e);this._bootstrapComponents=us(s.bootstrap),this._r3Injector=zE(e,t,[{provide:Ra,useValue:this},{provide:Hp,useValue:this.componentFactoryResolver},...i],kn(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class cx extends c1{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ax(this.moduleType,e,[])}}class l1 extends Ra{injector;componentFactoryResolver=new UA(this);instance=null;constructor(e){super();const t=new pa([...e.providers,{provide:Ra,useValue:this},{provide:Hp,useValue:this.componentFactoryResolver}],e.parent||Vf(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Wp(n,e,t=null){return new l1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let eH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=Ov(0,t.type),r=i.length>0?Wp([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ne({token:n,providedIn:"environment",factory:()=>new n(qe(Vi))})}return n})();function Kn(n){return Ts(()=>{const e=u1(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===op.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(eH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wr.Emulated,styles:n.styles||Tt,_:null,schemas:n.schemas||null,tView:null,id:""};e.standalone&&cr("NgStandalone"),d1(t);const i=n.dependencies;return t.directiveDefs=jp(i,!1),t.pipeDefs=jp(i,!0),t.id=function oH(n){let e=0;const i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,"function"==typeof n.consts?"":n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(const s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function tH(n){return vt(n)||function ii(n){return n[Sv]||null}(n)}function nH(n){return null!==n}function Pa(n){return Ts(()=>({type:n.type,bootstrap:n.bootstrap||Tt,declarations:n.declarations||Tt,imports:n.imports||Tt,exports:n.exports||Tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function iH(n,e){if(null==n)return Or;const t={};for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];let s,o,a,c;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,c=r[3]||null):(s=r,o=r,a=Ap.None,c=null),t[s]=[i,a,c],e[s]=o}return t}function rH(n){if(null==n)return Or;const e={};for(const t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Je(n){return Ts(()=>{const e=u1(n);return d1(e),e})}function u1(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Or,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:!0===n.signals,selectors:n.selectors||Tt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iH(n.inputs,e),outputs:rH(n.outputs),debugInfo:null}}function d1(n){n.features?.forEach(e=>e(n))}function jp(n,e){if(!n)return null;const t=e?rr:tH;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(nH)}function zt(n){let e=function h1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(or(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=lx(n.inputs),o.declaredInputs=lx(n.declaredInputs),o.outputs=lx(n.outputs);const a=r.hostBindings;a&&dH(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&lH(n,c),l&&uH(n,l),aH(n,r),M3(n.outputs,r.outputs),or(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===zt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function cH(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=zc(r.hostAttrs,t=zc(t,r.hostAttrs))}}(i)}function aH(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const i=e.inputs[t];void 0!==i&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function lx(n){return n===Or?{}:n===Tt?[]:n}function lH(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function uH(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function dH(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function $p(n){return!!dx(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function dx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function hs(n,e,t){return n[e]=t}function xn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function bn(n,e,t,i,r,s,o,a){const c=B(),l=je();return function Pd(n,e,t,i,r,s,o,a,c,l){const u=t+26,d=e.firstCreatePass?function xH(n,e,t,i,r,s,o,a,c){const l=e.consts,u=ol(e,n,4,o||null,a||null);ey()&&Y_(e,t,u,br(l,c),__),u.mergedAttrs=zc(u.mergedAttrs,u.attrs),cy(e,u);const d=u.tView=p_(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,e,n,i,r,s,o,a,c):e.data[u];Br(d,!1);const f=v1(e,n,d,t);Gu()&&Pp(e,n,f,d),Hi(f,n);const h=rA(f,n,f,d);return n[u]=h,m_(n,h),jf(d)&&Ip(e,n,d),null!=c&&y_(n,d,l),d}(c,l,n,e,t,i,r,br(l.consts,s),o,a),bn}let v1=function y1(n,e,t,i){return ss(!0),e[11].createComment("")};let px=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const R1=new ge("");let bx=(()=>{class n{static \u0275prov=Ne({token:n,providedIn:"root",factory:()=>new _5})}return n})();class _5{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){const i=this.queues.get(e.zone);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){const t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);const i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}function Od(n){return!!n&&"function"==typeof n.then}function P1(n){return!!n&&"function"==typeof n.subscribe}const Jp=new ge("");let N1=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=te(Jp,{optional:!0})??[];injector=te(Vn);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=Lr(this.injector,r);if(Od(s))t.push(s);else if(P1(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fl=new ge("");let lr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=te(pU);afterRenderManager=te(Hy);zonelessEnabled=te(Yu);rootEffectScheduler=te(bx);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Fi;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=te(Mo).hasPendingTasks.pipe(Ut(t=>!t));constructor(){te(Wc,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=te(Vi);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){const r=t instanceof AA;if(!this._injector.get(N1).done)throw new ne(405,"");let o;o=r?t:this._injector.get(Hp).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function x5(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ra),l=o.create(Vn.NULL,[],i||o.selector,a),u=l.location.nativeElement,d=l.injector.get(R1,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Qp(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){null!==this.tracingSnapshot?this.tracingSnapshot.run(zy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ne(101,!1);const t=ot(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ot(t),this.afterTick.next()}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(j_,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;)this.synchronizeOnce()}synchronizeOnce(){if(16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),7&this.dirtyFlags){const t=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)M5(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>zu(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Qp(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(fl,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Qp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function M5(n,e,t,i){(t||zu(n))&&Op(n,e,t&&!i?0:1)}function fs(n,e,t,i){const r=B();return xn(r,Mr(),e)&&(je(),ds(Wt(),r,n,e,t,i)),fs}function gl(n,e,t,i){return xn(n,Mr(),t)?e+nt(t)+i:it}function eg(n,e){return n<<17|e<<2}function La(n){return n>>17&32767}function Ex(n){return 2|n}function wl(n){return(131068&n)>>2}function Dx(n,e){return-131069&n|e<<2}function Tx(n){return 1|n}function Q1(n,e,t,i){const r=n[t+1],s=null===e;let o=i?La(r):wl(r),a=!1;for(;0!==o&&(!1===a||s);){const l=n[o+1];c8(n[o],e)&&(a=!0,n[o+1]=i?Tx(l):Ex(l)),o=i?La(l):wl(l)}a&&(n[t+1]=i?Ex(r):Tx(r))}function c8(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ku(n,e)>=0}const zn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function eI(n){return n.substring(zn.key,zn.keyEnd)}function tI(n,e){const t=zn.textEnd;return t===e?-1:(e=zn.keyEnd=function h8(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,zn.key=e,t),Sl(n,e,t))}function Sl(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Xe(n,e,t){const i=B();return xn(i,Mr(),e)&&Gi(je(),Wt(),i,n,e,i[11],t,!1),Xe}function Ax(n,e,t,i,r){M_(e,n,t,r?"class":"style",i)}function tg(n,e,t){return Gr(n,e,t,!1),tg}function si(n,e){return Gr(n,e,null,!0),si}function Ix(n){!function Wr(n,e,t,i){const r=je(),s=Os(2);r.firstUpdatePass&&aI(r,null,s,i);const o=B();if(t!==it&&xn(o,s,t)){const a=r.data[ri()];if(dI(a,i)&&!oI(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=_v(c,t||"")),Ax(r,a,o,t,i)}else!function M8(n,e,t,i,r,s,o,a){r===it&&(r=Tt);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const f=c<r.length?r[c+1]:void 0,h=l<s.length?s[l+1]:void 0;let v,p=null;u===d?(c+=2,l+=2,f!==h&&(p=d,v=h)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,v=h),null!==p&&lI(n,e,t,i,p,v,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function x8(n,e,t){if(null==t||""===t)return Tt;const i=[],r=So(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(b8,gs,n,!0)}function gs(n,e){for(let t=function u8(n){return function iI(n){zn.key=0,zn.keyEnd=0,zn.value=0,zn.valueEnd=0,zn.textEnd=n.length}(n),tI(n,Sl(n,0,zn.textEnd))}(e);t>=0;t=tI(e,t))nr(n,eI(e),!0)}function Gr(n,e,t,i){const r=B(),s=je(),o=Os(2);s.firstUpdatePass&&aI(s,n,o,i),e!==it&&xn(r,o,e)&&lI(s,s.data[ri()],r,r[11],n,r[o+1]=function w8(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=kn(So(n)))),n}(e,t),i,o)}function oI(n,e){return e>=n.expandoStartIndex}function aI(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[ri()],o=oI(n,t);dI(s,i)&&null===e&&!o&&(e=!1),e=function m8(n,e,t,i){const r=function ry(n){const e=Ke.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Fd(t=Rx(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Rx(r,n,e,t,i),null===s){let c=function v8(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==wl(i))return n[La(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=Rx(null,n,e,c[1],i),c=Fd(c,e.attrs,i),function y8(n,e,t,i){n[La(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function _8(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Fd(i,n[s].hostAttrs,t);return Fd(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function o8(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=La(o),c=wl(o);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||ku(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const f=La(n[a+1]);n[i+1]=eg(f,a),0!==f&&(n[f+1]=Dx(n[f+1],i)),n[a+1]=function r8(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=eg(a,0),0!==a&&(n[a+1]=Dx(n[a+1],i)),a=i;else n[i+1]=eg(c,0),0===a?a=i:n[c+1]=Dx(n[c+1],i),c=i;l&&(n[i+1]=Ex(n[i+1])),Q1(n,u,i,!0),Q1(n,u,i,!1),function a8(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ku(s,e)>=0&&(t[i+1]=Tx(t[i+1]))}(e,u,n,i,s),o=eg(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function Rx(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Fd(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Fd(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),nr(n,o,!!t||e[++s]))}return void 0===n?null:n}function b8(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&nr(n,i,t)}function lI(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function s8(n){return!(1&~n)}(l)?uI(c,e,t,r,wl(l),o):void 0;ng(u)||(ng(s)||function i8(n){return!(2&~n)}(l)&&(s=uI(c,null,t,r,a,o)),function YB(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Co.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Co.Important),n.setStyle(t,i,r,s))}}(i,o,Uc(ri(),t),r,s))}function uI(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let f=t[r+1];f===it&&(f=d?Tt:void 0);let h=d?Pv(f,i):u===i?f:void 0;if(l&&!ng(h)&&(h=Pv(c,i)),ng(h)&&(a=h,o))return a;const p=n[r+1];r=o?La(p):wl(p)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Pv(c,i))}return a}function ng(n){return void 0!==n}function dI(n,e){return!!(n.flags&(e?8:16))}function N(n,e,t,i){const r=B(),s=je(),o=26+n,a=r[11],c=s.firstCreatePass?FA(o,s,r,e,__,ey(),t,i):s.data[o],l=gI(s,r,c,a,e,n);r[o]=l;const u=jf(c);return Br(c,!0),NT(a,l,c),!Eo(c)&&Gu()&&Pp(s,r,l,c),(0===function _6(){return Ke.lFrame.elementDepthCount}()||u)&&Hi(l,r),function x6(){Ke.lFrame.elementDepthCount++}(),u&&(Ip(s,r,c),i_(s,c,r)),null!==i&&y_(r,c),N}function F(){let n=gt();ty()?function ny(){Ke.lFrame.isParent=!1}():(n=n.parent,Br(n,!1));const e=n;(function M6(n){return Ke.skipHydrationRootTNode===n})(e)&&function E6(){Ke.skipHydrationRootTNode=null}(),function b6(){Ke.lFrame.elementDepthCount--}();const t=je();return t.firstCreatePass&&kA(t,e),null!=e.classesWithoutHost&&function B6(n){return!!(8&n.flags)}(e)&&Ax(t,e,B(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function V6(n){return!!(16&n.flags)}(e)&&Ax(t,e,B(),e.stylesWithoutHost,!1),F}function bt(n,e,t,i){return N(n,e,t,i),F(),bt}let gI=(n,e,t,i,r,s)=>(ss(!0),Dp(i,r,function _E(){return Ke.lFrame.currentNamespace}()));function kd(){return B()}const rg="en-US";let MI=rg;function VI(n,e,t){return function i(r){if(r===Function)return t;vd(kr(n)?_i(n.index,e):e,5);const o=e[8];let a=zI(e,o,t,r),c=i.__ngNextListenerFn__;for(;c;)a=zI(e,o,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function zI(n,e,t,i){const r=ot(null);try{return!1!==t(i)}catch(s){return function zG(n,e){const t=n[9],i=t?t.get(Vr,null):null;i&&i.handleError(e)}(n,s),!1}finally{ot(r)}}function HI(n,e,t,i,r,s){const a=e[1],u=e[t][a.data[t].outputs[i]],d=a.firstCreatePass?Kv(a):null,f=Zv(e),h=u.subscribe(s),p=f.length;f.push(s,h),d&&d.push(r,n.index,p,-(p+1))}function yt(n,e,t,i){const r=B(),s=je(),o=gt();return Bx(s,r,r[11],o,n,e,i),yt}function Bx(n,e,t,i,r,s,o){const a=jf(i),l=n.firstCreatePass?Kv(n):null,u=Zv(e);let d=!0;if(3&i.type||o){const f=yi(i,e),h=o?o(f):f,p=u.length,v=o?g=>o(St(g[i.index])):i.index;let m=null;if(!o&&a&&(m=function HG(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=s,m.__ngLastListenerFn__=s,d=!1;else{s=VI(i,e,s);const g=t.listen(h,r,s);u.push(s,g),l&&l.push(r,v,p,p+1)}}else s=VI(i,e,s);if(d){const f=i.outputs?.[r],h=i.hostDirectiveOutputs?.[r];if(h&&h.length)for(let p=0;p<h.length;p+=2)HI(i,e,h[p],h[p+1],r,s);if(f&&f.length)for(const p of f)HI(i,e,p,r,r,s)}}function ln(n=1){return function R6(n){return(Ke.lFrame.contextLView=function aE(n,e){for(;n>0;)e=e[14],n--;return e}(n,Ke.lFrame.contextLView))[8]}(n)}function Vx(n,e,t){return zx(n,"",e,"",t),Vx}function zx(n,e,t,i,r){const s=B(),o=gl(s,e,t,i);return o!==it&&Gi(je(),Wt(),s,n,o,s[11],r,!1),zx}function Hx(n,e,t){XA(n,e,t)}function cg(n){const e=B(),t=je(),i=sy();Zf(i+1);const r=rx(t,i);if(n.dirty&&function m6(n){return!(4&~n[2])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)n.reset([]);else{const s=KA(e,i);n.reset(s,JE),n.notifyOnChanges()}return!0}return!1}function lg(){return function ix(n,e){return n[18].queries[e].queryList}(B(),sy())}function tR(n){return function _a(n,e){return n[e]}(function lE(){return Ke.lFrame.contextLView}(),26+n)}function H(n,e=""){const t=B(),i=je(),r=n+26,s=i.firstCreatePass?ol(i,r,1,e,null):i.data[r],o=dR(i,t,s,e,n);t[r]=o,Gu()&&Pp(i,t,o,s),Br(s,!1)}let dR=(n,e,t,i,r)=>(ss(!0),function h_(n,e){return n.createText(e)}(e[11],i));function Hn(n){return Gn("",n,""),Hn}function Gn(n,e,t){const i=B(),r=gl(i,n,e,t);return r!==it&&function Hs(n,e,t){const i=Uc(e,n);!function AT(n,e,t){n.setValue(e,t)}(n[11],i,t)}(i,ri(),r),Gn}function Gd(n,e,t){eD(e)&&(e=e());const i=B();return xn(i,Mr(),e)&&Gi(je(),Wt(),i,n,e,i[11],t,!1),Gd}function ug(n,e){const t=eD(n);return t&&n.set(e),t}function Wd(n,e){const t=B(),i=je(),r=gt();return Bx(i,t,t[11],r,n,e),Wd}function Wx(n,e,t,i,r){if(n=Ze(n),Array.isArray(n))for(let s=0;s<n.length;s++)Wx(n[s],e,t,i,r);else{const s=je(),o=B(),a=gt();let c=fa(n)?n:Ze(n.provide);const l=jC(n),u=1048575&a.providerIndexes,d=a.directiveStart,f=a.providerIndexes>>20;if(fa(n)||!n.multi){const h=new Wu(l,r,le),p=$x(c,e,r?u:u+f,d);-1===p?(gy(ep(a,o),s,c),jx(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(h),o.push(h)):(t[p]=h,o[p]=h)}else{const h=$x(c,e,u+f,d),p=$x(c,e,u,u+f),m=p>=0&&t[p];if(r&&!m||!r&&!(h>=0&&t[h])){gy(ep(a,o),s,c);const g=function fW(n,e,t,i,r){const s=new Wu(n,t,le);return s.multi=[],s.index=e,s.componentProviders=0,MR(s,r,i&&!t),s}(r?hW:dW,t.length,r,i,l);!r&&m&&(t[p].providerFactory=g),jx(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),o.push(g)}else jx(s,n,h>-1?h:p,MR(t[r?p:h],l,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function jx(n,e,t,i){const r=fa(e),s=function q3(n){return!!n.useClass}(e);if(r||s){const c=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function MR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function $x(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function dW(n,e,t,i){return qx(this.multi,[])}function hW(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=qu(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),qx(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],qx(r,s);return s}function qx(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function un(n,e=[]){return t=>{t.providersResolver=(i,r)=>function uW(n,e,t){const i=je();if(i.firstCreatePass){const r=or(n);Wx(t,i.data,i.blueprint,r,!0),Wx(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}function El(n,e,t){const i=xi()+n,r=B();return r[i]===it?hs(r,i,t?e.call(t):e()):function Rd(n,e){return n[e]}(r,i)}function SR(n,e,t,i){return function CR(n,e,t,i,r,s){const o=e+t;return xn(n,o,r)?hs(n,o+1,s?i.call(s,r):i(r)):function jd(n,e){const t=n[e];return t===it?void 0:t}(n,o+1)}(B(),xi(),n,e,t,i)}function IR(n,e){return Lp(n,e)}class rj{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let XR=(()=>{class n{compileModuleSync(t){return new cx(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=us(ir(t).declarations).reduce((o,a)=>{const c=vt(a);return c&&o.push(new Ad(c)),o},[]);return new rj(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aj=(()=>{class n{zone=te(Pt);changeDetectionScheduler=te(Fs);applicationRef=te(lr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jx({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Pt({...Qx(),scheduleInRootZone:t}),[{provide:Pt,useFactory:n},{provide:xr,multi:!0,useFactory:()=>{const i=te(aj,{optional:!0});return()=>i.initialize()}},{provide:xr,multi:!0,useFactory:()=>{const i=te(lj);return()=>{i.initialize()}}},!0===e?{provide:WE,useValue:!0}:[],{provide:yy,useValue:t??HE}]}function Qx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let lj=(()=>{class n{subscription=new mi;initialized=!1;zone=te(Pt);pendingTasks=te(Mo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xd=(()=>{class n{appRef=te(lr);taskService=te(Mo);ngZone=te(Pt);zonelessEnabled=te(Yu);tracing=te(Wc,{optional:!0});disableScheduling=te(WE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(rp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(yy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof My||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;let i=!1;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,i=!0;break;case 12:this.appRef.dirtyFlags|=16,i=!0;break;case 11:i=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;const r=this.useMicrotaskScheduler?$E:jE;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(rp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,$E(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ro=new ge("",{providedIn:"root",factory:()=>te(Ro,mt.Optional|mt.SkipSelf)||function uj(){return typeof $localize<"u"&&$localize.locale||rg}()}),gg=new ge(""),mj=new ge("");function Yd(n){return!n.moduleRef}let Po=null;let Zd=(()=>class n{static __NG_ELEMENT_ID__=Mj})();function Mj(n){return function wj(n,e,t){if(kr(n)&&!t){const i=_i(n.index,e);return new _d(i,i)}return 175&n.type?new _d(e[15],e):null}(gt(),B(),!(16&~n))}class cP{constructor(){}supports(e){return $p(e)}create(e){return new Tj(e)}}const Dj=(n,e)=>e;class Tj{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Dj}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<uP(i,r,s)?t:i,a=uP(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let f=0;f<l;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<l&&(s[f]=h+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!$p(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function yH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Aj(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new lP),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lP),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Aj{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}}class Ij{_head=null;_tail=null;add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class lP{map=new Map;put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Ij,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uP(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class dP{constructor(){}supports(e){return e instanceof Map||dx(e)}create(){return new Rj}}class Rj{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||dx(e)))throw new ne(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new Pj(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Pj{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}}function hP(){return new sb([new cP])}let sb=(()=>{class n{factories;static \u0275prov=Ne({token:n,providedIn:"root",factory:hP});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||hP()),deps:[[n,new Rv,new Iv]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ne(901,!1)}}return n})();function fP(){return new yg([new dP])}let yg=(()=>{class n{static \u0275prov=Ne({token:n,providedIn:"root",factory:fP});factories;constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||fP()),deps:[[n,new Rv,new Iv]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ne(901,!1)}}return n})();function Lj(n){try{const{rootComponent:e,appProviders:t,platformProviders:i}=n,r=function bj(n=[]){if(Po)return Po;const e=function nP(n=[],e){return Vn.create({name:e,providers:[{provide:kv,useValue:"platform"},{provide:gg,useValue:new Set([()=>Po=null])},...n]})}(n);return Po=e,function O1(){!function e3(n){uC=n}(()=>{throw new ne(600,!1)})}(),function iP(n){const e=n.get(Ay,null);Lr(n,()=>{e?.forEach(t=>t())})}(e),e}(i),s=[Jx({}),{provide:Fs,useExisting:Xd},...t||[]];return function QR(n){const e=Yd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Pt);return t.run(()=>{Yd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const i=e.get(Vr,null);let r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),Yd(n)){const s=()=>e.destroy(),o=n.platformInjector.get(gg);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(gg);o.add(s),n.moduleRef.onDestroy(()=>{Qp(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return function yj(n,e,t){try{const i=t();return Od(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(i,t,()=>{const s=e.get(N1);return s.runInitializers(),s.donePromise.then(()=>{if(function iG(n){"string"==typeof n&&(MI=n.toLowerCase().replace(/_/g,"-"))}(e.get(Ro,rg)||rg),!e.get(mj,!0))return Yd(n)?e.get(lr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Yd(n)){const c=e.get(lr);return void 0!==n.rootComponent&&c.bootstrap(n.rootComponent),c}return function vj(n,e){const t=n.injector.get(lr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new ne(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({r3Injector:new l1({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}function Tl(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Pn(n){return function o3(n){const e=ot(null);try{return n()}finally{ot(e)}}(n)}function Gs(n,e){return function Kk(n,e){const t=Object.create(Jk);t.computation=n,void 0!==e&&(t.equal=e);const i=()=>{if(Pu(t),Ru(t),t.value===fo)throw t.error;return t.value};return i[ti]=t,i}(n,e?.equal)}const Cr=new ge("");let NP=null;function No(){return NP}class C7{}let lb=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>te(D7),providedIn:"platform"})}return n})();const E7=new ge("");let D7=(()=>{class n extends lb{_location;_history;_doc=te(Cr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return No().getBaseHref(this._doc)}onPopState(t){const i=No().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=No().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ub(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function OP(n){const e=n.search(/#|\?|$/);return"/"===n[e-1]?n.slice(0,e-1)+n.slice(e):n}function Ws(n){return n&&"?"!==n[0]?`?${n}`:n}let Ua=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>te(FP),providedIn:"root"})}return n})();const LP=new ge("");let FP=(()=>{class n extends Ua{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??te(Cr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ub(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ws(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ws(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ws(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(qe(lb),qe(LP,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jd=(()=>{class n{_subject=new Fi;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function I7(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(OP(kP(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ws(i))}normalize(t){return n.stripTrailingSlash(function A7(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,kP(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ws(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ws(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Ws;static joinWithSlash=ub;static stripTrailingSlash=OP;static \u0275fac=function(i){return new(i||n)(qe(Ua))};static \u0275prov=Ne({token:n,factory:()=>function T7(){return new Jd(qe(Ua))}(),providedIn:"root"})}return n})();function kP(n){return n.replace(/\/index.html$/,"")}function BP(n){return"server"===n}const db=new ge("");let VP=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,s){return this._findPluginFor(i).addEventListener(t,i,r,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(qe(db),qe(Pt))};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();class zP{_doc;constructor(e){this._doc=e}manager}const wg="ng-app-id";function HP(n){for(const e of n)e.remove()}function GP(n,e){const t=e.createElement("style");return t.textContent=n,t}function hb(n,e){const t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}let WP=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=BP(s),function O7(n,e,t,i){const r=n.head?.querySelectorAll(`style[${wg}="${e}"],link[${wg}="${e}"]`);if(r)for(const s of r)s.removeAttribute(wg),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(const r of t)this.addUsage(r,this.inline,GP);i?.forEach(r=>this.addUsage(r,this.external,hb))}removeStyles(t,i){for(const r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){const s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){const r=i.get(t);r&&(r.usage--,r.usage<=0&&(HP(r.elements),i.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])HP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[i,{elements:r}]of this.inline)r.push(this.addElement(t,GP(i,this.doc)));for(const[i,{elements:r}]of this.external)r.push(this.addElement(t,hb(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(wg,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(qe(Cr),qe(wa),qe(yD,8),qe(Iy))};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();const fb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pb=/%COMP%/g,V7=new ge("",{providedIn:"root",factory:()=>!0});function $P(n,e){return e.map(t=>t.replace(pb,n))}let qP=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,s,o,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=BP(a),this.defaultRenderer=new gb(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===wr.ShadowDom&&(i={...i,encapsulation:wr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof YP?r.applyToHost(t):r instanceof mb&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(i.encapsulation){case wr.Emulated:s=new YP(c,l,i,this.appId,u,o,a,d,f);break;case wr.ShadowDom:return new W7(c,l,t,i,o,a,this.nonce,d,f);default:s=new mb(c,l,i,u,o,a,d,f)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(qe(VP),qe(WP),qe(wa),qe(V7),qe(Cr),qe(Iy),qe(Pt),qe(yD),qe(Wc,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();class gb{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(fb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(XP(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(XP(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ne(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=fb[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=fb[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Co.DashCase|Co.Important)?e.style.setProperty(t,i,r&Co.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Co.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if("string"==typeof e&&!(e=No().getGlobalEventTarget(this.doc,e)))throw new ne(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,r)}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function XP(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class W7 extends gb{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,s,o,a,c,l){super(e,s,o,c,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=$P(r.id,u);for(const f of u){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}const d=r.getExternalStyles?.();if(d)for(const f of d){const h=hb(f,s);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mb extends gb{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=l?$P(l,u):u,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class YP extends mb{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,c,l){const u=r+"-"+i.id;super(e,t,i,s,o,a,c,l,u),this.contentAttr=function z7(n){return"_ngcontent-%COMP%".replace(pb,n)}(u),this.hostAttr=function H7(n){return"_nghost-%COMP%".replace(pb,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class j7 extends C7{supportsDOMEvents=!0}class vb extends j7{static makeCurrent(){!function S7(n){NP??=n}(new vb)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $7(){return Qd=Qd||document.querySelector("base"),Qd?Qd.getAttribute("href"):null}();return null==t?null:function q7(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Qd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function R7(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Qd=null,Y7=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();const ZP=["alt","control","meta","shift"],K7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},J7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function KP(n){return{appProviders:[...o$,...n?.providers??[]],platformProviders:r$}}const r$=[{provide:Iy,useValue:"browser"},{provide:Ay,useValue:function t$(){vb.makeCurrent()},multi:!0},{provide:Cr,useFactory:function i$(){return function zU(n){Ty=n}(document),document}}],o$=[{provide:kv,useValue:"root"},{provide:Vr,useFactory:function n$(){return new Vr}},{provide:db,useClass:(()=>{class n extends zP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,s){return t.addEventListener(i,r,s),()=>this.removeEventListener(t,i,r,s)}removeEventListener(t,i,r,s){return t.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(qe(Cr))};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})(),multi:!0,deps:[Cr]},{provide:db,useClass:(()=>{class n extends zP{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r,s){const o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>No().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),ZP.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=K7[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ZP.forEach(o=>{o!==r&&(0,J7[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(i){return new(i||n)(qe(Cr))};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})(),multi:!0,deps:[Cr]},qP,WP,VP,{provide:j_,useExisting:qP},{provide:class N7{},useClass:Y7},[]];let a$=(()=>{class n{static \u0275prov=Ne({token:n,providedIn:"root",factory:()=>new c$(te(Cr),window)})}return n})();class c${document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function l$(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}}let k$=(()=>{class n extends Ua{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=ub(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ws(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ws(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(qe(lb),qe(LP,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();const Ib=/\s+/,m2=[];let Ug=(()=>{class n{_ngEl;_renderer;initialClasses=m2;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=null!=t?t.trim().split(Ib):m2}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ib):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(Ib).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(le(ar),le(zs))};static \u0275dir=Je({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();class M9{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oo=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new M9(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),y2(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{y2(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(le(Hr),le(Vs),le(sb))};static \u0275dir=Je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function y2(n,e){n.context.$implicit=e.item}let rh=(()=>{class n{_viewContainer;_context=new w9;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_2(t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_2(t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(le(Hr),le(Vs))};static \u0275dir=Je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})();class w9{$implicit=null;ngIf=null}function _2(n,e){if(n&&!n.createEmbeddedView)throw new ne(2020,!1)}let Bg=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Co.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)(le(ar),le(yg),le(zs))};static \u0275dir=Je({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),Tr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pa({type:n});static \u0275inj=go({})}return n})();function Lo(n){return this instanceof Lo?(this.v=n,this):new Lo(n)}function C2(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Ub(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const E2=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function D2(n){return rn(n?.then)}function T2(n){return rn(n[vv])}function A2(n){return Symbol.asyncIterator&&rn(n?.[Symbol.asyncIterator])}function I2(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const R2=function Mq(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function P2(n){return rn(n?.[R2])}function N2(n){return function S2(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(h){return function(p){return Promise.resolve(p).then(h,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,p){i[h]&&(r[h]=function(v){return new Promise(function(m,g){s.push([h,v,m,g])>1||c(h,v)})},p&&(r[h]=p(r[h])))}function c(h,p){try{!function l(h){h.value instanceof Lo?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}(i[h](p))}catch(v){f(s[0][3],v)}}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Lo(t.read());if(r)return yield Lo(void 0);yield yield Lo(i)}}finally{t.releaseLock()}})}function O2(n){return rn(n?.getReader)}function ms(n){if(n instanceof qn)return n;if(null!=n){if(T2(n))return function wq(n){return new qn(e=>{const t=n[vv]();if(rn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(E2(n))return function Sq(n){return new qn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(D2(n))return function Cq(n){return new qn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,vC)})}(n);if(A2(n))return L2(n);if(P2(n))return function Eq(n){return new qn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(O2(n))return function Dq(n){return L2(N2(n))}(n)}throw I2(n)}function L2(n){return new qn(e=>{(function Tq(n,e){var t,i,r,s;return function M2(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=C2(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function $s(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function F2(n,e=0){return ni((t,i)=>{t.subscribe(Fn(i,r=>$s(i,n,()=>i.next(r),e),()=>$s(i,n,()=>i.complete(),e),r=>$s(i,n,()=>i.error(r),e)))})}function k2(n,e=0){return ni((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function U2(n,e){if(!n)throw new Error("Iterable cannot be null");return new qn(t=>{$s(t,e,()=>{const i=n[Symbol.asyncIterator]();$s(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Jn(n,e){return e?function Oq(n,e){if(null!=n){if(T2(n))return function Aq(n,e){return ms(n).pipe(k2(e),F2(e))}(n,e);if(E2(n))return function Rq(n,e){return new qn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(D2(n))return function Iq(n,e){return ms(n).pipe(k2(e),F2(e))}(n,e);if(A2(n))return U2(n,e);if(P2(n))return function Pq(n,e){return new qn(t=>{let i;return $s(t,e,()=>{i=n[R2](),$s(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>rn(i?.return)&&i.return()})}(n,e);if(O2(n))return function Nq(n,e){return U2(N2(n),e)}(n,e)}throw I2(n)}(n,e):ms(n)}function Vb(n){return n[n.length-1]}function B2(n){return rn(Vb(n))?n.pop():void 0}function Vg(n){return function Lq(n){return n&&rn(n.schedule)}(Vb(n))?n.pop():void 0}function et(...n){return Jn(n,Vg(n))}const{isArray:Fq}=Array,{getPrototypeOf:kq,prototype:Uq,keys:Bq}=Object;function V2(n){if(1===n.length){const e=n[0];if(Fq(e))return{args:e,keys:null};if(function Vq(n){return n&&"object"==typeof n&&kq(n)===Uq}(e)){const t=Bq(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:zq}=Array;function z2(n){return Ut(e=>function Hq(n,e){return zq(e)?n(...e):n(e)}(n,e))}function H2(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function zb(...n){const e=Vg(n),t=B2(n),{args:i,keys:r}=V2(n);if(0===i.length)return Jn([],e);const s=new qn(function Gq(n,e,t=ca){return i=>{G2(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)G2(e,()=>{const l=Jn(n[c],e);let u=!1;l.subscribe(Fn(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>H2(r,o):ca));return t?s.pipe(z2(t)):s}function G2(n,e,t){n?$s(t,n,e):e()}const zg=cv(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function li(n,e,t=1/0){return rn(e)?li((i,r)=>Ut((s,o)=>e(i,s,r,o))(ms(n(i,r))),t):("number"==typeof e&&(t=e),ni((i,r)=>function Wq(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,d=!1;const f=()=>{d&&!c.length&&!l&&e.complete()},h=v=>l<i?p(v):c.push(v),p=v=>{s&&e.next(v),l++;let m=!1;ms(t(v,u++)).subscribe(Fn(e,g=>{r?.(g),s?h(g):e.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){const g=c.shift();o?$s(e,o,()=>p(g)):p(g)}f()}catch(g){e.error(g)}}))};return n.subscribe(Fn(e,h,()=>{d=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function sh(n=1/0){return li(ca,n)}function Hb(...n){return function jq(){return sh(1)}()(Jn(n,Vg(n)))}function W2(n){return new qn(e=>{ms(n()).subscribe(e)})}function Hg(n,e){const t=rn(n)?n:()=>n,i=r=>r.error(t());return new qn(e?r=>e.schedule(i,0,r):i)}const qr=new qn(n=>n.complete());function Gb(){return ni((n,e)=>{let t=null;n._refCount++;const i=Fn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class j2 extends qn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,bC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mi;const t=this.getSubject();e.add(this.source.subscribe(Fn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mi.EMPTY)}return e}refCount(){return Gb()(this)}}function vs(n,e){return ni((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Fn(i,c=>{r?.unsubscribe();let l=0;const u=s++;ms(n(c,u)).subscribe(r=Fn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Il(n){return n<=0?()=>qr:ni((e,t)=>{let i=0;e.subscribe(Fn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Fo(n,e){return ni((t,i)=>{let r=0;t.subscribe(Fn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Gg(n){return ni((e,t)=>{let i=!1;e.subscribe(Fn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function $2(n=Xq){return ni((e,t)=>{let i=!1;e.subscribe(Fn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Xq(){return new zg}function Ba(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Fo((r,s)=>n(r,s,i)):ca,Il(1),t?Gg(e):$2(()=>new zg))}function oh(n,e){return rn(e)?li(n,e,1):li(n,1)}function Ci(n,e,t){const i=rn(n)||e||t?{next:n,error:e,complete:t}:n;return i?ni((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Fn(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):ca}function Rl(n){return ni((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Fn(t,void 0,void 0,o=>{s=ms(n(o,Rl(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Wb(n){return n<=0?()=>qr:ni((e,t)=>{let i=[];e.subscribe(Fn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function jb(n){return ni((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}let Qq=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(qe(Cr))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ut="primary",ch=Symbol("RouteTitle");class iX{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Pl(n){return new iX(n)}function rX(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(":"===o[0])r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ys(n,e){const t=n?$b(n):void 0,i=e?$b(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Y2(n[r],e[r]))return!1;return!0}function $b(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Y2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Z2(n){return n.length>0?n[n.length-1]:null}function Uo(n){return function Y9(n){return!!n&&(n instanceof qn||rn(n.lift)&&rn(n.subscribe))}(n)?n:Od(n)?Jn(Promise.resolve(n)):et(n)}const oX={exact:function Q2(n,e,t){if(!za(n.segments,e.segments)||!Wg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Q2(n.children[i],e.children[i],t))return!1;return!0},subset:eN},K2={exact:function aX(n,e){return ys(n,e)},subset:function cX(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Y2(n[t],e[t]))},ignored:()=>!0};function J2(n,e,t){return oX[t.paths](n.root,e.root,t.matrixParams)&&K2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function eN(n,e,t){return tN(n,e,e.segments,t)}function tN(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!za(r,t)||e.hasChildren()||!Wg(r,t,i))}if(n.segments.length===t.length){if(!za(n.segments,t)||!Wg(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!eN(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(za(n.segments,r)&&Wg(n.segments,r,i)&&n.children[ut])&&tN(n.children[ut],e,s,i)}}function Wg(n,e,t){return e.every((i,r)=>K2[t](n[r].parameters,i.parameters))}class Va{root;queryParams;fragment;_queryParamMap;constructor(e=new $t([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Pl(this.queryParams),this._queryParamMap}toString(){return dX.serialize(this)}}class $t{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $g(this)}}class lh{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Pl(this.parameters),this._parameterMap}toString(){return rN(this)}}function za(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let uh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>new jg,providedIn:"root"})}return n})();class jg{parse(e){const t=new MX(e);return new Va(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${dh(e.root,!0)}`,i=function pX(n){const e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${qg(t)}=${qg(r)}`).join("&"):`${qg(t)}=${qg(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function hX(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dX=new jg;function $g(n){return n.segments.map(e=>rN(e)).join("/")}function dh(n,e){if(!n.hasChildren())return $g(n);if(e){const t=n.children[ut]?dh(n.children[ut],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ut&&i.push(`${r}:${dh(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function uX(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ut&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ut&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===ut?[dh(n.children[ut],!1)]:[`${r}:${dh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ut]?`${$g(n)}/${t[0]}`:`${$g(n)}/(${t.join("//")})`}}function nN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qg(n){return nN(n).replace(/%3B/gi,";")}function qb(n){return nN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xg(n){return decodeURIComponent(n)}function iN(n){return Xg(n.replace(/\+/g,"%20"))}function rN(n){return`${qb(n.path)}${function fX(n){return Object.entries(n).map(([e,t])=>`;${qb(e)}=${qb(t)}`).join("")}(n.parameters)}`}const gX=/^[^\/()?;#]+/;function Xb(n){const e=n.match(gX);return e?e[0]:""}const mX=/^[^\/()?;=#]+/,yX=/^[^=?&#]+/,xX=/^[^&#]+/;class MX{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ut]=new $t(e,t)),i}parseSegment(){const e=Xb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new lh(Xg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function vX(n){const e=n.match(mX);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Xb(this.remaining);r&&(i=r,this.capture(i))}e[Xg(t)]=Xg(i)}parseQueryParam(e){const t=function _X(n){const e=n.match(yX);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function bX(n){const e=n.match(xX);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=iN(t),s=iN(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Xb(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ne(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ut);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ut]:new $t([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}}function sN(n){return n.segments.length>0?new $t([],{[ut]:n}):n}function oN(n){const e={};for(const[i,r]of Object.entries(n.children)){const s=oN(r);if(i===ut&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function wX(n){if(1===n.numberOfChildren&&n.children[ut]){const e=n.children[ut];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Ha(n){return n instanceof Va}function aN(n){let e;const r=sN(function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new $t(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function cN(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return Yb(r,r,r,t,i);const s=function CX(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uN(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new uN(t,e,i)}(e);if(s.toRoot())return Yb(r,r,new $t([],{}),t,i);const o=function EX(n,e,t){if(n.isAbsolute)return new Zg(e,!0,0);if(!t)return new Zg(e,!1,NaN);if(null===t.parent)return new Zg(t,!0,0);const i=Yg(n.commands[0])?0:1;return function DX(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ne(4005,!1);r=i.segments.length}return new Zg(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?fh(o.segmentGroup,o.index,s.commands):dN(o.segmentGroup,o.index,s.commands);return Yb(r,o.segmentGroup,a,t,i)}function Yg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hh(n){return"object"==typeof n&&null!=n&&n.outlets}function Yb(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:lN(n,e,t);const a=sN(oN(o));return new Va(a,s,r)}function lN(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:lN(s,e,t)}),new $t(n.segments,i)}class uN{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Yg(i[0]))throw new ne(4003,!1);const r=i.find(hh);if(r&&r!==Z2(i))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zg{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function dN(n,e,t){if(n??=new $t([],{}),0===n.segments.length&&n.hasChildren())return fh(n,e,t);const i=function AX(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(hh(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!fN(c,l,o))return s;i+=2}else{if(!fN(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new $t(n.segments.slice(0,i.pathIndex),{});return s.children[ut]=new $t(n.segments.slice(i.pathIndex),n.children),fh(s,0,r)}return i.match&&0===r.length?new $t(n.segments,{}):i.match&&!n.hasChildren()?Zb(n,e,t):i.match?fh(n,0,r):Zb(n,e,t)}function fh(n,e,t){if(0===t.length)return new $t(n.segments,{});{const i=function TX(n){return hh(n[0])?n[0].outlets:{[ut]:n}}(t),r={};if(Object.keys(i).some(s=>s!==ut)&&n.children[ut]&&1===n.numberOfChildren&&0===n.children[ut].segments.length){const s=fh(n.children[ut],e,t);return new $t(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=dN(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new $t(n.segments,r)}}function Zb(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(hh(s)){const c=IX(s.outlets);return new $t(i,c)}if(0===r&&Yg(t[0])){i.push(new lh(n.segments[e].path,hN(t[0]))),r++;continue}const o=hh(s)?s.outlets[ut]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Yg(a)?(i.push(new lh(o,hN(a))),r+=2):(i.push(new lh(o,{})),r++)}return new $t(i,{})}function IX(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=Zb(new $t([],{}),0,i))}),e}function hN(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function fN(n,e,t){return n==t.path&&ys(e,t.parameters)}const Kg="imperative";var Mt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Mt||{});class _s{id;url;constructor(e,t){this.id=e,this.url=t}}class Jg extends _s{type=Mt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qs extends _s{urlAfterRedirects;type=Mt.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var dr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(dr||{}),Qg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Qg||{});class Ga extends _s{reason;code;type=Mt.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nl extends _s{reason;code;type=Mt.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}}class Kb extends _s{error;target;type=Mt.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pN extends _s{urlAfterRedirects;state;type=Mt.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RX extends _s{urlAfterRedirects;state;type=Mt.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PX extends _s{urlAfterRedirects;state;shouldActivate;type=Mt.GuardsCheckEnd;constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class NX extends _s{urlAfterRedirects;state;type=Mt.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OX extends _s{urlAfterRedirects;state;type=Mt.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LX{route;type=Mt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FX{route;type=Mt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kX{snapshot;type=Mt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UX{snapshot;type=Mt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BX{snapshot;type=Mt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VX{snapshot;type=Mt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gN{routerEvent;position;anchor;type=Mt.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Jb{}class em{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function Xr(n){return n.outlet||ut}function ph(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $X{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ph(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new gh(this.rootInjector)}}let gh=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new $X(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(qe(Vi))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mN{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Qb(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Qb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=eM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return eM(e,this._root).map(t=>t.value)}}function Qb(n,e){if(n===e.value)return e;for(const t of e.children){const i=Qb(n,t);if(i)return i}return null}function eM(n,e){if(n===e.value)return[e];for(const t of e.children){const i=eM(n,t);if(i.length)return i.unshift(e),i}return[]}class Yr{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ol(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vN extends mN{snapshot;constructor(e,t){super(e),this.snapshot=t,tM(this,e)}toString(){return this.snapshot.toString()}}function yN(n){const e=function qX(n){const s=new nm([],{},{},"",{},ut,n,null,{});return new _N("",new Yr(s,[]))}(n),t=new _r([new lh("",{})]),i=new _r({}),r=new _r({}),s=new _r({}),o=new _r(""),a=new Ll(t,i,s,o,r,ut,n,e.root);return a.snapshot=e.root,new vN(new Yr(a,[]),e)}class Ll{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ut(l=>l[ch]))??et(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ut(e=>Pl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ut(e=>Pl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tm(n,e,t="emptyOnly"){let i;const{routeConfig:r}=n;return i=null===e||"always"!==t&&""!==r?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...r?.data,...n._resolvedData}},r&&bN(r)&&(i.resolve[ch]=r.title),i}class nm{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ch]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pl(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _N extends mN{url;constructor(e,t){super(t),this.url=e,tM(this,t)}toString(){return xN(this._root)}}function tM(n,e){e.value._routerState=n,e.children.forEach(t=>tM(n,t))}function xN(n){const e=n.children.length>0?` { ${n.children.map(xN).join(", ")} } `:"";return`${n.value}${e}`}function nM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ys(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ys(e.params,t.params)||n.paramsSubject.next(t.params),function sX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ys(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ys(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function iM(n,e){const t=ys(n.params,e.params)&&function lX(n,e){return za(n,e)&&n.every((t,i)=>ys(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iM(n.parent,e.parent))}function bN(n){return"string"==typeof n.title||null===n.title}const XX=new ge("");let rM=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ut;activateEvents=new Rn;deactivateEvents=new Rn;attachEvents=new Rn;detachEvents=new Rn;routerOutletData=mU(void 0);parentContexts=te(gh);location=te(Hr);changeDetector=te(Zd);inputBinder=te(im,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new YX(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Je({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ur]})}return n})();class YX{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Ll?this.route:e===gh?this.childContexts:e===XX?this.outletData:this.parent.get(e,t)}}const im=new ge("");let MN=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=zb([i.queryParams,i.params,i.data]).pipe(vs(([s,o,a],c)=>(a={...s,...o,...a},0===c?et(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function w7(n){const e=vt(n);if(!e)return null;const t=new Ad(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();function mh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function KX(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return mh(n,i,r);return mh(n,i)})}(n,e,t);return new Yr(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>mh(n,a)),o}}const i=function JX(n){return new Ll(new _r(n.url),new _r(n.params),new _r(n.queryParams),new _r(n.fragment),new _r(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>mh(n,s));return new Yr(i,r)}}class sM{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const wN="ngNavigationCancelingError";function rm(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Ha(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=SN(!1,dr.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function SN(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[wN]=!0,t.cancellationCode=e,t}function CN(n){return!!n&&n[wN]}class tY{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),nM(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ol(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ol(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ol(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ol(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new VX(s.value.snapshot))}),e.children.length&&this.forwardEvent(new UX(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(nM(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),nM(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}}class EN{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sm{component;route;constructor(e,t){this.component=e,this.route=t}}function nY(n,e,t){const i=n._root;return vh(i,e?e._root:null,t,[i.value])}function Fl(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function D3(n){return null!==Tf(n)}(n)?e.get(n):n:i}function vh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ol(e);return n.children.forEach(o=>{(function rY(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function sY(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!za(n.url,e.url);case"pathParamsOrQueryParamsChange":return!za(n.url,e.url)||!ys(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iM(n,e)||!ys(n.queryParams,e.queryParams);default:return!iM(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new EN(i)):(s.data=o.data,s._resolvedData=o._resolvedData),vh(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new sm(a.outlet.component,o))}else o&&yh(e,a,r),r.canActivateChecks.push(new EN(i)),vh(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>yh(a,t.getContext(o),r)),r}function yh(n,e,t){const i=Ol(n),r=n.value;Object.entries(i).forEach(([s,o])=>{yh(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new sm(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function _h(n){return"function"==typeof n}function DN(n){return n instanceof zg||"EmptyError"===n?.name}const om=Symbol("INITIAL_VALUE");function kl(){return vs(n=>zb(n.map(e=>e.pipe(Il(1),function qq(...n){const e=Vg(n);return ni((t,i)=>{(e?Hb(n,t,e):Hb(n,t)).subscribe(i)})}(om)))).pipe(Ut(e=>{for(const t of e)if(!0!==t){if(t===om)return om;if(!1===t||hY(t))return t}return!0}),Fo(e=>e!==om),Il(1)))}function hY(n){return Ha(n)||n instanceof sM}function TN(n){return function m3(...n){return yC(n)}(Ci(e=>{if("boolean"!=typeof e)throw rm(0,e)}),Ut(e=>!0===e))}class oM{segmentGroup;constructor(e){this.segmentGroup=e||null}}class aM extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function Ul(n){return Hg(new oM(n))}class CY{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return et(i);if(r.numberOfChildren>1||!r.children[ut])return Hg(new ne(4e3,!1));r=r.children[ut]}}applyRedirectCommands(e,t,i,r,s){if("string"!=typeof t){const a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:v}=r,m=Lr(s,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:v}));if(m instanceof Va)throw new aM(m);t=m}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if("/"===t[0])throw new aM(o);return o}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Va(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new $t(s,o)}createSegments(e,t,i,r){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ne(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const cM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EY(n,e,t,i,r){const s=AN(n,e,t);return s.matched?(i=function zX(n,e){return n.providers&&!n._injector&&(n._injector=Wp(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function MY(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?et(r.map(o=>{const a=Fl(o,n);return Uo(function dY(n){return n&&_h(n.canMatch)}(a)?a.canMatch(e,t):Lr(n,()=>a(e,t)))})).pipe(kl(),TN()):et(!0)}(i,e,t).pipe(Ut(o=>!0===o?s:{...cM}))):et(s)}function AN(n,e,t){if("**"===e.path)return function DY(n){return{matched:!0,parameters:n.length>0?Z2(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||rX)(t,n,e);if(!r)return{...cM};const s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function IN(n,e,t,i){return t.length>0&&function IY(n,e,t){return t.some(i=>am(n,e,i)&&Xr(i)!==ut)}(n,t,i)?{segmentGroup:new $t(e,AY(i,new $t(t,n.children))),slicedSegments:[]}:0===t.length&&function RY(n,e,t){return t.some(i=>am(n,e,i))}(n,t,i)?{segmentGroup:new $t(n.segments,TY(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new $t(n.segments,n.children),slicedSegments:t}}function TY(n,e,t,i){const r={};for(const s of t)if(am(n,e,s)&&!i[Xr(s)]){const o=new $t([],{});r[Xr(s)]=o}return{...i,...r}}function AY(n,e){const t={};t[ut]=e;for(const i of n)if(""===i.path&&Xr(i)!==ut){const r=new $t([],{});t[Xr(i)]=r}return t}function am(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class NY{}class FY{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new CY(this.urlSerializer,this.urlTree)}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){const e=IN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ut(({children:t,rootSnapshot:i})=>{const r=new Yr(i,t),s=new _N("",r),o=function SX(n,e,t=null,i=null){return cN(aN(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new nm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ut,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ut,t).pipe(Ut(i=>({children:i,rootSnapshot:t})),Rl(i=>{if(i instanceof aM)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof oM?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(Ut(o=>o instanceof Yr?[o]:[]))}processChildren(e,t,i,r){const s=[];for(const o of Object.keys(i.children))"primary"===o?s.unshift(o):s.push(o);return Jn(s).pipe(oh(o=>{const a=i.children[o],c=function jX(n,e){const t=n.filter(i=>Xr(i)===e);return t.push(...n.filter(i=>Xr(i)!==e)),t}(t,o);return this.processSegmentGroup(e,c,a,o,r)}),function Zq(n,e){return ni(function Yq(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Fn(o,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}((o,a)=>(o.push(...a),o)),Gg(null),function Kq(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Fo((r,s)=>n(r,s,i)):ca,Wb(1),t?Gg(e):$2(()=>new zg))}(),li(o=>{if(null===o)return Ul(i);const a=RN(o);return function kY(n){n.sort((e,t)=>e.value.outlet===ut?-1:t.value.outlet===ut?1:e.value.outlet.localeCompare(t.value.outlet))}(a),et(a)}))}processSegment(e,t,i,r,s,o,a){return Jn(t).pipe(oh(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a).pipe(Rl(l=>{if(l instanceof oM)return et(null);throw l}))),Ba(c=>!!c),Rl(c=>{if(DN(c))return function PY(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?et(new NY):Ul(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,c){return Xr(i)===o||o!==ut&&am(r,s,i)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c):Ul(r):Ul(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){const{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=AN(t,r,s);if(!c)return Ul(t);"string"==typeof r.redirectTo&&"/"===r.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const h=new nm(s,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PN(r),Xr(r),r.component??r._loadedComponent??null,r,NN(r)),p=tm(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);const v=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(r,v).pipe(li(m=>this.processSegment(e,i,t,m.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){const a=EY(t,i,r,e);return"**"===i.path&&(t.children={}),a.pipe(vs(c=>c.matched?this.getChildConfig(e=i._injector??e,i,r).pipe(vs(({routes:l})=>{const u=i._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new nm(f,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PN(i),Xr(i),i.component??i._loadedComponent??null,i,NN(i)),v=tm(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);const{segmentGroup:m,slicedSegments:g}=IN(t,f,h,l);if(0===g.length&&m.hasChildren())return this.processChildren(u,l,m,p).pipe(Ut(_=>new Yr(p,_)));if(0===l.length&&0===g.length)return et(new Yr(p,[]));const y=Xr(i)===s;return this.processSegment(u,l,m,g,y?ut:s,!0,p).pipe(Ut(_=>new Yr(p,_ instanceof Yr?[_]:[])))})):Ul(t)))}getChildConfig(e,t,i){return t.children?et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?et({routes:t._loadedRoutes,injector:t._loadedInjector}):function bY(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?et(!0):et(r.map(o=>{const a=Fl(o,n);return Uo(function aY(n){return n&&_h(n.canLoad)}(a)?a.canLoad(e,t):Lr(n,()=>a(e,t)))})).pipe(kl(),TN())}(e,t,i).pipe(li(r=>r?this.configLoader.loadChildren(e,t).pipe(Ci(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function SY(){return Hg(SN(!1,dr.GuardRejected))}())):et({routes:[],injector:e})}}function UY(n){const e=n.value.routeConfig;return e&&""===e.path}function RN(n){const e=[],t=new Set;for(const i of n){if(!UY(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=RN(i.children);e.push(new Yr(i.value,r))}return e.filter(i=>!t.has(i))}function PN(n){return n.data||{}}function NN(n){return n.resolve||{}}function ON(n){const e=n.children.map(t=>ON(t)).flat();return[n,...e]}function lM(n){return vs(e=>{const t=n(e);return t?Jn(t).pipe(Ut(()=>e)):et(e)})}let LN=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ut);return i}getResolvedTitleForRoute(t){return t.data[ch]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>te(WY),providedIn:"root"})}return n})(),WY=(()=>{class n extends LN{title;constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(qe(Qq))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xh=new ge("",{providedIn:"root",factory:()=>({})});let FN=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){1&i&&bt(0,"router-outlet")},dependencies:[rM],encapsulation:2})}return n})();function uM(n){const e=n.children&&n.children.map(uM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ut&&(t.component=FN),t}const bh=new ge("");let dM=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=te(XR);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Uo(t.loadComponent()).pipe(Ut(kN),Ci(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),jb(()=>{this.componentLoaders.delete(t)})),r=new j2(i,()=>new Fi).pipe(Gb());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return et({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function jY(n,e,t,i){return Uo(n.loadChildren()).pipe(Ut(kN),li(r=>r instanceof c1||Array.isArray(r)?et(r):Jn(e.compileModuleAsync(r))),Ut(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(bh,[],{optional:!0,self:!0}).flat()),{routes:o.map(uM),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(jb(()=>{this.childrenLoaders.delete(i)})),o=new j2(s,()=>new Fi).pipe(Gb());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kN(n){return function $Y(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let hM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>te(qY),providedIn:"root"})}return n})(),qY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const UN=new ge(""),BN=new ge("");function XY(n,e,t){const i=n.get(BN),r=n.get(Cr);return n.get(Pt).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s;const o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),function YY(n){return new Promise(e=>{Gy({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:c}=i;return c&&Lr(n,()=>c({transition:a,from:e,to:t})),o})}const VN=new ge("");let fM=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Fi;transitionAbortSubject=new Fi;configLoader=te(dM);environmentInjector=te(Vi);destroyRef=te(Ls);urlSerializer=te(uh);rootContexts=te(gh);location=te(Jd);inputBindingEnabled=null!==te(im,{optional:!0});titleStrategy=te(LN);options=te(xh,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=te(hM);createViewTransition=te(UN,{optional:!0});navigationErrorHandler=te(VN,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>et(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=r=>this.events.next(new FX(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new LX(r)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...t,extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i})}setupNavigations(t){return this.transitions=new _r(null),this.transitions.pipe(Fo(i=>null!==i),vs(i=>{let r=!1,s=!1;return et(i).pipe(vs(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",dr.SupersededByNewNavigation),qr;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!a&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const l="";return this.events.next(new Nl(o.id,this.urlSerializer.serialize(o.rawUrl),l,Qg.IgnoredSameUrlNavigation)),o.resolve(!1),qr}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return et(o).pipe(vs(l=>(this.events.next(new Jg(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?qr:Promise.resolve(l))),function BY(n,e,t,i,r,s){return li(o=>function OY(n,e,t,i,r,s,o="emptyOnly"){return new FY(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(Ut(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ci(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects};const u=new pN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:l,extractedUrl:u,source:d,restoredState:f,extras:h}=o,p=new Jg(l,this.urlSerializer.serialize(u),d,f);this.events.next(p);const v=yN(this.rootComponentType).snapshot;return this.currentTransition=i={...o,targetSnapshot:v,urlAfterRedirects:u,extras:{...h,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=u,et(i)}{const l="";return this.events.next(new Nl(o.id,this.urlSerializer.serialize(o.extractedUrl),l,Qg.IgnoredByUrlHandlingStrategy)),o.resolve(!1),qr}}),Ci(o=>{const a=new RX(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ut(o=>(this.currentTransition=i={...o,guards:nY(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},i)),function fY(n,e){return li(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?et({...t,guardsResult:!0}):function pY(n,e,t,i){return Jn(n).pipe(li(r=>function xY(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?et(s.map(a=>{const c=ph(e)??r,l=Fl(a,c);return Uo(function uY(n){return n&&_h(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):Lr(c,()=>l(n,e,t,i))).pipe(Ba())})).pipe(kl()):et(!0)}(r.component,r.route,t,e,i)),Ba(r=>!0!==r,!0))}(o,i,r,n).pipe(li(a=>a&&function oY(n){return"boolean"==typeof n}(a)?function gY(n,e,t,i){return Jn(e).pipe(oh(r=>Hb(function vY(n,e){return null!==n&&e&&e(new kX(n)),et(!0)}(r.route.parent,i),function mY(n,e){return null!==n&&e&&e(new BX(n)),et(!0)}(r.route,i),function _Y(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function iY(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>W2(()=>et(o.guards.map(c=>{const l=ph(o.node)??t,u=Fl(c,l);return Uo(function lY(n){return n&&_h(n.canActivateChild)}(u)?u.canActivateChild(i,n):Lr(l,()=>u(i,n))).pipe(Ba())})).pipe(kl())));return et(s).pipe(kl())}(n,r.path,t),function yY(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return et(!0);const r=i.map(s=>W2(()=>{const o=ph(e)??t,a=Fl(s,o);return Uo(function cY(n){return n&&_h(n.canActivate)}(a)?a.canActivate(e,n):Lr(o,()=>a(e,n))).pipe(Ba())}));return et(r).pipe(kl())}(n,r.route,t))),Ba(r=>!0!==r,!0))}(i,s,n,e):et(a)),Ut(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Ci(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw rm(0,o.guardsResult);const a=new PX(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Fo(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",dr.GuardRejected),!1)),lM(o=>{if(0!==o.guards.canActivateChecks.length)return et(o).pipe(Ci(a=>{const c=new NX(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),vs(a=>{let c=!1;return et(a).pipe(function VY(n,e){return li(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return et(t);const s=new Set(r.map(c=>c.route)),o=new Set;for(const c of s)if(!o.has(c))for(const l of ON(c))o.add(l);let a=0;return Jn(o).pipe(oh(c=>s.has(c)?function zY(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!bN(r)&&(s[ch]=r.title),function HY(n,e,t,i){const r=$b(n);if(0===r.length)return et({});const s={};return Jn(r).pipe(li(o=>function GY(n,e,t,i){const r=ph(e)??i,s=Fl(n,r);return Uo(s.resolve?s.resolve(e,t):Lr(r,()=>s(e,t)))}(n[o],e,t,i).pipe(Ba(),Ci(a=>{if(a instanceof sM)throw rm(new jg,a);s[o]=a}))),Wb(1),Ut(()=>s),Rl(o=>DN(o)?qr:Hg(o)))}(s,n,e,i).pipe(Ut(o=>(n._resolvedData=o,n.data=tm(n,n.parent,t).resolve,null)))}(c,i,n,e):(c.data=tm(c,c.parent,n).resolve,et(void 0))),Ci(()=>a++),Wb(1),li(c=>a===o.size?et(t):qr))})}(this.paramsInheritanceStrategy,this.environmentInjector),Ci({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",dr.NoDataFromResolver)}}))}),Ci(a=>{const c=new OX(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),lM(o=>{const a=c=>{const l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Ci(u=>{c.component=u}),Ut(()=>{})));for(const u of c.children)l.push(...a(u));return l};return zb(a(o.targetSnapshot.root)).pipe(Gg(null),Il(1))}),lM(()=>this.afterPreactivation()),vs(()=>{const{currentSnapshot:o,targetSnapshot:a}=i,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?Jn(c).pipe(Ut(()=>i)):et(i)}),Ut(o=>{const a=function ZX(n,e,t){const i=mh(n,e._root,t?t._root:void 0);return new vN(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i={...o,targetRouterState:a},this.currentNavigation.targetRouterState=a,i}),Ci(()=>{this.events.next(new Jb)}),((n,e,t,i)=>Ut(r=>(new tY(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Il(1),Ci({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qs(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),function Jq(n){return ni((e,t)=>{ms(n).subscribe(Fn(t,()=>t.complete(),dv)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ci(o=>{throw o}))),jb(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",dr.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Rl(o=>{if(this.destroyed)return i.resolve(!1),qr;if(s=!0,CN(o))this.events.next(new Ga(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),function QX(n){return CN(n)&&Ha(n.url)}(o)?this.events.next(new em(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{const a=new Kb(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{const c=Lr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(!(c instanceof sM))throw this.events.next(a),o;{const{message:l,cancellationCode:u}=rm(0,c);this.events.next(new Ga(i.id,this.urlSerializer.serialize(i.extractedUrl),l,u)),this.events.next(new em(c.redirectTo,c.navigationBehaviorOptions))}}catch(c){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(c)}}return qr}))}))}cancelNavigationTransition(t,i,r){const s=new Ga(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZY(n){return n!==Kg}let KY=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>te(QY),providedIn:"root"})}return n})();class JY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let QY=(()=>{class n extends JY{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yn(n)))(r||n)}})();static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zN=(()=>{class n{urlSerializer=te(uh);options=te(xh,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=te(Jd);urlHandlingStrategy=te(hM);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Va;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){const s=void 0!==t?this.urlHandlingStrategy.merge(t,i):i,o=r??s;return o instanceof Va?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=yN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:()=>te(eZ),providedIn:"root"})}return n})(),eZ=(()=>{class n extends zN{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Jg?this.updateStateMemento():t instanceof Nl?this.commitTransition(i):t instanceof pN?"eager"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Jb?(this.commitTransition(i),"deferred"===this.urlUpdateStrategy&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Ga&&(t.code===dr.GuardRejected||t.code===dr.NoDataFromResolver)?this.restoreHistory(i):t instanceof Kb?this.restoreHistory(i,!0):t instanceof qs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){const{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(t)||s){const a=this.browserPageId,c={...o,...this.generateNgRouterState(r,a)};this.location.replaceState(t,"",c)}else{const a={...o,...this.generateNgRouterState(r,this.browserPageId+1)};this.location.go(t,"",a)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&0===s&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yn(n)))(r||n)}})();static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HN(n,e){n.events.pipe(Fo(t=>t instanceof qs||t instanceof Ga||t instanceof Kb||t instanceof Nl),Ut(t=>t instanceof qs||t instanceof Nl?0:t instanceof Ga&&(t.code===dr.Redirect||t.code===dr.SupersededByNewNavigation)?2:1),Fo(t=>2!==t),Il(1)).subscribe(()=>{e()})}const tZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ar=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=te(px);stateManager=te(zN);options=te(xh,{optional:!0})||{};pendingTasks=te(Mo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=te(fM);urlSerializer=te(uh);location=te(Jd);urlHandlingStrategy=te(hM);_events=new Fi;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=te(KY);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=te(bh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!te(im,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mi;subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==r&&null!==s)if(this.stateManager.handleRouterEvent(i,s),i instanceof Ga&&i.code!==dr.Redirect&&i.code!==dr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qs)this.navigated=!0;else if(i instanceof em){const o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c={browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ZY(r.source),...o};this.scheduleNavigation(a,Kg,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}(function rZ(n){return!(n instanceof Jb||n instanceof em)})(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const c={...r};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o;let d,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=aN(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),d=this.currentUrlTree.root}return cN(d,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ha(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Kg,null,i)}navigate(t,i={skipLocationChange:!1}){return function iZ(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ne(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(r=!0===i?{...tZ}:!1===i?{...nZ}:i,Ha(t))return J2(this.currentUrlTree,t,r);const s=this.parseUrl(t);return J2(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(null!=s&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,f)=>{a=d,c=f});const u=this.pendingTasks.add();return HN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wa=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Fi;constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof qs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Ha(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const i=null===this.href?null:function vT(n,e,t){return function Q4(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?gT:ls}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.routerLinkInput?null:Ha(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(le(Ar),le(Ll),function Xu(n){return function j6(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(wE(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(gt(),n)}("tabindex"),le(zs),le(ar),le(Ua))};static \u0275dir=Je({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&yt("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&fs("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Tl],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Tl],replaceUrl:[2,"replaceUrl","replaceUrl",Tl],routerLink:"routerLink"},features:[Ur]})}return n})();class GN{}let aZ=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Fo(t=>t instanceof qs),oh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Wp(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Jn(r).pipe(sh())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):et(null);const s=r.pipe(li(o=>null===o?et(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Jn([s,this.loader.loadComponent(i)]).pipe(sh()):s})}static \u0275fac=function(i){return new(i||n)(qe(Ar),qe(XR),qe(Vi),qe(GN),qe(dM))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const pM=new ge("");let WN=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qs?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nl&&t.code===Qg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){!function RA(){throw new Error("invalid")}()};static \u0275prov=Ne({token:n,factory:n.\u0275fac})}return n})();function jN(n){return n.routerState.root}function xs(n,e){return{\u0275kind:n,\u0275providers:e}}function $N(){const n=te(Vn);return e=>{const t=n.get(lr);if(e!==t.components[0])return;const i=n.get(Ar),r=n.get(qN);1===n.get(gM)&&i.initialNavigation(),n.get(XN,null,mt.Optional)?.setUpPreloading(),n.get(pM,null,mt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const qN=new ge("",{factory:()=>new Fi}),gM=new ge("",{providedIn:"root",factory:()=>1}),XN=new ge("");function hZ(n){return xs(0,[{provide:XN,useExisting:aZ},{provide:GN,useExisting:n}])}function pZ(n){return xs(9,[{provide:UN,useValue:XY},{provide:BN,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const gZ=[Jd,{provide:uh,useClass:jg},Ar,gh,{provide:Ll,useFactory:jN,deps:[Ar]},dM,[]];let Mh=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[gZ,[],{provide:bh,multi:!0,useValue:t},[],i?.errorHandler?{provide:VN,useValue:i.errorHandler}:[],{provide:xh,useValue:i||{}},i?.useHash?{provide:Ua,useClass:k$}:{provide:Ua,useClass:FP},{provide:pM,useFactory:()=>{const n=te(a$),e=te(Pt),t=te(xh),i=te(fM),r=te(uh);return t.scrollOffset&&n.setOffset(t.scrollOffset),new WN(r,i,n,e,t)}},i?.preloadingStrategy?hZ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?_Z(i):[],i?.bindToComponentInputs?xs(8,[MN,{provide:im,useExisting:MN}]).\u0275providers:[],i?.enableViewTransitions?pZ().\u0275providers:[],[{provide:YN,useFactory:$N},{provide:fl,multi:!0,useExisting:YN}]]}}static forChild(t){return{ngModule:n,providers:[{provide:bh,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pa({type:n});static \u0275inj=go({})}return n})();function _Z(n){return["disabled"===n.initialNavigation?xs(3,[{provide:Jp,multi:!0,useFactory:()=>{const e=te(Ar);return()=>{e.setUpLocationChangeListener()}}},{provide:gM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?xs(2,[{provide:gM,useValue:0},{provide:Jp,multi:!0,deps:[Vn],useFactory:e=>{const t=e.get(E7,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Ar),s=e.get(qN);HN(r,()=>{i(!0)}),e.get(fM).afterPreactivation=()=>(i(!0),s.closed?et(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const YN=new ge("");let ZN=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(le(zs),le(ar))};static \u0275dir=Je({type:n})}return n})(),ja=(()=>{class n extends ZN{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yn(n)))(r||n)}})();static \u0275dir=Je({type:n,features:[zt]})}return n})();const bs=new ge(""),MZ={provide:bs,useExisting:Qt(()=>cm),multi:!0};let cm=(()=>{class n extends ja{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Yn(n)))(r||n)}})();static \u0275dir=Je({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&yt("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[un([MZ]),zt]})}return n})();const wZ={provide:bs,useExisting:Qt(()=>$a),multi:!0},CZ=new ge("");let $a=(()=>{class n extends ZN{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,null==this._compositionMode&&(this._compositionMode=!function SZ(){const n=No()?No().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(le(zs),le(ar),le(CZ,8))};static \u0275dir=Je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&yt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[un([wZ]),zt]})}return n})();function mM(n){return null==n||0===vM(n)}function vM(n){return null==n?null:Array.isArray(n)||"string"==typeof n?n.length:n instanceof Set?n.size:null}const ui=new ge(""),Bo=new ge(""),EZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $i{static min(e){return function KN(n){return e=>{if(null==e.value||null==n)return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function JN(n){return e=>{if(null==e.value||null==n)return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function QN(n){return mM(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function eO(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function tO(n){return mM(n.value)||EZ.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function nO(n){return e=>{const t=e.value?.length??vM(e.value);return null===t||0===t?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}(e)}static maxLength(e){return function iO(n){return e=>{const t=e.value?.length??vM(e.value);return null!==t&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}(e)}static pattern(e){return function rO(n){if(!n)return lm;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(mM(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return uO(e)}static composeAsync(e){return dO(e)}}function lm(n){return null}function sO(n){return null!=n}function oO(n){return Od(n)?Jn(n):n}function aO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function cO(n,e){return e.map(t=>t(n))}function lO(n){return n.map(e=>function DZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function uO(n){if(!n)return null;const e=n.filter(sO);return 0==e.length?null:function(t){return aO(cO(t,e))}}function yM(n){return null!=n?uO(lO(n)):null}function dO(n){if(!n)return null;const e=n.filter(sO);return 0==e.length?null:function(t){return function bZ(...n){const e=B2(n),{args:t,keys:i}=V2(n),r=new qn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let d=!1;ms(t[u]).subscribe(Fn(s,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?H2(i,a):a),s.complete())}))}});return e?r.pipe(z2(e)):r}(cO(t,e).map(oO)).pipe(Ut(aO))}}function _M(n){return null!=n?dO(lO(n)):null}function hO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fO(n){return n._rawValidators}function pO(n){return n._rawAsyncValidators}function xM(n){return n?Array.isArray(n)?n:[n]:[]}function um(n,e){return Array.isArray(n)?n.includes(e):n===e}function gO(n,e){const t=xM(e);return xM(n).forEach(r=>{um(t,r)||t.push(r)}),t}function mO(n,e){return xM(e).filter(t=>!um(n,t))}class vO{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_M(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ei extends vO{name;get formDirective(){return null}get path(){return null}}class Vo extends vO{_parent=null;name=null;valueAccessor=null}class yO{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let wh=(()=>{class n extends yO{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(le(Vo,2))};static \u0275dir=Je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&si("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[zt]})}return n})(),bM=(()=>{class n extends yO{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(le(Ei,10))};static \u0275dir=Je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&si("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[zt]})}return n})();const Sh="VALID",hm="INVALID",Bl="PENDING",Ch="DISABLED";class Vl{}class xO extends Vl{value;source;constructor(e,t){super(),this.value=e,this.source=t}}class SM extends Vl{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}}class CM extends Vl{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}}class fm extends Vl{status;source;constructor(e,t){super(),this.status=e,this.source=t}}class OZ extends Vl{source;constructor(e){super(),this.source=e}}class LZ extends Vl{source;constructor(e){super(),this.source=e}}function EM(n){return(pm(n)?n.validators:n)||null}function DM(n,e){return(pm(e)?e.asyncValidators:n)||null}function pm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function bO(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new ne(1e3,"");if(!i[t])throw new ne(1001,"")}function MO(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new ne(1002,"")})}class gm{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pn(this.statusReactive)}set status(e){Pn(()=>this.statusReactive.set(e))}_status=Gs(()=>this.statusReactive());statusReactive=as(void 0);get valid(){return this.status===Sh}get invalid(){return this.status===hm}get pending(){return this.status==Bl}get disabled(){return this.status===Ch}get enabled(){return this.status!==Ch}errors;get pristine(){return Pn(this.pristineReactive)}set pristine(e){Pn(()=>this.pristineReactive.set(e))}_pristine=Gs(()=>this.pristineReactive());pristineReactive=as(!0);get dirty(){return!this.pristine}get touched(){return Pn(this.touchedReactive)}set touched(e){Pn(()=>this.touchedReactive.set(e))}_touched=Gs(()=>this.touchedReactive());touchedReactive=as(!1);get untouched(){return!this.touched}_events=new Fi;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mO(e,this._rawAsyncValidators))}hasValidator(e){return um(this._rawValidators,e)}hasAsyncValidator(e){return um(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new CM(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&!1!==e.emitEvent&&this._events.next(new CM(!1,i))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new SM(!1,i))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&!1!==e.emitEvent&&this._events.next(new SM(!0,i))}markAsPending(e={}){this.status=Bl;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new fm(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ch,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue();const i=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new xO(this.value,i)),this._events.next(new fm(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sh,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sh||this.status===Bl)&&this._runAsyncValidator(i,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new xO(this.value,t)),this._events.next(new fm(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ch:Sh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Bl,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const i=oO(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new fm(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Rn,this.statusChanges=new Rn}_calculateStatus(){return this._allControlsDisabled()?Ch:this.errors?hm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bl)?Bl:this._anyControlsHaveStatus(hm)?hm:Sh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new SM(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new CM(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function FZ(n){return Array.isArray(n)?yM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function kZ(n){return Array.isArray(n)?_M(n):n||null}(this._rawAsyncValidators)}}class Eh extends gm{constructor(e,t,i){super(EM(t),DM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){MO(this,0,e),Object.keys(e).forEach(i=>{bO(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class wO extends Eh{}const qa=new ge("",{providedIn:"root",factory:()=>Dh}),Dh="always";function mm(n,e){return[...e.path,n]}function Th(n,e,t=Dh){TM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function BZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&SO(n,e)})}(n,e),function zZ(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function VZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&SO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function UZ(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function vm(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),_m(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ym(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function TM(n,e){const t=fO(n);null!==e.validator?n.setValidators(hO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=pO(n);null!==e.asyncValidator?n.setAsyncValidators(hO(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();ym(e._rawValidators,r),ym(e._rawAsyncValidators,r)}function _m(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=fO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=pO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return ym(e._rawValidators,i),ym(e._rawAsyncValidators,i),t}function SO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function IM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function RM(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===$a?t=s:function WZ(n){return Object.getPrototypeOf(n.constructor)===ja}(s)?i=s:r=s}),r||i||t||null}function DO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function TO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const Ih=class extends gm{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(EM(t),DM(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=TO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){DO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){DO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){TO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},KZ={provide:Vo,useExisting:Qt(()=>wm)},AO=Promise.resolve();let wm=(()=>{class n extends Vo{_changeDetectorRef;callSetDisabledState;control=new Ih;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Rn;constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=RM(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),IM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Th(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){AO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&Tl(i);AO.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?mm(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(le(Ei,9),le(ui,10),le(Bo,10),le(bs,10),le(Zd,8),le(qa,8))};static \u0275dir=Je({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[un([KZ]),zt,Ur]})}return n})(),PM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();const NM=new ge(""),iK={provide:Ei,useExisting:Qt(()=>zl)};let zl=(()=>{class n extends Ei{callSetDisabledState;get submitted(){return Pn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Gs(()=>this._submittedReactive());_submittedReactive=as(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Rn;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_m(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Th(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){vm(t.control||null,t,!1),function jZ(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),function EO(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new OZ(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new LZ(this.form))}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(vm(i||null,t),(n=>n instanceof Ih)(r)&&(Th(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function CO(n,e){TM(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function HZ(n,e){return _m(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){TM(this.form,this),this._oldForm&&_m(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(le(ui,10),le(Bo,10),le(qa,8))};static \u0275dir=Je({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&yt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[un([iK]),zt,Ur]})}return n})();const oK={provide:Vo,useExisting:Qt(()=>Cm)};let Cm=(()=>{class n extends Vo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Rn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=RM(0,s)}ngOnChanges(t){this._added||this._setUpControl(),IM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return mm(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(le(Ei,13),le(ui,10),le(Bo,10),le(bs,10),le(NM,8))};static \u0275dir=Je({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[un([oK]),zt,Ur]})}return n})(),$O=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pa({type:n});static \u0275inj=go({})}return n})();class qO extends gm{constructor(e,t,i){super(EM(t),DM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){MO(this,0,e),e.forEach((i,r)=>{bO(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function XO(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let YO=(()=>{class n{useNonNullable=!1;get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let s={};return XO(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Eh(r,s)}record(t,i=null){const r=this._reduceControls(t);return new wO(r,i)}control(t,i,r){let s={};return this.useNonNullable?(XO(i)?s=i:(s.validators=i,s.asyncValidators=r),new Ih(t,{...s,nonNullable:!0})):new Ih(t,i,r)}array(t,i,r){const s=t.map(o=>this._createControl(o));return new qO(s,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Ih||t instanceof gm?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Em=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qa,useValue:t.callSetDisabledState??Dh}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pa({type:n});static \u0275inj=go({imports:[$O]})}return n})(),ZO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:NM,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:qa,useValue:t.callSetDisabledState??Dh}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Pa({type:n});static \u0275inj=go({imports:[$O]})}return n})();const bK=()=>({"background-image":"url(assets/library.jpeg)"}),MK=n=>[n];function wK(n,e){if(1&n&&bt(0,"img",16),2&n){const t=ln().$implicit;Vx("alt",t.title),Xe("src",t.imageUrl,ls)}}function SK(n,e){if(1&n&&(N(0,"span",17),H(1),F()),2&n){const t=ln().$implicit;fe(),Hn(t.icon)}}function CK(n,e){if(1&n&&(N(0,"button",18),H(1),F()),2&n){const t=ln().$implicit;Xe("routerLink",SR(3,MK,t.route))("ngClass",t.buttonClass),fe(),Gn(" ",t.buttonText," ")}}function EK(n,e){if(1&n){const t=kd();N(0,"button",19),yt("click",function(){_o(t);const r=ln().$implicit;return xo(ln().onServiceClick(r))}),H(1),F()}if(2&n){const t=ln().$implicit;Xe("ngClass",t.buttonClass),fe(),Gn(" ",t.buttonText," ")}}function DK(n,e){if(1&n&&(N(0,"div",7)(1,"div",8),bn(2,wK,1,2,"img",9)(3,SK,2,1,"span",10),F(),N(4,"h3",11)(5,"span",12),H(6),F(),bt(7,"br"),N(8,"span",13),H(9),F()(),N(10,"p",14),H(11),F(),bn(12,CK,2,5,"button",15)(13,EK,2,2,"ng-template",null,0,IR),F()),2&n){const t=e.$implicit,i=tR(14);fe(2),Xe("ngIf",t.imageUrl),fe(),Xe("ngIf",!t.imageUrl),fe(3),Hn(t.titleLine1),fe(3),Hn(t.titleLine2),fe(2),Hn(t.description),fe(),Xe("ngIf",t.route)("ngIfElse",i)}}let TK=(()=>{class n{services=[{id:1,imageUrl:"assets/plusy.png",titleLine1:"\u0645\u0633\u0627\u0639\u062f\u0643 \u0627\u0644\u0634\u062e\u0635\u064a Plusy",titleLine2:"",description:"\u0627\u0633\u0623\u0644 Plusy \u0644\u062a\u0639\u0631\u0641 \u0645\u0646 \u0623\u064a\u0646 \u062a\u0628\u062f\u0623\u060c \u0645\u0627 \u0627\u0644\u0630\u064a \u062a\u062a\u0639\u0644\u0645\u0647\u060c \u0623\u0648 \u0643\u064a\u0641 \u062a\u0637\u0648\u0631 \u0646\u0641\u0633\u0643 \u0641\u064a \u0645\u062c\u0627\u0644\u0643",buttonText:"\u0627\u0628\u062f\u0623 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0627\u0644\u0623\u0646",buttonClass:"btn-primary",route:"",icon:""},{id:2,imageUrl:"assets/network.png",title:"",titleLine1:"\u0634\u0628\u0643\u0629 \u0631\u0648\u0627\u062f \u0627\u0644\u062a\u062e\u0635\u0635",titleLine2:"",description:"\u0627\u0633\u062a\u0643\u0634\u0641 \u0634\u0628\u0643\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0627\u062a \u0627\u0644\u0645\u0624\u062b\u0631\u0629 \u0641\u064a \u0645\u062c\u0627\u0644 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a",buttonText:"\u0627\u0633\u062a\u0639\u0631\u0636 \u0627\u0644\u0634\u0628\u0643\u0629",buttonClass:"btn-secondary",route:"/photo-glope",icon:""},{id:3,imageUrl:"assets/map.png",title:"",titleLine1:"\u062e\u0631\u064a\u0637\u0629 \u0645\u0643\u062a\u0628\u0627\u062a \u0645\u0635\u0631",titleLine2:"",description:"\u0627\u0643\u062a\u0634\u0641 \u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0641\u064a \u0623\u0646\u062d\u0627\u0621 \u0645\u0635\u0631 \u0639\u0628\u0631 \u062e\u0631\u064a\u0637\u0629 \u062a\u0641\u0627\u0639\u0644\u064a\u0629 \u0645\u0635\u0646\u0641\u0629.",buttonText:"\u062a\u0635\u0641\u062d \u0627\u0644\u062e\u0631\u064a\u0637\u0629",buttonClass:"btn-success",route:"/library-map",icon:""},{id:4,imageUrl:"assets/director.png",title:"",titleLine1:"\u062f\u0644\u064a\u0644 \u0623\u0642\u0633\u0627\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0629",titleLine2:"",description:"\u0627\u0633\u062a\u0643\u0634\u0641 \u0623\u0642\u0633\u0627\u0645 \u0639\u0644\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0641\u064a \u0627\u0644\u062c\u0627\u0645\u0639\u0627\u062a \u0627\u0644\u0645\u0635\u0631\u064a\u0629",buttonText:"\u062a\u0635\u0641\u062d \u0627\u0644\u062f\u0644\u064a\u0644",buttonClass:"btn-info",route:"/departments",icon:""}];openChat(){window.chatbase&&"function"==typeof window.chatbase.openChat?window.chatbase.openChat():console.warn("Chatbase not ready yet.")}onServiceClick(t){1===t.id?this.openChat():t.route&&(window.location.href=t.route)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-hero"]],decls:8,vars:3,consts:[["normalButton",""],[1,"hero-section",3,"ngStyle"],[1,"hero-header"],[1,"main-title"],[1,"subtitle"],[1,"services-container"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"service-icon"],["class","service-image",3,"src","alt",4,"ngIf"],["class","icon",4,"ngIf"],[1,"service-title"],[1,"title-main"],[1,"title-sub"],[1,"service-description"],["class","service-button",3,"routerLink","ngClass",4,"ngIf","ngIfElse"],[1,"service-image",3,"src","alt"],[1,"icon"],[1,"service-button",3,"routerLink","ngClass"],[1,"service-button",3,"click","ngClass"]],template:function(i,r){1&i&&(N(0,"div",1)(1,"div",2)(2,"h1",3),H(3,"\u0627\u0643\u062a\u0634\u0641 \u0643\u0644 \u0645\u0627 \u064a\u062e\u0635 \u062a\u062e\u0635\u0635 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"),F(),N(4,"p",4),H(5," \u0646\u0648\u0641\u0631 \u0644\u0643 \u0627\u0644\u0623\u062f\u0648\u0627\u062a\u060c \u0627\u0644\u0623\u062f\u0644\u0629\u060c \u0648\u0627\u0644\u0645\u0633\u0627\u0631\u0627\u062a \u0627\u0644\u062a\u064a \u062a\u0645\u0643\u0646\u0643 \u0645\u0646 \u0627\u0644\u062a\u0639\u0644\u0645 \u0627\u0644\u0630\u0627\u062a\u064a\u060c \u0627\u0644\u0627\u0633\u062a\u0639\u062f\u0627\u062f \u0627\u0644\u0645\u0647\u0646\u064a\u060c \u0648\u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a \u0641\u064a \u0645\u0643\u0627\u0646 \u0648\u0627\u062d\u062f. "),F()(),N(6,"div",5),bn(7,DK,15,7,"div",6),F()()),2&i&&(Xe("ngStyle",El(2,bK)),fe(7),Xe("ngForOf",r.services))},dependencies:[Tr,Ug,Oo,rh,Bg,Em,Mh,Wa],styles:['.hero-section[_ngcontent-%COMP%]{padding:60px 20px;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow:hidden}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-color:#fff3;-webkit-backdrop-filter:blur(.1px);backdrop-filter:blur(.1px);z-index:0}.hero-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px;position:relative;z-index:1}.main-title[_ngcontent-%COMP%]{font-size:2.9rem;color:#fff;margin-bottom:20px;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.5);line-height:1.2}.subtitle[_ngcontent-%COMP%]{font-size:2.1rem;color:#ffffffe6;font-weight:600;max-width:800px;margin:0 auto;line-height:1.6;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.services-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:50px;max-width:2000px;margin:0 auto;position:relative;z-index:1}.service-card[_ngcontent-%COMP%]{background:#fff;border-radius:40px;padding:4px 20px;text-align:center;box-shadow:0 10px 30px #0003;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden}.service-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s ease}.service-card[_ngcontent-%COMP%]:hover:before{left:100%}.service-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 20px 40px #0000004d}.service-image[_ngcontent-%COMP%]{width:130px;height:120px;object-fit:contain;transition:transform .3s ease}.service-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.service-card[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg)}.service-title[_ngcontent-%COMP%]{font-size:28px;color:#2c3e50;margin-bottom:15px;font-weight:1000;direction:rtl;text-align:center}.titleline1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#222}.title-sub[_ngcontent-%COMP%]{font-size:26px;color:#555;font-weight:1000}.service-description[_ngcontent-%COMP%]{color:#666;margin-bottom:25px;line-height:1.8;direction:rtl;text-align:center;font-size:25px}.service-button[_ngcontent-%COMP%]{padding:8px 20px;border:none;border-radius:15px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:20px;text-transform:uppercase;letter-spacing:.5px;position:relative;overflow:hidden;font-family:cairo;margin-bottom:17px}.service-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .5s ease}.service-button[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#45a049);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#45a049,#3d8b40);transform:translateY(-2px);box-shadow:0 5px 15px #4caf5066}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1976d2,#1565c0);transform:translateY(-2px);box-shadow:0 5px 15px #2196f366}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#45a049);color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#45a049,#3d8b40);transform:translateY(-2px);box-shadow:0 5px 15px #4caf5066}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2);color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1976d2,#1565c0);transform:translateY(-2px);box-shadow:0 5px 15px #2196f366}@media (max-width: 1024px){.services-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:20px}}@media (max-width: 768px){.hero-section[_ngcontent-%COMP%]{padding:40px 15px}.main-title[_ngcontent-%COMP%]{font-size:2rem}.subtitle[_ngcontent-%COMP%]{font-size:1rem}.services-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.service-card[_ngcontent-%COMP%]{padding:25px 20px}.icon[_ngcontent-%COMP%]{font-size:2.5rem;padding:15px}}@media (max-width: 480px){.main-title[_ngcontent-%COMP%]{font-size:1.8rem}.service-title[_ngcontent-%COMP%]{font-size:1.2rem}.service-description[_ngcontent-%COMP%]{font-size:.9rem}}']})}return n})(),AK=(()=>{class n{services=[{id:1,title:"\u0628\u0648\u0627\u0628\u0629 \u0623\u0642\u0633\u0627\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a",description:"\u062f\u0644\u064a\u0644 \u0634\u0627\u0645\u0644 \u0644\u0644\u0648\u0627\u0626\u062d \u0648\u0645\u0642\u0631\u0631\u0627\u062a \u0623\u0642\u0633\u0627\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0641\u064a \u0627\u0644\u062c\u0627\u0645\u0639\u0627\u062a \u0627\u0644\u0645\u0635\u0631\u064a\u0629\u060c \u0645\u0639 \u0645\u0642\u0627\u0631\u0646\u0629 \u0628\u064a\u0646 \u0627\u0644\u0645\u0642\u0631\u0631\u0627\u062a \u0648\u0625\u0628\u0631\u0627\u0632 \u0627\u0644\u0641\u0631\u0648\u0642\u0627\u062a \u0648\u0627\u0644\u0641\u0631\u0635 \u0627\u0644\u0645\u0648\u062c\u0648\u062f\u0629 \u0641\u064a \u0643\u0644 \u0642\u0633\u0645",iconName:"fa-solid fa-torii-gate",link:"/academic-support"},{id:2,title:"\u0622\u062e\u0631 \u0627\u0644\u0623\u062e\u0628\u0627\u0631 \u0648\u0627\u0644\u0645\u0633\u062a\u062c\u062f\u0627\u062a",description:"\u062a\u0627\u0628\u0639 \u0623\u062d\u062f\u062b \u0623\u062e\u0628\u0627\u0631 \u0627\u0644\u0645\u0624\u062a\u0645\u0631\u0627\u062a\u060c \u0627\u0644\u0641\u0639\u0627\u0644\u064a\u0627\u062a \u0627\u0644\u0639\u0644\u0645\u064a\u0629\u060c \u0627\u0644\u0645\u0646\u062d\u060c \u0627\u0644\u0641\u0631\u0635 \u0627\u0644\u0628\u062d\u062b\u064a\u0629\u060c \u0648\u0643\u0644 \u0645\u0627 \u064a\u062e\u0635 \u0645\u062c\u062a\u0645\u0639 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0639\u0631\u0628\u064a\u064b\u0627 \u0648\u062f\u0648\u0644\u064a\u064b\u0627.",iconName:"fa-solid fa-up-right-from-square",link:"/research"},{id:3,title:"\u0645\u062e\u0637\u0637\u0627\u062a \u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0628\u064a\u0646\u064a\u0629",description:"\u0634\u0627\u0647\u062f \u0639\u0644\u0627\u0642\u0627\u062a \u0639\u0644\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0628\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0623\u062e\u0631\u0649 \u0645\u062b\u0644 \u0639\u0644\u0645 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064a\u060c \u0627\u0644\u0625\u0639\u0644\u0627\u0645 \u0627\u0644\u0631\u0642\u0645\u064a\u060c \u0627\u0644\u062a\u0635\u0645\u064a\u0645\u060c \u0627\u0644\u0623\u0631\u0634\u0641\u0629\u060c \u0648\u063a\u064a\u0631\u0647\u0627\u060c \u0645\u0646 \u062e\u0644\u0627\u0644 \u062e\u0631\u0627\u0626\u0637 \u0645\u0641\u0627\u0647\u064a\u0645\u064a\u0629 \u0648\u0627\u0646\u0637\u0648\u0644\u0648\u062c\u064a\u0629 \u0645\u0631\u0626\u064a\u0629",iconName:"fa-solid fa-globe",link:"/library"},{id:4,title:"\u062f\u0644\u064a\u0644 \u0627\u0644\u0627\u062a\u062d\u0627\u062f\u0627\u062a \u0648\u0627\u0644\u062c\u0645\u0639\u064a\u0627\u062a \u0627\u0644\u0645\u0647\u0646\u064a\u0629",description:"\u064a\u0633\u0627\u0639\u062f\u0643 \u0647\u0630\u0627 \u0627\u0644\u062f\u0644\u064a\u0644 \u0641\u064a \u0645\u0639\u0631\u0641\u0629 \u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0645\u062c\u062a\u0645\u0639 \u0627\u0644\u0645\u0647\u0646\u064a\u060c \u0641\u0631\u0635 \u0627\u0644\u0639\u0636\u0648\u064a\u0629\u060c \u0627\u0644\u0645\u0624\u062a\u0645\u0631\u0627\u062a\u060c \u0648\u0627\u0644\u0645\u0648\u0627\u0631\u062f \u0627\u0644\u062a\u064a \u062a\u0642\u062f\u0645\u0647\u0627 \u0647\u0630\u0647 \u0627\u0644\u0643\u064a\u0627\u0646\u0627\u062a \u0644\u062f\u0639\u0645 \u062a\u0637\u0648\u0631\u0643 \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a \u0648\u0627\u0644\u0645\u0647\u0646\u064a",iconName:"fa-solid fa-sitemap",link:"/careers"},{id:5,title:"\u0623\u062f\u0644\u0629 \u0627\u0644\u0645\u0635\u0627\u062f\u0631 \u0648\u0627\u0644\u0623\u062f\u0648\u0627\u062a",description:"\u0646\u0642\u062f\u0645 \u0644\u0643 \u0623\u062f\u0644\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u0623\u0647\u0645 \u0642\u0648\u0627\u0639\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u0648\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0628\u062d\u062b\u060c \u0648\u0627\u0644\u0645\u0635\u0627\u062f\u0631 \u0627\u0644\u0631\u0642\u0645\u064a\u0629 \u0627\u0644\u062a\u064a \u064a\u062d\u062a\u0627\u062c\u0647\u0627 \u0637\u0644\u0627\u0628 \u0648\u062e\u0631\u064a\u062c\u0648 \u0639\u0644\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u060c \u0644\u062a\u0633\u0647\u064a\u0644 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0645\u0639\u0644\u0648\u0645\u0629 \u0645\u0646 \u0645\u0635\u0627\u062f\u0631 \u0645\u0648\u062b\u0648\u0642\u0629.",iconName:"fa-solid fa-asterisk",link:"/community"},{id:6,title:"\u062f\u0644\u064a\u0644 \u0627\u0644\u0648\u0638\u0627\u0626\u0641 \u0627\u0644\u0645\u0647\u0646\u064a\u0629",description:"\u0627\u0643\u062a\u0634\u0641 \u0627\u0644\u0648\u0638\u0627\u0626\u0641 \u0627\u0644\u0645\u062a\u0627\u062d\u0629 \u0644\u062e\u0631\u064a\u062c\u064a \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u060c \u0645\u0639 \u0627\u0644\u062a\u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0645\u0647\u0627\u0631\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0644\u0643\u0644 \u0648\u0638\u064a\u0641\u0629\u060c \u0648\u0623\u0645\u062b\u0644\u0629 \u0639\u0644\u0649 \u062c\u0647\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u062f\u0627\u062e\u0644 \u0645\u0635\u0631 \u0648\u062e\u0627\u0631\u062c\u0647\u0627",iconName:"fa-solid fa-signs-post",link:"/tech-support"},{id:7,title:"\u0627\u0644\u0634\u0627\u062a \u0628\u0648\u062a \u0627\u0644\u062a\u0641\u0627\u0639\u0644\u064a",description:"\u062a\u0648\u0627\u0635\u0644 \u0641\u0648\u0631\u064b\u0627 \u0645\u0639 \u0645\u0633\u0627\u0639\u062f \u0630\u0643\u064a \u064a\u062c\u064a\u0628\u0643 \u0639\u0644\u0649 \u0623\u0633\u0626\u0644\u062a\u0643 \u062d\u0648\u0644 \u0627\u0644\u062a\u062e\u0635\u0635\u060c \u0627\u0644\u0643\u0648\u0631\u0633\u0627\u062a \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629\u060c \u0627\u0644\u0648\u0638\u0627\u0626\u0641\u060c \u0627\u0644\u0623\u062f\u0648\u0627\u062a\u060c \u0627\u0644\u0645\u0635\u0627\u062f\u0631\u060c \u0648\u063a\u064a\u0631\u0647\u0627 \u0645\u0646 \u0627\u0644\u0627\u0633\u062a\u0641\u0633\u0627\u0631\u0627\u062a... \u0639\u0644\u0649 \u0645\u062f\u0627\u0631 \u0627\u0644\u0633\u0627\u0639\u0629",iconName:"fa-solid fa-headset",link:"/tech-support"},{id:8,title:"\u0645\u0633\u0627\u0631\u0627\u062a \u062a\u0639\u0644\u0645 \u0627\u0644\u0630\u0627\u062a\u064a",description:"\u0627\u0633\u062a\u0643\u0634\u0641 \u062e\u0631\u0627\u0626\u0637 \u062a\u0639\u0644\u0645 \u0645\u0635\u0645\u0645\u0629 \u0628\u0639\u0646\u0627\u064a\u0629 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0641\u064a \u062a\u0637\u0648\u064a\u0631 \u0645\u0647\u0627\u0631\u0627\u062a \u0645\u062d\u062f\u062f\u0629 \u0645\u062b\u0644 \u0627\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u0648\u063a\u064a\u0631\u0647\u0627\u060c \u0628\u0646\u0627\u0621\u064b \u0639\u0644\u0649 \u0645\u0627 \u062f\u0631\u0633\u062a\u0647 \u0628\u0627\u0644\u0641\u0639\u0644 \u0641\u064a \u0644\u0627\u0626\u062d\u062a\u0643",iconName:"fa-solid fa-bezier-curve",link:"/tech-support"}];getServices(){return this.services}getServiceById(t){return this.services.find(i=>i.id===t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IK(n,e){if(1&n&&(N(0,"div",5)(1,"div",6),bt(2,"i",7),F(),N(3,"h3"),H(4),F(),N(5,"p"),H(6),F(),N(7,"a",8),H(8,"\u062a\u0639\u0631\u0641 \u0639\u0644\u064a \u0627\u0644\u0645\u0632\u064a\u062f"),F()()),2&n){const t=e.$implicit;fe(2),Xe("ngClass",t.iconName),fe(2),Hn(t.title),fe(2),Hn(t.description),fe(),Xe("routerLink",t.link)}}let RK=(()=>{class n{servicesService;services=[];constructor(t){this.servicesService=t}ngOnInit(){this.services=this.servicesService.getServices()}static \u0275fac=function(i){return new(i||n)(le(AK))};static \u0275cmp=Kn({type:n,selectors:[["app-services"]],decls:7,vars:1,consts:[[1,"services-section"],[1,"container"],[1,"section-header"],[1,"services-grid"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"icon-container"],[3,"ngClass"],[1,"learn-more",3,"routerLink"]],template:function(i,r){1&i&&(N(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),H(4,"\u062e\u062f\u0645\u0627\u062a\u0646\u0627"),F()(),N(5,"div",3),bn(6,IK,9,4,"div",4),F()()()),2&i&&(fe(6),Xe("ngForOf",r.services))},dependencies:[Tr,Ug,Oo,Mh,Wa],styles:['.services-section[_ngcontent-%COMP%]{padding:80px 0;margin-top:0;background:linear-gradient(135deg,#e0f2ff,#80c0ff)}.container[_ngcontent-%COMP%]{max-width:1600px;margin:0 auto;padding:0 15px}.section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:60px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px;color:#325579;margin-bottom:20px;font-weight:700;position:relative;display:inline-block}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100px;height:4px;background-color:#3498db;bottom:-10px;left:50%;transform:translate(-50%)}.section-description[_ngcontent-%COMP%]{max-width:2000px;margin:0 auto;color:#000;font-size:22px;line-height:1.6}.icon-container[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background-color:#f0f0f0;display:flex;align-items:center;justify-content:center;margin-bottom:15px;transition:background-color .3s ease}.icon-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:46px;color:#333;transition:color .3s ease}.service-card[_ngcontent-%COMP%]:hover   .icon-container[_ngcontent-%COMP%]{background-color:#007bff}.service-card[_ngcontent-%COMP%]:hover   .icon-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.services-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:40px}.service-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:80px;transition:all .3s ease;box-shadow:0 5px 15px #0000000d;text-align:center;border-bottom:3px solid transparent}.service-card[_ngcontent-%COMP%]:hover{transform:translateY(-50px);box-shadow:0 15px 30px #0000001a;border-bottom:3px solid #3498db}.icon-container[_ngcontent-%COMP%]{width:170px;height:100px;margin:0 auto 20px;background-color:#ecf0f1;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .3s ease;cursor:pointer}.service-card[_ngcontent-%COMP%]:hover   .icon-container[_ngcontent-%COMP%]{background-color:#3498db}.material-icons[_ngcontent-%COMP%]{font-size:40px;color:#3498db;transition:all .3s ease;font-family:cairo}.service-card[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%]{color:#fff}.service-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px;margin-bottom:15px;color:#2c3e50;font-weight:800}.service-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#234446;margin-bottom:20px;line-height:1.6;font-size:18px}.learn-more[_ngcontent-%COMP%]{display:inline-block;padding:8px 20px;background-color:transparent;border:2px solid #3498db;color:#3498db;border-radius:90px;font-weight:700;text-decoration:none;transition:all .3s ease;font-size:18px}.learn-more[_ngcontent-%COMP%]:hover{background-color:#3498db;color:#fff}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px}.section-description[_ngcontent-%COMP%]{font-size:16px}.services-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}return n})();const PK=["newsCard"];function NK(n,e){if(1&n){const t=kd();N(0,"div",8,0),yt("click",function(){const r=_o(t).$implicit;return xo(ln().onNewsCardClick(r))}),N(2,"div",9),H(3),F(),N(4,"div",10),H(5),F(),N(6,"div",11)(7,"h3",12),H(8),F(),N(9,"div",13)(10,"span"),H(11,"\u{1f4c5}"),F(),N(12,"span"),H(13),F()(),N(14,"p",14),H(15),F(),N(16,"a",15),yt("click",function(r){return _o(t),xo(r.stopPropagation())}),N(17,"span"),H(18,"\u0627\u0642\u0631\u0623 \u0627\u0644\u0645\u0632\u064a\u062f"),F(),N(19,"span"),H(20,"\u2190"),F()()()()}if(2&n){const t=e.$implicit,i=ln();fe(2),Xe("ngClass",i.getBadgeClass(t.badgeType)),fe(),Gn(" ",t.badge," "),fe(2),Gn(" ",t.icon," "),fe(3),Hn(t.title),fe(5),Hn(t.date),fe(2),Hn(t.description),fe(),Xe("href",t.link,ls)}}let OK=(()=>{class n{newsCards;newsItems=[{id:1,title:"\u0627\u0643\u0627\u062f\u064a\u0645\u064a",description:"\u0646\u0648\u0641\u0631 \u0644\u0643 \u0634\u0631\u0648\u062d\u0627\u062a \u0645\u0628\u0633\u0637\u0629 \u0648\u0645\u0635\u0627\u062f\u0631 \u0645\u0648\u062b\u0648\u0642\u0629 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0639\u0644 \u0627\u0644\u062a\u0641\u0648\u0642 \u0627\u0644\u062f\u0631\u0627\u0633\u064a \u0644\u0625\u0646\u0646\u0627 \u0646\u0624\u0645\u0646 \u0625\u0646 \u0643\u0644 \u0637\u0627\u0644\u0628 \u064a\u0633\u062a\u062d\u0642 \u0641\u0631\u0635\u0629 \u0644\u0644\u0641\u0647\u0645 \u0648\u0627\u0644\u062a\u0645\u064a\u0632",date:"5 \u064a\u0648\u0644\u064a\u0648 2025",badge:"\u062c\u062f\u064a\u062f",badgeType:"new",icon:"\u{1f4da}",link:"/digital-library"},{id:2,title:"\u0645\u0647\u0646\u064a",description:"\u0623\u062f\u0648\u0627\u062a \u060c \u0643\u0648\u0631\u0633\u0627\u062a \u0648\u0646\u0635\u0627\u0626\u062d \u0639\u0644\u0645\u064a\u0629 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0639\u0644\u064a \u0628\u0646\u0627\u0621 \u0645\u0633\u0627\u0631\u0643 \u0627\u0644\u0645\u0647\u0646\u064a \u0628\u0625\u062d\u062a\u0631\u0627\u0641\u064a\u0629 \u0643\u0645\u0627 \u0646\u0633\u0627\u0639\u062f\u0643 \u0639\u0644\u064a \u0645\u0639\u0631\u0641\u0629 \u0627\u0644\u0645\u0647\u0627\u0631\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0644\u0633\u0648\u0642 \u0627\u0644\u0639\u0645\u0644 \u0645\u0646 \u062e\u0644\u0627\u0644 \u062a\u0648\u0636\u064a\u062d \u0627\u0644\u062a\u062f\u0631\u064a\u0628\u0627\u062a \u0648\u0641\u0631\u0635 \u0627\u0644\u062a\u0637\u0648\u064a\u0631 \u0627\u0644\u0645\u0647\u0646\u064a",date:"28 \u064a\u0648\u0646\u064a\u0648 2025",badge:"\u062a\u062d\u062f\u064a\u062b",badgeType:"update",icon:"\u{1f50d}",link:"/search-system"},{id:3,title:"\u062f\u0639\u0645 \u062a\u0639\u0644\u064a\u0645\u064a",description:"\u0646\u0648\u0641\u0631 \u0644\u0643 \u0623\u062f\u0648\u0627\u062a \u0630\u0643\u064a\u0629 \u0644\u062a\u0646\u0638\u064a\u0645 \u0627\u0644\u0645\u0630\u0627\u0643\u0631\u0629 \u0648\u0627\u0644\u0648\u0642\u062a \u0648\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062e\u0631\u0627\u0626\u0637 \u0627\u0644\u0630\u0647\u0646\u064a\u0629 \u0648\u062d\u0644 \u0627\u0644\u0627\u0633\u0626\u0644\u0629 \u0627\u0644\u0635\u0639\u0628\u0629 \u062a\u0639\u0644\u064a\u0645 \u0623\u0633\u0647\u0644 \u0648 \u0623\u0630\u0643\u064a",date:"15 \u064a\u0648\u0646\u064a\u0648 2025",badge:"\u0645\u064a\u0632\u0629",badgeType:"feature",icon:"\u{1f465}",link:"/collaboration-platform"}];observer;constructor(){}ngOnInit(){this.setupIntersectionObserver()}ngAfterViewInit(){this.observeNewsCards()}loadMore(){console.log("Loading more news..."),this.newsItems=[...this.newsItems,{id:5,title:"\u062a\u062d\u062f\u064a\u062b \u0648\u0627\u062c\u0647\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",description:"\u062a\u062d\u0633\u064a\u0646\u0627\u062a \u062c\u062f\u064a\u062f\u0629 \u0639\u0644\u0649 \u062a\u0635\u0645\u064a\u0645 \u0627\u0644\u0648\u0627\u062c\u0647\u0629 \u0644\u062a\u0648\u0641\u064a\u0631 \u062a\u062c\u0631\u0628\u0629 \u0645\u0633\u062a\u062e\u062f\u0645 \u0623\u0641\u0636\u0644 \u0648\u0623\u0643\u062b\u0631 \u0633\u0647\u0648\u0644\u0629.",date:"20 \u0645\u0627\u064a\u0648 2025",badge:"\u062a\u062d\u062f\u064a\u062b",badgeType:"update",icon:"",link:"/ui-update"}]}getBadgeClass(t){return{new:"news-badge-new",update:"news-badge-update",feature:"news-badge-feature",app:"news-badge-app"}[t]||"news-badge-default"}onNewsCardClick(t){console.log("Clicked on:",t.title)}setupIntersectionObserver(){this.observer=new IntersectionObserver(i=>{i.forEach(r=>{if(r.isIntersecting){const s=r.target;s.style.opacity="1",s.style.transform="translateY(0)"}})},{threshold:.1,rootMargin:"0px 0px -50px 0px"})}observeNewsCards(){this.newsCards.forEach(t=>{const i=t.nativeElement;i.style.opacity="0",i.style.transform="translateY(20px)",i.style.transition="all 0.6s ease",this.observer.observe(i)})}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-whats-new"]],viewQuery:function(i,r){if(1&i&&Hx(PK,5),2&i){let s;cg(s=lg())&&(r.newsCards=s)}},decls:10,vars:1,consts:[["newsCard",""],[1,"whats-new-container"],[1,"section-header"],[1,"section-title"],[1,"section-subtitle"],[1,"news-grid"],["class","news-card",3,"click",4,"ngFor","ngForOf"],[1,"load-more-btn",3,"click"],[1,"news-card",3,"click"],[1,"news-badge",3,"ngClass"],[1,"news-icon"],[1,"news-content"],[1,"news-title"],[1,"news-date"],[1,"news-description"],[1,"news-link",3,"click","href"]],template:function(i,r){1&i&&(N(0,"div",1)(1,"div",2)(2,"h2",3),H(3,"\u0645\u0627 \u0627\u0644\u062c\u062f\u064a\u062f\u061f"),F(),N(4,"p",4),H(5,"\u0646\u062d\u0646 \u0646\u0639\u0645\u0644 \u062f\u0627\u0626\u0645\u0627\u064b \u0639\u0644\u0649 \u062a\u0637\u0648\u064a\u0631 \u0648\u062a\u062d\u0633\u064a\u0646 \u062e\u062f\u0645\u0627\u062a\u0646\u0627 \u0644\u062a\u0648\u0641\u064a\u0631 \u0623\u0641\u0636\u0644 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0648\u0627\u0644\u062e\u062f\u0645\u0627\u062a"),F()(),N(6,"div",5),bn(7,NK,21,7,"div",6),F(),N(8,"button",7),yt("click",function(){return r.loadMore()}),H(9," \u0639\u0631\u0636 \u0627\u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0623\u062e\u0628\u0627\u0631 "),F()()),2&i&&(fe(7),Xe("ngForOf",r.newsItems))},dependencies:[Tr,Ug,Oo],styles:['[_nghost-%COMP%]{display:block;direction:rtl;font-family:cairo}.whats-new-container[_ngcontent-%COMP%]{max-width:3000px;margin:0 auto;background:#fff;border-radius:0;box-shadow:0 20px 40px #0000001a;overflow:hidden}.section-header[_ngcontent-%COMP%]{color:#0e0d0d;padding:30px;text-align:center;position:relative;overflow:hidden}.section-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:30px 30px;animation:_ngcontent-%COMP%_float 20s linear infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0) rotate(0)}to{transform:translateY(-20px) rotate(360deg)}}.section-title[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:700;margin-bottom:10px;position:relative;z-index:1}.section-subtitle[_ngcontent-%COMP%]{font-size:1.7rem;opacity:.9;position:relative;z-index:1}.news-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:35px;padding:30px}.news-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;box-shadow:0 8px 25px #0000001a;overflow:hidden;transition:all .3s ease;border:2px solid transparent;position:relative;cursor:pointer}.news-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #667eea4d;border-color:#667eea}.news-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(to right,#e6f2ff,#5fa8ed)}.news-badge[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;color:#fff;padding:5px 12px;border-radius:20px;font-size:.75rem;font-weight:600;z-index:2}.news-badge-new[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a52)}.news-badge-update[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4ecdc4,#44a08d)}.news-badge-feature[_ngcontent-%COMP%]{background:linear-gradient(135deg,#45b7d1,#96c93d)}.news-badge-app[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)}.news-badge-default[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.news-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;margin:25px auto 20px;color:#fff;font-size:2rem;box-shadow:0 8px 20px #667eea4d}.news-content[_ngcontent-%COMP%]{padding:0 25px 25px;text-align:center}.news-title[_ngcontent-%COMP%]{font-size:1.7rem;font-weight:800;color:#333;margin-bottom:10px}.news-description[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin-bottom:20px;font-size:1.3rem;font-weight:700}.news-date[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:5px;color:#2b2727;font-size:1rem;margin-bottom:15px}.news-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;text-decoration:none;font-weight:500;transition:all .3s ease}.news-link[_ngcontent-%COMP%]:hover{color:#764ba2;transform:translate(-3px)}.load-more-btn[_ngcontent-%COMP%]{display:block;margin:30px auto;padding:15px 40px;background:linear-gradient(to right,#89b9ec,#5fa8ed);color:#fff;border:none;border-radius:30px;font-size:1.6rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 20px #667eea4d;font-family:cairo}.load-more-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 25px #667eea66}.load-more-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.news-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:20px}.section-title[_ngcontent-%COMP%]{font-size:2rem}.news-card[_ngcontent-%COMP%]{margin-bottom:20px}.news-icon[_ngcontent-%COMP%]{width:70px;height:70px;font-size:1.8rem}.news-title[_ngcontent-%COMP%]{font-size:1.2rem}.section-subtitle[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.section-header[_ngcontent-%COMP%]{padding:20px}.section-title[_ngcontent-%COMP%]{font-size:1.8rem}.news-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:15px;gap:20px}.news-content[_ngcontent-%COMP%]{padding:0 20px 20px}.load-more-btn[_ngcontent-%COMP%]{padding:12px 30px;font-size:1rem}}']})}return n})(),LK=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"home-container"]],template:function(i,r){1&i&&(N(0,"div",0),bt(1,"app-hero")(2,"app-services")(3,"app-whats-new"),F())},dependencies:[TK,RK,OK],styles:[".home-container[_ngcontent-%COMP%]{font-family:Cairo,Arial,sans-serif;direction:rtl;overflow-x:hidden}"]})}return n})(),FK=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-who-we-are"]],decls:9,vars:0,consts:[[1,"who-we-are-container"],[1,"content-wrapper"],[1,"text-content"],[1,"title"],[1,"description"],[1,"image-content"],["src","assets/wallacadmic.png","alt","\u0637\u0627\u0644\u0628\u0627\u062a \u064a\u062a\u0639\u0627\u0648\u0646\u0646 \u0641\u064a \u0627\u0644\u062f\u0631\u0627\u0633\u0629"]],template:function(i,r){1&i&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),H(4,"\u0645\u0646 \u0646\u062d\u0646\u061f"),F(),N(5,"p",4),H(6," \u0646\u062d\u0646 \u0637\u0627\u0644\u0628\u0627\u062a \u0628\u0642\u0633\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u062c\u0627\u0645\u0639\u0629 \u0627\u0644\u0642\u0627\u0647\u0631\u0629. \u0646\u0624\u0645\u0646 \u0628\u0623\u0646 \u0627\u0644\u0645\u0643\u062a\u0628\u0629 \u0647\u064a \u0628\u0648\u0627\u0628\u0629 \u0644\u0639\u0648\u0627\u0644\u0645 \u0645\u0646 \u0627\u0644\u0625\u0628\u062f\u0627\u0639 \u0648\u0627\u0644\u0627\u0628\u062a\u0643\u0627\u0631\u060c \u062d\u064a\u062b \u0646\u0633\u0639\u0649 \u0645\u0646 \u062e\u0644\u0627\u0644 \u0645\u0646\u0635\u062a\u0646\u0627 \u0627\u0644\u0631\u0642\u0645\u064a\u0629 \u0625\u0644\u0649 \u0632\u064a\u0627\u062f\u0629 \u0648\u0639\u064a \u0627\u0644\u0637\u0644\u0627\u0628 \u0628\u062a\u062e\u0635\u0635 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0648\u062a\u0648\u0641\u064a\u0631 \u0645\u0635\u0627\u062f\u0631 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0647 \u0641\u064a \u0631\u062d\u0644\u062a\u0647 \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a\u0629 \u062f\u0627\u062e\u0644 \u0623\u0642\u0633\u0627\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0641\u064a \u0645\u062e\u062a\u0644\u0641 \u062c\u0627\u0645\u0639\u0627\u062a \u0645\u0635\u0631. \u0648\u0646\u0631\u064a\u062f \u0623\u064a\u0636\u0627\u064b \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0629 \u0641\u064a \u062a\u0637\u0648\u064a\u0631 \u0645\u0647\u0627\u0631\u0627\u062a \u0627\u0644\u062e\u0631\u064a\u062c\u064a\u0646 \u0644\u0645\u0648\u0627\u062c\u0647\u0629 \u062a\u062d\u062f\u064a\u0627\u062a \u0633\u0648\u0642 \u0627\u0644\u0639\u0645\u0644 "),F()(),N(7,"div",5),bt(8,"img",6),F()()())},styles:[".who-we-are-container[_ngcontent-%COMP%]{background:linear-gradient(to right,#e6f2ff,#5fa8ed);padding:20px;direction:rtl;font-family:Cairo,dubai}.content-wrapper[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:flex;flex-direction:row;align-items:center;gap:30px}.text-content[_ngcontent-%COMP%]{flex:1;margin-top:160px}.image-content[_ngcontent-%COMP%]{flex:1;margin-bottom:80px}.title[_ngcontent-%COMP%]{color:#fff;font-size:46px;margin-bottom:20px;font-weight:700}.description[_ngcontent-%COMP%]{color:#000;font-size:36px;line-height:1.6;text-align:justify}.image-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:8px;margin-right:300px}@media (max-width: 768px){.content-wrapper[_ngcontent-%COMP%]{flex-direction:column-reverse}.text-content[_ngcontent-%COMP%], .image-content[_ngcontent-%COMP%]{width:100%}}"]})}return n})();function kK(n,e){if(1&n&&(N(0,"div",4)(1,"div",5),bt(2,"img",6),F(),N(3,"div",7)(4,"h3",8),H(5),F(),N(6,"p",9),H(7),F(),N(8,"a",10),H(9,"\u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629"),F()()()),2&n){const t=e.$implicit;fe(2),Xe("src",t.image,ls)("alt",t.name),fe(3),Hn(t.name),fe(2),Hn(t.title),fe(),Xe("href",t.profileLink,ls)}}let UK=(()=>{class n{teamMembers=[{name:"\u0645\u0644\u0643 \u0647\u0627\u0646\u064a",title:"Web Developer",image:"assets/malak-hany.jpeg",profileLink:"/profile/3"},{name:"\u0625\u064a\u0645\u0627\u0646 \u0625\u0628\u0631\u0627\u0647\u064a\u0645",title:"Web Designer",image:"assets/eman-ibrahim.jpeg",profileLink:"/profile/4"},{name:"\u0631\u0648\u0627\u0646 \u0639\u0628\u062f \u0627\u0644\u0631\u0624\u0648\u0641",title:"Data Collector",image:"assets/rawan-abdelraof.jpeg",profileLink:"/profile/1"},{name:"\u0633\u0644\u0633\u0628\u064a\u0644 \u0633\u064a\u062f",title:"Content Writer",image:"assets/salsabil-mohamed.jpeg",profileLink:"/profile/2"}];static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-team"]],decls:5,vars:1,consts:[[1,"team-container"],[1,"team-title"],[1,"team-members-grid"],["class","team-member-card",4,"ngFor","ngForOf"],[1,"team-member-card"],[1,"profile-image-container"],[1,"profile-image",3,"src","alt"],[1,"member-info"],[1,"member-name"],[1,"member-title"],[1,"profile-link",3,"href"]],template:function(i,r){1&i&&(N(0,"div",0)(1,"h2",1),H(2,"\u0641\u0631\u064a\u0642 \u0627\u0644\u0639\u0645\u0644"),F(),N(3,"div",2),bn(4,kK,10,5,"div",3),F()()),2&i&&(fe(4),Xe("ngForOf",r.teamMembers))},dependencies:[Tr,Oo],styles:['.team-container[_ngcontent-%COMP%]{text-align:center;font-family:Cairo,sans-serif;direction:rtl;max-width:1400px;margin:0 auto;padding:4rem 1rem}.team-title[_ngcontent-%COMP%]{color:#2e4756;font-size:40px;margin-bottom:3rem;position:relative}.team-members-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:3rem;justify-content:center}.team-member-card[_ngcontent-%COMP%]{background-color:#f5f9ff;border-radius:1rem;padding:1.5rem;display:flex;flex-direction:column;align-items:center;box-shadow:0 3px 10px #0000000d;transition:transform .3s ease,box-shadow .3s ease}.team-member-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a}.profile-image-container[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;margin-bottom:1rem}.profile-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%;background-color:#fffcee}.member-info[_ngcontent-%COMP%]{text-align:center;width:100%}.member-name[_ngcontent-%COMP%]{color:#2e4756;font-size:26px;margin-bottom:.25rem}.member-title[_ngcontent-%COMP%]{color:#666;font-size:24px;margin-bottom:1rem}.profile-link[_ngcontent-%COMP%]{display:inline-block;color:#2e7bc4;text-decoration:none;font-size:22px;transition:color .2s ease;position:relative}.profile-link[_ngcontent-%COMP%]:hover{color:#1e5b9a}.profile-link[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:1px;bottom:-3px;left:0;background-color:#2e7bc4;transform:scaleX(0);transition:transform .3s ease}.profile-link[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}@media (max-width: 768px){.team-members-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}@media (max-width: 480px){.team-members-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.team-title[_ngcontent-%COMP%]{font-size:2rem}}']})}return n})();function BK(n,e){if(1&n&&(N(0,"div",4)(1,"h2"),H(2),F(),N(3,"p"),H(4),F()()),2&n){const t=e.$implicit;fe(2),Hn(t.title),fe(2),Hn(t.description)}}let VK=(()=>{class n{goals=[{title:"\u062a\u0639\u0644\u064a\u0645",description:"\u0646\u064f\u0628\u0633\u0637 \u0645\u0641\u0627\u0647\u064a\u0645 \u0639\u0644\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0648\u0646\u0639\u0631\u0636\u0647\u0627 \u0628\u0623\u0633\u0644\u0648\u0628 \u0648\u0627\u0636\u062d \u0648\u0633\u0647\u0644\u060c \u0644\u064a\u0635\u0644 \u0627\u0644\u0641\u0647\u0645 \u0644\u0643\u0644 \u0645\u0646 \u064a\u0631\u063a\u0628 \u0641\u064a \u0627\u0643\u062a\u0634\u0627\u0641 \u0627\u0644\u0645\u062c\u0627\u0644"},{title:"\u062a\u0631\u0642\u064a",description:"\u0646\u062f\u0639\u0645 \u0631\u062d\u0644\u062a\u0643 \u0627\u0644\u0645\u0647\u0646\u064a\u0629 \u0645\u0646 \u062e\u0644\u0627\u0644 \u0645\u062d\u062a\u0648\u0649 \u0645\u062a\u062e\u0635\u0635 \u064a\u0633\u0627\u0639\u062f\u0643 \u0639\u0644\u0649 \u0627\u0644\u062a\u0645\u064a\u0632 \u0641\u064a \u0633\u0648\u0642 \u0627\u0644\u0639\u0645\u0644 \u0648\u0628\u0646\u0627\u0621 \u0645\u0633\u062a\u0642\u0628\u0644 \u0646\u0627\u062c\u062d \u0641\u064a \u0627\u0644\u0645\u062c\u0627\u0644"},{title:"\u062a\u0637\u0648\u064a\u0631",description:"\u0646\u0648\u0641\u0631 \u0645\u0633\u0627\u0631\u0627\u062a \u062a\u0639\u0644\u0645 \u0630\u0627\u062a\u064a \u0648\u0623\u062f\u0648\u0627\u062a \u062a\u062f\u0631\u064a\u0628 \u062a\u0633\u0627\u0639\u062f \u0627\u0644\u0637\u0644\u0627\u0628 \u0648\u0627\u0644\u062e\u0631\u064a\u062c\u064a\u0646 \u0639\u0644\u0649 \u062a\u0637\u0648\u064a\u0631 \u0645\u0647\u0627\u0631\u0627\u062a\u0647\u0645 \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a\u0629 \u0648\u0627\u0644\u0645\u0647\u0646\u064a\u0629"},{title:"\u062a\u0639\u0632\u064a\u0632",description:"\u0646\u064f\u0639\u0632\u0632 \u0627\u0644\u0648\u0639\u064a \u0628\u0627\u0644\u062a\u062e\u0635\u0635 \u0645\u0646 \u062e\u0644\u0627\u0644 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0645\u0641\u0627\u0647\u064a\u0645 \u0627\u0644\u062e\u0627\u0637\u0626\u0629\u060c \u0648\u0634\u0631\u062d \u0623\u0647\u0645\u064a\u0629 \u0627\u0644\u0645\u062c\u0627\u0644 \u0641\u064a \u0627\u0644\u0639\u0635\u0631 \u0627\u0644\u0631\u0642\u0645\u064a \u0627\u0644\u062d\u062f\u064a\u062b"}];static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-goals"]],decls:6,vars:1,consts:[[1,"goals-container"],[1,"goals-header"],[1,"goals-grid"],["class","goal-card",4,"ngFor","ngForOf"],[1,"goal-card"]],template:function(i,r){1&i&&(N(0,"div",0)(1,"div",1)(2,"h1"),H(3,"\u0623\u0647\u062f\u0627\u0641\u0646\u0627"),F()(),N(4,"div",2),bn(5,BK,5,2,"div",3),F()()),2&i&&(fe(5),Xe("ngForOf",r.goals))},dependencies:[Tr,Oo],styles:['@import"https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap";.goals-container[_ngcontent-%COMP%]{direction:rtl;color:#fff;text-align:center;padding:2rem;position:relative;overflow:hidden;background-image:linear-gradient(#00003280,#00003280),url(/assets/librarywall.jpg);background-size:cover;background-position:center;min-height:500px;cursor:pointer}.goals-header[_ngcontent-%COMP%]{margin-bottom:3rem}.goals-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:65px;font-weight:700;position:relative;font-family:cairo}.goals-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:2rem;max-width:1200px;margin:0 auto}.goal-card[_ngcontent-%COMP%]{padding:1.5rem;background-color:#1d1d4b99;border-radius:8px;transition:transform .3s ease,background-color .3s ease}.goal-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);background-color:#000050cc}.goal-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:50px;font-weight:700;font-family:dubai}.goal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px;line-height:1.2;font-family:dubai}@media (max-width: 768px){.goals-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.goals-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.goal-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}']})}return n})(),zK=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-about"]],decls:3,vars:0,template:function(i,r){1&i&&bt(0,"app-who-we-are")(1,"app-team")(2,"app-goals")},dependencies:[FK,UK,VK],encapsulation:2})}return n})();function HK(n,e){if(1&n){const t=kd();N(0,"div",4),yt("click",function(){const r=_o(t).$implicit;return xo(ln().toggleCard(r.id))}),N(1,"div",5)(2,"div",6)(3,"div",7),bt(4,"img",8),F(),N(5,"h3",9),H(6),F()(),N(7,"div",10)(8,"p",11),H(9),F(),N(10,"a",12),yt("click",function(r){const s=_o(t).$implicit;return xo(ln().onReadMore(r,s))}),H(11),F()()()()}if(2&n){const t=e.$implicit,i=ln();si("flipped",t.id===i.flippedCardId),fe(4),Xe("src",t.imageUrl,ls)("alt",t.title),fe(2),Hn(t.title),fe(3),Hn(t.description),fe(),Xe("href",t.link,ls),fe(),Gn(" ",t.buttonText," ")}}let GK=(()=>{class n{flippedCardId=null;cards=[{id:1,imageUrl:"assets/endnote.png",title:"EndNote",description:"\u0623\u062f\u0627\u0629 \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0631\u0627\u062c\u0639 \u062a\u062a\u064a\u062d \u0627\u0644\u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0645\u0646 \u0642\u0648\u0627\u0639\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0648\u062a\u062e\u0635\u064a\u0635 \u0623\u0646\u0645\u0627\u0637 \u0627\u0644\u0627\u0633\u062a\u0634\u0647\u0627\u062f.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://endnote.com/"},{id:2,imageUrl:"assets/mendeley.png",title:"Mendeley",description:"\u0645\u062f\u064a\u0631 \u0645\u0631\u0627\u062c\u0639 \u0645\u062c\u0627\u0646\u064a \u064a\u0648\u0641\u0631 \u062d\u0641\u0638 \u0648\u062a\u0646\u0638\u064a\u0645 \u0645\u0644\u0641\u0627\u062a PDF \u0648\u0627\u0644\u062a\u0643\u0627\u0645\u0644 \u0645\u0639 Word.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://mendeley.com/"},{id:3,imageUrl:"assets/zotero.png",title:"Zotero",description:"\u0623\u062f\u0627\u0629 \u0645\u062c\u0627\u0646\u064a\u0629 \u0645\u0641\u062a\u0648\u062d\u0629 \u0627\u0644\u0645\u0635\u062f\u0631 \u062a\u062a\u064a\u062d \u062c\u0645\u0639 \u0648\u062a\u0646\u0638\u064a\u0645 \u0648\u062a\u0648\u0644\u064a\u062f \u0627\u0644\u0627\u0633\u062a\u0634\u0647\u0627\u062f\u0627\u062a \u0628\u0633\u0647\u0648\u0644\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://zotero.org//"},{id:4,imageUrl:"assets/refworks-.png",title:"RefWorks",description:"\u0623\u062f\u0627\u0629 \u0645\u0624\u0633\u0633\u064a\u0629 \u0644\u0625\u062f\u0627\u0631\u0629 \u0648\u062a\u0646\u0638\u064a\u0645 \u0627\u0644\u0645\u0631\u0627\u062c\u0639 \u0645\u0639 \u0645\u064a\u0632\u0627\u062a \u0644\u0644\u062a\u0639\u0627\u0648\u0646 \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://refworks.proquest.com/"},{id:5,imageUrl:"assets/citethisforme.png",title:"CiteThisForMe",description:"\u0645\u0648\u0644\u062f \u0645\u062c\u0627\u0646\u064a \u0644\u0644\u0627\u0633\u062a\u0634\u0647\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u0631\u062c\u0639\u064a\u0629 \u0628\u0623\u0646\u0645\u0627\u0637 \u0645\u062a\u0639\u062f\u062f\u0629 \u064a\u062f\u0648\u064a\u064b\u0627 \u0623\u0648 \u062a\u0644\u0642\u0627\u0626\u064a\u064b\u0627.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://www.citethisforme.com/"},{id:6,imageUrl:"assets/bibguru.png",title:"BibGuru",description:"\u0645\u0648\u0644\u062f \u0627\u0633\u062a\u0634\u0647\u0627\u062f \u0628\u0633\u064a\u0637 \u0648\u0633\u0631\u064a\u0639\u060c \u0645\u062b\u0627\u0644\u064a \u0644\u0644\u0637\u0644\u0627\u0628 \u0644\u0625\u0646\u0634\u0627\u0621 \u0628\u0628\u0644\u064a\u0648\u063a\u0631\u0627\u0641\u064a\u0627 \u062f\u0642\u064a\u0642\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://www.bibguru.com/"},{id:7,imageUrl:"assets/cition-machine.png",title:"Cition Machine",description:"\u0623\u062f\u0627\u0629 \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0631\u0627\u062c\u0639 \u0648\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0623\u0628\u062d\u0627\u062b \u0648\u0627\u0644\u0645\u0634\u0627\u0631\u064a\u0639 \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://www.citationmachine.net/"},{id:8,imageUrl:"assets/scriber.png",title:"Scriber",description:"\u0623\u062f\u0627\u0629 \u062a\u0639\u062a\u0645\u062f \u0639\u0644\u0649 \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064a \u0644\u062a\u0648\u0644\u064a\u062f \u0627\u0644\u0627\u0633\u062a\u0634\u0647\u0627\u062f\u0627\u062a \u0628\u062f\u0642\u0629 \u0648\u0633\u0631\u0639\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://www.scribbr.com/"}];trackByFn(t,i){return i.id}toggleCard(t){window.matchMedia("(hover: none) or (pointer: coarse)").matches&&(this.flippedCardId=this.flippedCardId===t?null:t)}onReadMore(t,i){t.stopPropagation(),console.log("Read more clicked for:",i.title)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-flip-card"]],decls:8,vars:2,consts:[[1,"title"],[1,"subtitle"],[1,"cards-container"],["class","flip-card",3,"flipped","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flip-card",3,"click"],[1,"flip-card-inner"],[1,"flip-card-front"],[1,"card-image"],[3,"src","alt"],[1,"card-title"],[1,"flip-card-back"],[1,"card-description"],["target","_blank","rel","noopener noreferrer",1,"read-more-button",3,"click","href"]],template:function(i,r){1&i&&(N(0,"div",0)(1,"h1"),H(2,"\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0623\u0633\u062a\u0634\u0647\u0627\u062f \u0627\u0644\u0645\u0631\u062c\u0639\u064a"),F()(),N(3,"div",1)(4,"h2"),H(5," \u0641\u064a \u0639\u0627\u0644\u0645 \u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a\u060c \u062a\u064f\u0639\u062f \u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0634\u0647\u0627\u062f \u0627\u0644\u0645\u0631\u062c\u0639\u064a \u0645\u0646 \u0627\u0644\u0648\u0633\u0627\u0626\u0644 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0627\u0644\u062a\u064a \u062a\u0633\u0627\u0639\u062f \u0627\u0644\u0628\u0627\u062d\u062b\u064a\u0646 \u0648\u0627\u0644\u0637\u0644\u0627\u0628 \u0639\u0644\u0649 \u062a\u0646\u0638\u064a\u0645 \u0627\u0644\u0645\u0631\u0627\u062c\u0639 \u0628\u0637\u0631\u064a\u0642\u0629 \u0623\u0643\u0627\u062f\u064a\u0645\u064a\u0629 \u0648\u062f\u0642\u064a\u0642\u0629\u060c \u062a\u0648\u0641\u0631 \u0647\u0630\u0647 \u0627\u0644\u0623\u062f\u0648\u0627\u062a \u0625\u0645\u0643\u0627\u0646\u064a\u0627\u062a \u0645\u062a\u0642\u062f\u0645\u0629 \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u060c \u0648\u0625\u0646\u0634\u0627\u0621 \u0628\u0628\u0644\u064a\u0648\u063a\u0631\u0627\u0641\u064a\u0627\u062a \u062a\u0644\u0642\u0627\u0626\u064a\u0629\u060c \u0648\u0627\u0644\u062a\u0643\u0627\u0645\u0644 \u0645\u0639 \u0628\u0631\u0627\u0645\u062c \u0645\u0639\u0627\u0644\u062c\u0629 \u0627\u0644\u0646\u0635\u0648\u0635\u060c \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629\u060c \u0646\u0633\u062a\u0639\u0631\u0636 \u0623\u0628\u0631\u0632 \u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0634\u0647\u0627\u062f \u0627\u0644\u0645\u0631\u062c\u0639\u064a \u0645\u0639 \u0646\u0628\u0630\u0629 \u0645\u062e\u062a\u0635\u0631\u0629 \u0639\u0646 \u0643\u0644 \u0623\u062f\u0627\u0629 \u0648\u0631\u0627\u0628\u0637 \u0645\u0628\u0627\u0634\u0631 \u0644\u0645\u0648\u0642\u0639\u0647\u0627 \u0627\u0644\u0631\u0633\u0645\u064a. "),F()(),N(6,"div",2),bn(7,HK,12,8,"div",3),F()),2&i&&(fe(7),Xe("ngForOf",r.cards)("ngForTrackBy",r.trackByFn))},dependencies:[Tr,Oo],styles:[".title{text-align:center;margin-top:40px}.title h1{font-size:36px;color:#2c3e50;display:inline-block;padding-bottom:10px}.subtitle{max-width:1700px;margin:30px auto;padding:20px;font-family:Cairo,sans-serif;background-color:#f9f9f9;border-right:6px solid #3498db;direction:rtl;line-height:2;color:#333;box-shadow:0 0 10px #0000000d;border-radius:10px}.subtitle h2{font-size:27px;font-weight:400}.cards-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:99px;padding:70px;max-width:1500px;margin:0 auto}.flip-card{background-color:transparent;width:125%;height:270px;perspective:1000px;cursor:pointer}.flip-card-inner{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s ease-in-out;transform-style:preserve-3d}@media (hover: hover) and (pointer: fine){.flip-card:hover .flip-card-inner{transform:rotateY(180deg)}.flip-card.flipped .flip-card-inner{transform:rotateY(0)}}@media (hover: none) or (pointer: coarse){.flip-card.flipped .flip-card-inner{transform:rotateY(180deg)}}.flip-card-front,.flip-card-back{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:16px;box-shadow:0 4px 20px #00000014;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:24px;box-sizing:border-box;transition:box-shadow .3s ease}.flip-card-front{background:linear-gradient(135deg,#f8fafc,#f1f5f9);color:#334155}.flip-card-back{background:linear-gradient(135deg,#fff,#f8fafc);color:#475569;transform:rotateY(180deg)}.flip-card:hover .flip-card-front,.flip-card:hover .flip-card-back{box-shadow:0 8px 30px #0000001f}.card-image{height:90px;display:flex;justify-content:center;align-items:center;padding:10px;margin-bottom:10px}.card-image img{max-width:95px;height:99px;object-fit:contain;border-radius:8px}.card-title{font-size:30px;font-weight:550;margin:0;color:#1e293b;line-height:1.3;font-family:Calibri}.card-description{font-size:25px;line-height:1.6;margin:0 0 20px;color:#333;text-align:center;font-weight:600}.read-more-button{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:25px;font-weight:500;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;font-family:cairo;text-decoration:none;display:inline-block}.read-more-button:hover{background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f666}.read-more-button:active{transform:translateY(0)}@media (max-width: 768px){.cards-container{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}.flip-card{height:220px}.card-image{height:40px!important;justify-content:flex-end!important;padding:10px!important}.card-image img{max-width:100px!important;height:100px!important;object-fit:contain!important}.card-title{font-size:18px}.card-description{font-size:14px}.flip-card-front,.flip-card-back{padding:20px}}@media (max-width: 480px){.cards-container{grid-template-columns:1fr}.flip-card{height:200px}.card-title{font-size:16px}.card-description{font-size:13px}}\n"],encapsulation:2})}return n})();function WK(n,e){if(1&n){const t=kd();N(0,"div",4),yt("click",function(){const r=_o(t).$implicit;return xo(ln().toggleCard(r.id))}),N(1,"div",5)(2,"div",6)(3,"div",7),bt(4,"img",8),F(),N(5,"h3",9),H(6),F()(),N(7,"div",10)(8,"p",11),H(9),F(),N(10,"a",12),yt("click",function(r){const s=_o(t).$implicit;return xo(ln().onReadMore(r,s))}),H(11),F()()()()}if(2&n){const t=e.$implicit,i=ln();si("flipped",t.id===i.flippedCardId),fe(4),Xe("src",t.imageUrl,ls)("alt",t.title),fe(2),Hn(t.title),fe(3),Hn(t.description),fe(),Xe("href",t.link,ls),fe(),Gn(" ",t.buttonText," ")}}let jK=(()=>{class n{flippedCardId=null;cards=[{id:1,imageUrl:"assets/aitools/connected-papers-icon.png",title:"Connected Papers",description:"\u0623\u062f\u0627\u0629 \u0644\u0639\u0631\u0636 \u062e\u0631\u0627\u0626\u0637 \u0628\u062d\u062b \u062a\u064f\u0638\u0647\u0631 \u0627\u0644\u0631\u0648\u0627\u0628\u0637 \u0628\u064a\u0646 \u0627\u0644\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0628\u062d\u062b\u064a\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://www.connectedpapers.com/"},{id:2,imageUrl:"assets/aitools/research-rabbit.png",title:"Research Rabbit",description:"\u0645\u0646\u0635\u0629 \u0644\u0627\u0633\u062a\u0643\u0634\u0627\u0641 \u0627\u0644\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0628\u062d\u062b\u064a\u0629 \u0645\u0646 \u062e\u0644\u0627\u0644 \u0627\u0644\u0634\u0628\u0643\u0627\u062a \u0627\u0644\u0645\u0639\u0631\u0641\u064a\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://www.researchrabbit.ai/"},{id:3,imageUrl:"assets/aitools/storm.jpg",title:"Storm",description:"\u0623\u062f\u0627\u0629 \u0645\u0646 \u062c\u0627\u0645\u0639\u0629 \u0633\u062a\u0627\u0646\u0641\u0648\u0631\u062f \u0644\u062a\u062d\u0644\u064a\u0644 \u0623\u062d\u062f\u062b \u0627\u0644\u0623\u0628\u062d\u0627\u062b \u0627\u0644\u0637\u0628\u064a\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://storm.genie.stanford.edu/"},{id:4,imageUrl:"assets/aitools/notebooklm.png",title:"Notebook LM",description:"\u0645\u0641\u0643\u0631\u0629 \u0645\u062f\u0639\u0648\u0645\u0629 \u0628\u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064a \u0644\u0641\u0647\u0645 \u0648\u062a\u0646\u0638\u064a\u0645 \u0627\u0644\u0645\u0635\u0627\u062f\u0631.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://notebooklm.google/"},{id:5,imageUrl:"assets/aitools/scispace.png",title:"SciSpace",description:"\u0645\u0633\u0627\u0639\u062f \u0644\u0641\u0647\u0645 \u0648\u062a\u0641\u0633\u064a\u0631 \u0627\u0644\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0628\u062d\u062b\u064a\u0629 \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 AI.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://scispace.com/"},{id:6,imageUrl:"assets/aitools/moxie.png",title:"Moxie Learn",description:"\u0645\u0646\u0635\u0629 \u062a\u0639\u0644\u0645 \u062a\u0641\u0627\u0639\u0644\u064a \u0645\u062f\u0639\u0648\u0645\u0629 \u0628\u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064a \u0644\u0644\u0645\u0633\u0627\u0639\u062f\u0629 \u0641\u064a \u0627\u0644\u0628\u062d\u062b \u0648\u0627\u0644\u0641\u0647\u0645.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://moxielearn.ai/"},{id:7,imageUrl:"assets/aitools/elicit.jpg",title:"Elicit",description:"\u0645\u0633\u0627\u0639\u062f \u0628\u062d\u062b \u0639\u0644\u0645\u064a \u064a\u0639\u062a\u0645\u062f \u0639\u0644\u0649 AI \u0644\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0623\u0648\u0631\u0627\u0642 \u0630\u0627\u062a \u0627\u0644\u0635\u0644\u0629.",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://elicit.com/"},{id:8,imageUrl:"assets/aitools/litmaps.png",title:"Litmaps",description:"\u0623\u062f\u0627\u0629 \u0644\u062a\u062a\u0628\u0639 \u0627\u0644\u0623\u062f\u0628\u064a\u0627\u062a \u0627\u0644\u0639\u0644\u0645\u064a\u0629 \u0648\u0628\u0646\u0627\u0621 \u062e\u0631\u0627\u0626\u0637 \u0645\u0639\u0631\u0641\u064a\u0629 \u0645\u0631\u0626\u064a\u0629",buttonText:"\u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062f\u0627\u0629",link:"https://www.litmaps.com/"}];trackByFn(t,i){return i.id}toggleCard(t){window.matchMedia("(hover: none) or (pointer: coarse)").matches&&(this.flippedCardId=this.flippedCardId===t?null:t)}onReadMore(t,i){t.stopPropagation(),console.log("Read more clicked for:",i.title)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-ai-tools"]],decls:8,vars:2,consts:[[1,"title"],[1,"subtitle"],[1,"cards-container"],["class","flip-card",3,"flipped","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flip-card",3,"click"],[1,"flip-card-inner"],[1,"flip-card-front"],[1,"card-image"],[3,"src","alt"],[1,"card-title"],[1,"flip-card-back"],[1,"card-description"],["target","_blank","rel","noopener noreferrer",1,"read-more-button",3,"click","href"]],template:function(i,r){1&i&&(N(0,"div",0)(1,"h1"),H(2,"\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0623\u0635\u0637\u0646\u0627\u0639\u064a"),F()(),N(3,"div",1)(4,"h2"),H(5," \u0641\u064a \u0639\u0635\u0631 \u062a\u0633\u0627\u0631\u0639 \u0627\u0644\u0645\u0639\u0631\u0641\u0629 \u0648\u062a\u0637\u0648\u0631 \u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0639\u0644\u0645\u064a\u060c \u0623\u0635\u0628\u062d \u0645\u0646 \u0627\u0644\u0636\u0631\u0648\u0631\u064a \u0627\u0644\u0625\u0644\u0645\u0627\u0645 \u0628\u0627\u0644\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0630\u0643\u064a\u0629 \u0627\u0644\u062a\u064a \u062a\u0639\u0632\u0632 \u0645\u0646 \u0643\u0641\u0627\u0621\u0629 \u0627\u0644\u0628\u0627\u062d\u062b \u0648\u062a\u064f\u064a\u0633\u0631 \u0639\u0644\u064a\u0647 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0645\u0635\u0627\u062f\u0631 \u0648\u0627\u0644\u0645\u0631\u0627\u062c\u0639 \u0627\u0644\u0639\u0644\u0645\u064a\u0629.\n\u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629\u060c \u0646\u0633\u062a\u0639\u0631\u0636 \u0645\u062c\u0645\u0648\u0639\u0629 \u0645\u062e\u062a\u0627\u0631\u0629 \u0645\u0646 \u0623\u0628\u0631\u0632 \u0627\u0644\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0631\u0642\u0645\u064a\u0629 \u0627\u0644\u0645\u0633\u0627\u0639\u062f\u0629 \u0641\u064a \u0631\u062d\u0644\u062a\u0643 \u0627\u0644\u0628\u062d\u062b\u064a\u0629\u060c \u0645\u062b\u0644 \u0623\u062f\u0648\u0627\u062a \u0627\u0633\u062a\u0643\u0634\u0627\u0641 \u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0628\u064a\u0646 \u0627\u0644\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0644\u0645\u064a\u0629\u060c \u0648\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0627\u062a\u060c \u0648\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0623\u062f\u0628\u064a\u0627\u062a\u060c \u0648\u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0630\u0643\u064a \u0627\u0644\u0645\u062f\u0639\u0648\u0645 \u0628\u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064a\u062a\u060c \u0635\u0641\u0651\u062d \u0627\u0644\u0628\u0637\u0627\u0642\u0627\u062a \u0627\u0644\u062a\u0627\u0644\u064a\u0629 \u0644\u0644\u062a\u0639\u0631\u0641 \u0639\u0644\u0649 \u0643\u0644 \u0623\u062f\u0627\u0629 \u0648\u0627\u0643\u062a\u0634\u0627\u0641 \u0643\u064a\u0641 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u064f\u062d\u062f\u062b \u0641\u0631\u0642\u064b\u0627 \u0641\u064a \u062a\u062c\u0631\u0628\u062a\u0643 \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a\u0629. "),F()(),N(6,"div",2),bn(7,WK,12,8,"div",3),F()),2&i&&(fe(7),Xe("ngForOf",r.cards)("ngForTrackBy",r.trackByFn))},dependencies:[Tr,Oo],styles:[".title{text-align:center;margin-top:40px}.title h1{font-size:36px;color:#2c3e50;display:inline-block;padding-bottom:10px}.subtitle{max-width:1700px;margin:30px auto;padding:20px;font-family:Cairo,sans-serif;background-color:#f9f9f9;border-right:6px solid #3498db;direction:rtl;line-height:2;color:#333;box-shadow:0 0 10px #0000000d;border-radius:10px}.subtitle h2{font-size:27px;font-weight:400}.cards-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:99px;padding:70px;max-width:1500px;margin:0 auto}.flip-card{background-color:transparent;width:125%;height:270px;perspective:1000px;cursor:pointer}.flip-card-inner{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s ease-in-out;transform-style:preserve-3d}@media (hover: hover) and (pointer: fine){.flip-card:hover .flip-card-inner{transform:rotateY(180deg)}.flip-card.flipped .flip-card-inner{transform:rotateY(0)}}@media (hover: none) or (pointer: coarse){.flip-card.flipped .flip-card-inner{transform:rotateY(180deg)}}.flip-card-front,.flip-card-back{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:16px;box-shadow:0 4px 20px #00000014;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:24px;box-sizing:border-box;transition:box-shadow .3s ease}.flip-card-front{background:linear-gradient(135deg,#f8fafc,#f1f5f9);color:#334155}.flip-card-back{background:linear-gradient(135deg,#fff,#f8fafc);color:#475569;transform:rotateY(180deg)}.flip-card:hover .flip-card-front,.flip-card:hover .flip-card-back{box-shadow:0 8px 30px #0000001f}.card-image{height:90px;display:flex;justify-content:center;align-items:center;padding:10px;margin-bottom:10px}.card-image img{max-width:95px;height:99px;object-fit:contain;border-radius:8px}.card-title{font-size:30px;font-weight:550;margin:0;color:#1e293b;line-height:1.3;font-family:Calibri}.card-description{font-size:25px;line-height:1.6;margin:0 0 20px;color:#333;text-align:center;font-weight:600}.read-more-button{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:25px;font-weight:500;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px;font-family:cairo;text-decoration:none;display:inline-block}.read-more-button:hover{background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f666}.read-more-button:active{transform:translateY(0)}@media (max-width: 768px){.cards-container{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;padding:16px}.flip-card{height:220px}.card-image{height:40px!important;justify-content:flex-end!important;padding:10px!important}.card-image img{max-width:100px!important;height:100px!important;object-fit:contain!important}.card-title{font-size:18px}.card-description{font-size:14px}.flip-card-front,.flip-card-back{padding:20px}}@media (max-width: 480px){.cards-container{grid-template-columns:1fr}.flip-card{height:200px}.card-title{font-size:16px}.card-description{font-size:13px}}\n"],encapsulation:2})}return n})();const zo=0,qi=1,Ms=2,Ya=100,ZK=101,KK=102,eJ=200,tJ=201,nJ=202,iJ=203,UM=204,BM=205,rJ=206,sJ=207,oJ=208,aJ=209,cJ=210,lJ=211,uJ=212,dJ=213,hJ=214,VM=0,zM=1,HM=2,jl=3,GM=4,WM=5,jM=6,$M=7,Im=1e3,Zr=1001,Rm=1002,di=1003,iL=1004,Nh=1005,Qn=1006,Pm=1007,Ys=1008,Zs=1009,Oh=1012,jo=1014,hr=1015,Lh=1016,Fh=1020,Xi=1023,kh=1026,Uh=1027,Om=33776,Lm=33777,Fm=33778,km=33779,Um=36492,fr="srgb",Xl="srgb-linear",zm="linear",qt="srgb",Yl=7680,AJ=512,IJ=513,RJ=514,gL=515,PJ=516,NJ=517,OJ=518,LJ=519,ws=2e3;class Ks{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return void 0!==i&&void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){const i=this._listeners;if(void 0===i)return;const r=i[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const i=t[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const hi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Ja=Math.PI/180,Zl=180/Math.PI;function pr(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(hi[255&n]+hi[n>>8&255]+hi[n>>16&255]+hi[n>>24&255]+"-"+hi[255&e]+hi[e>>8&255]+"-"+hi[e>>16&15|64]+hi[e>>24&255]+"-"+hi[63&t|128]+hi[t>>8&255]+"-"+hi[t>>16&255]+hi[t>>24&255]+hi[255&i]+hi[i>>8&255]+hi[i>>16&255]+hi[i>>24&255]).toLowerCase()}function st(n,e,t){return Math.max(e,Math.min(t,n))}function Bh(n,e,t){return(1-t)*n+t*e}function Di(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function at(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const JJ_DEG2RAD=Ja;class K{constructor(e=0,t=0){K.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=st(this.x,e.x,t.x),this.y=st(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=st(this.x,e,t),this.y=st(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(st(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(st(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ct{constructor(e,t,i,r,s,o,a,c,l){ct.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],f=i[2],h=i[5],p=i[8],v=r[0],m=r[3],g=r[6],y=r[1],_=r[4],x=r[7],D=r[2],C=r[5],A=r[8];return s[0]=o*v+a*y+c*D,s[3]=o*m+a*_+c*C,s[6]=o*g+a*x+c*A,s[1]=l*v+u*y+d*D,s[4]=l*m+u*_+d*C,s[7]=l*g+u*x+d*A,s[2]=f*v+h*y+p*D,s[5]=f*m+h*_+p*C,s[8]=f*g+h*x+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,f=a*c-u*s,h=l*s-o*c,p=t*d+i*f+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=d*v,e[1]=(r*l-u*i)*v,e[2]=(a*i-r*o)*v,e[3]=f*v,e[4]=(u*t-r*c)*v,e[5]=(r*s-a*t)*v,e[6]=h*v,e[7]=(i*c-l*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Iw.makeScale(e,t)),this}rotate(e){return this.premultiply(Iw.makeRotation(-e)),this}translate(e,t){return this.premultiply(Iw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Iw=new ct;function yL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Vh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function eQ(){const n=Vh("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const _L={};function Wm(n){n in _L||(_L[n]=!0,console.warn(n))}const xL=(new ct).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),bL=(new ct).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function rQ(){const n={enabled:!0,workingColorSpace:Xl,spaces:{},convert:function(r,s,o){return!1===this.enabled||s===o||!s||!o||(this.spaces[s].transfer===qt&&(r.r=Js(r.r),r.g=Js(r.g),r.b=Js(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===qt&&(r.r=Jl(r.r),r.g=Jl(r.g),r.b=Jl(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return""===r?zm:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Xl]:{primaries:e,whitePoint:i,transfer:zm,toXYZ:xL,fromXYZ:bL,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:fr},outputColorSpaceConfig:{drawingBufferColorSpace:fr}},[fr]:{primaries:e,whitePoint:i,transfer:qt,toXYZ:xL,fromXYZ:bL,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:fr}}}),n}const Dt=rQ();function Js(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Jl(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Ql;class sQ{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{void 0===Ql&&(Ql=Vh("canvas")),Ql.width=e.width,Ql.height=e.height;const r=Ql.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Ql}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Vh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Js(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Js(t[i]/255)):Js(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let oQ=0;class Qa{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:oQ++}),this.uuid=pr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(Rw(r[o].isDataTexture?r[o].image:r[o]))}else s=Rw(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Rw(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?sQ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aQ=0,Yi=(()=>{class n extends Ks{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Zr,s=Zr,o=Qn,a=Ys,c=Xi,l=Zs,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aQ++}),this.uuid=pr(),this.name="",this.source=new Qa(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new K(0,0),this.repeat=new K(1,1),this.center=new K(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ct,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Zr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Zr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class At{constructor(e=0,t=0,i=0,r=1){At.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],d=c[8],f=c[1],h=c[5],p=c[9],v=c[2],m=c[6],g=c[10];if(Math.abs(u-f)<.01&&Math.abs(d-v)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+v)<.1&&Math.abs(p+m)<.1&&Math.abs(l+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(l+1)/2,x=(h+1)/2,D=(g+1)/2,C=(u+f)/4,A=(d+v)/4,I=(p+m)/4;return _>x&&_>D?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=C/i,s=A/i):x>D?x<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(x),i=C/r,s=I/r):D<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(D),i=A/s,r=I/s),this.set(i,r,s,t),this}let y=Math.sqrt((m-p)*(m-p)+(d-v)*(d-v)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(d-v)/y,this.z=(f-u)/y,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=st(this.x,e.x,t.x),this.y=st(this.y,e.y,t.y),this.z=st(this.z,e.z,t.z),this.w=st(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=st(this.x,e,t),this.y=st(this.y,e,t),this.z=st(this.z,e,t),this.w=st(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(st(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Pw extends Ks{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new At(0,0,e,t),this.scissorTest=!1,this.viewport=new At(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Qn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Yi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Qa(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Qs extends Pw{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class jm extends Yi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=di,this.minFilter=di,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Nw extends Yi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=di,this.minFilter=di,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ti{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3];const f=s[o+0],h=s[o+1],p=s[o+2],v=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=f,e[t+1]=h,e[t+2]=p,void(e[t+3]=v);if(d!==v||c!==f||l!==h||u!==p){let m=1-a;const g=c*f+l*h+u*p+d*v,y=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const D=Math.sqrt(_),C=Math.atan2(D,g*y);m=Math.sin(m*C)/D,a=Math.sin(a*C)/D}const x=a*y;if(c=c*m+f*x,l=l*m+h*x,u=u*m+p*x,d=d*m+v*x,m===1-a){const D=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=D,l*=D,u*=D,d*=D}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],f=s[o+1],h=s[o+2],p=s[o+3];return e[t]=a*p+u*d+c*h-l*f,e[t+1]=c*p+u*f+l*d-a*h,e[t+2]=l*p+u*h+a*f-c*d,e[t+3]=u*p-a*d-c*f-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),f=c(i/2),h=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=f*u*d+l*h*p,this._y=l*h*d-f*u*p,this._z=l*u*p+f*h*d,this._w=l*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+l*h*p,this._y=l*h*d-f*u*p,this._z=l*u*p-f*h*d,this._w=l*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-l*h*p,this._y=l*h*d+f*u*p,this._z=l*u*p+f*h*d,this._w=l*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-l*h*p,this._y=l*h*d+f*u*p,this._z=l*u*p-f*h*d,this._w=l*u*d+f*h*p;break;case"YZX":this._x=f*u*d+l*h*p,this._y=l*h*d+f*u*p,this._z=l*u*p-f*h*d,this._w=l*u*d-f*h*p;break;case"XZY":this._x=f*u*d-l*h*p,this._y=l*h*d-f*u*p,this._z=l*u*p+f*h*d,this._w=l*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],f=i+a+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-c)*h,this._y=(s-l)*h,this._z=(o-r)*h}else if(i>a&&i>d){const h=2*Math.sqrt(1+i-a-d);this._w=(u-c)/h,this._x=.25*h,this._y=(r+o)/h,this._z=(s+l)/h}else if(a>d){const h=2*Math.sqrt(1+a-i-d);this._w=(s-l)/h,this._x=(r+o)/h,this._y=.25*h,this._z=(c+u)/h}else{const h=2*Math.sqrt(1+d-i-a);this._w=(o-r)/h,this._x=(s+l)/h,this._y=(c+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(st(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const h=1-t;return this._w=h*o+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,f=Math.sin(t*u)/l;return this._w=o*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class T{constructor(e=0,t=0,i=0){T.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ML.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ML.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+c*l+o*d-a*u,this.y=i+c*u+a*l-s*d,this.z=r+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=st(this.x,e.x,t.x),this.y=st(this.y,e.y,t.y),this.z=st(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=st(this.x,e,t),this.y=st(this.y,e,t),this.z=st(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(st(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ow.copy(this).projectOnVector(e),this.sub(Ow)}reflect(e){return this.sub(Ow.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(st(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ow=new T,ML=new Ti;class Zi{constructor(e=new T(1/0,1/0,1/0),t=new T(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Kr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Kr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Kr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,Kr):Kr.fromBufferAttribute(s,o),Kr.applyMatrix4(e.matrixWorld),this.expandByPoint(Kr);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),$m.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),$m.copy(i.boundingBox)),$m.applyMatrix4(e.matrixWorld),this.union($m)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Kr),Kr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zh),qm.subVectors(this.max,zh),eu.subVectors(e.a,zh),tu.subVectors(e.b,zh),nu.subVectors(e.c,zh),qo.subVectors(tu,eu),Xo.subVectors(nu,tu),ec.subVectors(eu,nu);let t=[0,-qo.z,qo.y,0,-Xo.z,Xo.y,0,-ec.z,ec.y,qo.z,0,-qo.x,Xo.z,0,-Xo.x,ec.z,0,-ec.x,-qo.y,qo.x,0,-Xo.y,Xo.x,0,-ec.y,ec.x,0];return!(!Lw(t,eu,tu,nu,qm)||(t=[1,0,0,0,1,0,0,0,1],!Lw(t,eu,tu,nu,qm)))&&(Xm.crossVectors(qo,Xo),t=[Xm.x,Xm.y,Xm.z],Lw(t,eu,tu,nu,qm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Kr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Kr).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(eo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),eo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),eo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),eo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),eo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),eo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),eo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),eo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(eo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const eo=[new T,new T,new T,new T,new T,new T,new T,new T],Kr=new T,$m=new Zi,eu=new T,tu=new T,nu=new T,qo=new T,Xo=new T,ec=new T,zh=new T,qm=new T,Xm=new T,tc=new T;function Lw(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){tc.fromArray(n,s);const a=r.x*Math.abs(tc.x)+r.y*Math.abs(tc.y)+r.z*Math.abs(tc.z),c=e.dot(tc),l=t.dot(tc),u=i.dot(tc);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const cQ=new Zi,Hh=new T,Fw=new T;class Ai{constructor(e=new T,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):cQ.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hh.subVectors(e,this.center);const t=Hh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Hh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Fw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hh.copy(e.center).add(Fw)),this.expandByPoint(Hh.copy(e.center).sub(Fw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const to=new T,kw=new T,Ym=new T,Yo=new T,Uw=new T,Zm=new T,Bw=new T;class iu{constructor(e=new T,t=new T(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,to)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=to.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(to.copy(this.origin).addScaledVector(this.direction,t),to.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){kw.copy(e).add(t).multiplyScalar(.5),Ym.copy(t).sub(e).normalize(),Yo.copy(this.origin).sub(kw);const s=.5*e.distanceTo(t),o=-this.direction.dot(Ym),a=Yo.dot(this.direction),c=-Yo.dot(Ym),l=Yo.lengthSq(),u=Math.abs(1-o*o);let d,f,h,p;if(u>0)if(d=o*c-a,f=o*a-c,p=s*u,d>=0)if(f>=-p)if(f<=p){const v=1/u;d*=v,f*=v,h=d*(d+o*f+2*a)+f*(o*d+f+2*c)+l}else f=s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*c)+l;else f=-s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*c)+l;else f<=-p?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-c),s),h=-d*d+f*(f+2*c)+l):f<=p?(d=0,f=Math.min(Math.max(-s,-c),s),h=f*(f+2*c)+l):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-c),s),h=-d*d+f*(f+2*c)+l);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(kw).addScaledVector(Ym,f),h}intersectSphere(e,t){to.subVectors(e.center,this.origin);const i=to.dot(this.direction),r=to.dot(to)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return l>=0?(i=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(i=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,to)}intersectTriangle(e,t,i,r,s){Uw.subVectors(t,e),Zm.subVectors(i,e),Bw.crossVectors(Uw,Zm);let a,o=this.direction.dot(Bw);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Yo.subVectors(this.origin,e);const c=a*this.direction.dot(Zm.crossVectors(Yo,Zm));if(c<0)return null;const l=a*this.direction.dot(Uw.cross(Yo));if(l<0||c+l>o)return null;const u=-a*Yo.dot(Bw);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Qe{constructor(e,t,i,r,s,o,a,c,l,u,d,f,h,p,v,m){Qe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l,u,d,f,h,p,v,m)}set(e,t,i,r,s,o,a,c,l,u,d,f,h,p,v,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=c,g[2]=l,g[6]=u,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=v,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Qe).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ru.setFromMatrixColumn(e,0).length(),s=1/ru.setFromMatrixColumn(e,1).length(),o=1/ru.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const f=o*u,h=o*d,p=a*u,v=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=h+p*l,t[5]=f-v*l,t[9]=-a*c,t[2]=v-f*l,t[6]=p+h*l,t[10]=o*c}else if("YXZ"===e.order){const f=c*u,h=c*d,p=l*u,v=l*d;t[0]=f+v*a,t[4]=p*a-h,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=h*a-p,t[6]=v+f*a,t[10]=o*c}else if("ZXY"===e.order){const f=c*u,h=c*d,p=l*u,v=l*d;t[0]=f-v*a,t[4]=-o*d,t[8]=p+h*a,t[1]=h+p*a,t[5]=o*u,t[9]=v-f*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const f=o*u,h=o*d,p=a*u,v=a*d;t[0]=c*u,t[4]=p*l-h,t[8]=f*l+v,t[1]=c*d,t[5]=v*l+f,t[9]=h*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const f=o*c,h=o*l,p=a*c,v=a*l;t[0]=c*u,t[4]=v-f*d,t[8]=p*d+h,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=h*d+p,t[10]=f-v*d}else if("XZY"===e.order){const f=o*c,h=o*l,p=a*c,v=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=f*d+v,t[5]=o*u,t[9]=h*d-p,t[2]=p*d-h,t[6]=a*u,t[10]=v*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(lQ,e,uQ)}lookAt(e,t,i){const r=this.elements;return gr.subVectors(e,t),0===gr.lengthSq()&&(gr.z=1),gr.normalize(),Zo.crossVectors(i,gr),0===Zo.lengthSq()&&(1===Math.abs(i.z)?gr.x+=1e-4:gr.z+=1e-4,gr.normalize(),Zo.crossVectors(i,gr)),Zo.normalize(),Km.crossVectors(gr,Zo),r[0]=Zo.x,r[4]=Km.x,r[8]=gr.x,r[1]=Zo.y,r[5]=Km.y,r[9]=gr.y,r[2]=Zo.z,r[6]=Km.z,r[10]=gr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],f=i[9],h=i[13],p=i[2],v=i[6],m=i[10],g=i[14],y=i[3],_=i[7],x=i[11],D=i[15],C=r[0],A=r[4],I=r[8],w=r[12],M=r[1],R=r[5],W=r[9],V=r[13],X=r[2],re=r[6],$=r[10],ue=r[14],q=r[3],ve=r[7],De=r[11],Oe=r[15];return s[0]=o*C+a*M+c*X+l*q,s[4]=o*A+a*R+c*re+l*ve,s[8]=o*I+a*W+c*$+l*De,s[12]=o*w+a*V+c*ue+l*Oe,s[1]=u*C+d*M+f*X+h*q,s[5]=u*A+d*R+f*re+h*ve,s[9]=u*I+d*W+f*$+h*De,s[13]=u*w+d*V+f*ue+h*Oe,s[2]=p*C+v*M+m*X+g*q,s[6]=p*A+v*R+m*re+g*ve,s[10]=p*I+v*W+m*$+g*De,s[14]=p*w+v*V+m*ue+g*Oe,s[3]=y*C+_*M+x*X+D*q,s[7]=y*A+_*R+x*re+D*ve,s[11]=y*I+_*W+x*$+D*De,s[15]=y*w+_*V+x*ue+D*Oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],f=e[10],h=e[14];return e[3]*(+s*c*d-r*l*d-s*a*f+i*l*f+r*a*h-i*c*h)+e[7]*(+t*c*h-t*l*f+s*o*f-r*o*h+r*l*u-s*c*u)+e[11]*(+t*l*d-t*a*h-s*o*d+i*o*h+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*d+t*a*f+r*o*d-i*o*f+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],v=e[13],m=e[14],g=e[15],y=d*m*l-v*f*l+v*c*h-a*m*h-d*c*g+a*f*g,_=p*f*l-u*m*l-p*c*h+o*m*h+u*c*g-o*f*g,x=u*v*l-p*d*l+p*a*h-o*v*h-u*a*g+o*d*g,D=p*d*c-u*v*c-p*a*f+o*v*f+u*a*m-o*d*m,C=t*y+i*_+r*x+s*D;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/C;return e[0]=y*A,e[1]=(v*f*s-d*m*s-v*r*h+i*m*h+d*r*g-i*f*g)*A,e[2]=(a*m*s-v*c*s+v*r*l-i*m*l-a*r*g+i*c*g)*A,e[3]=(d*c*s-a*f*s-d*r*l+i*f*l+a*r*h-i*c*h)*A,e[4]=_*A,e[5]=(u*m*s-p*f*s+p*r*h-t*m*h-u*r*g+t*f*g)*A,e[6]=(p*c*s-o*m*s-p*r*l+t*m*l+o*r*g-t*c*g)*A,e[7]=(o*f*s-u*c*s+u*r*l-t*f*l-o*r*h+t*c*h)*A,e[8]=x*A,e[9]=(p*d*s-u*v*s-p*i*h+t*v*h+u*i*g-t*d*g)*A,e[10]=(o*v*s-p*a*s+p*i*l-t*v*l-o*i*g+t*a*g)*A,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*h-t*a*h)*A,e[12]=D*A,e[13]=(u*v*r-p*d*r+p*i*f-t*v*f-u*i*m+t*d*m)*A,e[14]=(p*a*r-o*v*r-p*i*c+t*v*c+o*i*m-t*a*m)*A,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*f+t*a*f)*A,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,f=s*l,h=s*u,p=s*d,v=o*u,m=o*d,g=a*d,y=c*l,_=c*u,x=c*d,D=i.x,C=i.y,A=i.z;return r[0]=(1-(v+g))*D,r[1]=(h+x)*D,r[2]=(p-_)*D,r[3]=0,r[4]=(h-x)*C,r[5]=(1-(f+g))*C,r[6]=(m+y)*C,r[7]=0,r[8]=(p+_)*A,r[9]=(m-y)*A,r[10]=(1-(f+v))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=ru.set(r[0],r[1],r[2]).length();const o=ru.set(r[4],r[5],r[6]).length(),a=ru.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Jr.copy(this);const l=1/s,u=1/o,d=1/a;return Jr.elements[0]*=l,Jr.elements[1]*=l,Jr.elements[2]*=l,Jr.elements[4]*=u,Jr.elements[5]*=u,Jr.elements[6]*=u,Jr.elements[8]*=d,Jr.elements[9]*=d,Jr.elements[10]*=d,t.setFromRotationMatrix(Jr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=ws){const c=this.elements,l=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),f=(i+r)/(i-r);let h,p;if(a===ws)h=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);h=-o/(o-s),p=-o*s/(o-s)}return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=h,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=ws){const c=this.elements,l=1/(t-e),u=1/(i-r),d=1/(o-s),f=(t+e)*l,h=(i+r)*u;let p,v;if(a===ws)p=(o+s)*d,v=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,v=-1*d}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-h,c[2]=0,c[6]=0,c[10]=v,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const ru=new T,Jr=new Qe,lQ=new T(0,0,0),uQ=new T(1,1,1),Zo=new T,Km=new T,gr=new T,wL=new Qe,SL=new Ti;let no=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],f=s[2],h=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(st(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-st(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(st(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-st(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(st(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-st(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return wL.makeRotationFromQuaternion(t),this.setFromRotationMatrix(wL,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return SL.setFromEuler(this),this.setFromQuaternion(SL,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class Vw{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let dQ=0;const CL=new T,su=new Ti,io=new Qe,Jm=new T,Gh=new T,hQ=new T,fQ=new Ti,EL=new T(1,0,0),DL=new T(0,1,0),TL=new T(0,0,1),AL={type:"added"},pQ={type:"removed"},ou={type:"childadded",child:null},zw={type:"childremoved",child:null};let sn=(()=>{class n extends Ks{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:dQ++}),this.uuid=pr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new T,i=new no,r=new Ti,s=new T(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Qe},normalMatrix:{value:new ct}}),this.matrix=new Qe,this.matrixWorld=new Qe,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Vw,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return su.setFromAxisAngle(t,i),this.quaternion.multiply(su),this}rotateOnWorldAxis(t,i){return su.setFromAxisAngle(t,i),this.quaternion.premultiply(su),this}rotateX(t){return this.rotateOnAxis(EL,t)}rotateY(t){return this.rotateOnAxis(DL,t)}rotateZ(t){return this.rotateOnAxis(TL,t)}translateOnAxis(t,i){return CL.copy(t).applyQuaternion(this.quaternion),this.position.add(CL.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(EL,t)}translateY(t){return this.translateOnAxis(DL,t)}translateZ(t){return this.translateOnAxis(TL,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(io.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Jm.copy(t):Jm.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Gh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?io.lookAt(Gh,Jm,this.up):io.lookAt(Jm,Gh,this.up),this.quaternion.setFromRotationMatrix(io),s&&(io.extractRotation(s.matrixWorld),su.setFromRotationMatrix(io),this.quaternion.premultiply(su.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(AL),ou.child=t,this.dispatchEvent(ou),ou.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(pQ),zw.child=t,this.dispatchEvent(zw),zw.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),io.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),io.multiply(t.parent.matrixWorld)),t.applyMatrix4(io),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(AL),ou.child=t,this.dispatchEvent(ou),ou.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gh,t,hQ),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gh,fQ,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),f=a(t.shapes),h=a(t.skeletons),p=a(t.animations),v=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),v.length>0&&(r.nodes=v)}return r.object=s,r;function a(c){const l=[];for(const u in c){const d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new T(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Qr=new T,ro=new T,Hw=new T,so=new T,au=new T,cu=new T,IL=new T,Gw=new T,Ww=new T,jw=new T,$w=new At,qw=new At,Xw=new At;class mr{constructor(e=new T,t=new T,i=new T){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Qr.subVectors(e,t),r.cross(Qr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Qr.subVectors(r,t),ro.subVectors(i,t),Hw.subVectors(e,t);const o=Qr.dot(Qr),a=Qr.dot(ro),c=Qr.dot(Hw),l=ro.dot(ro),u=ro.dot(Hw),d=o*l-a*a;if(0===d)return s.set(0,0,0),null;const f=1/d,h=(l*c-a*u)*f,p=(o*u-a*c)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,so)&&so.x>=0&&so.y>=0&&so.x+so.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return null===this.getBarycoord(e,t,i,r,so)?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,so.x),c.addScaledVector(o,so.y),c.addScaledVector(a,so.z),c)}static getInterpolatedAttribute(e,t,i,r,s,o){return $w.setScalar(0),qw.setScalar(0),Xw.setScalar(0),$w.fromBufferAttribute(e,t),qw.fromBufferAttribute(e,i),Xw.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector($w,s.x),o.addScaledVector(qw,s.y),o.addScaledVector(Xw,s.z),o}static isFrontFacing(e,t,i,r){return Qr.subVectors(i,t),ro.subVectors(e,t),Qr.cross(ro).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qr.subVectors(this.c,this.b),ro.subVectors(this.a,this.b),.5*Qr.cross(ro).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return mr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return mr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return mr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return mr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return mr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;au.subVectors(r,i),cu.subVectors(s,i),Gw.subVectors(e,i);const c=au.dot(Gw),l=cu.dot(Gw);if(c<=0&&l<=0)return t.copy(i);Ww.subVectors(e,r);const u=au.dot(Ww),d=cu.dot(Ww);if(u>=0&&d<=u)return t.copy(r);const f=c*d-u*l;if(f<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(au,o);jw.subVectors(e,s);const h=au.dot(jw),p=cu.dot(jw);if(p>=0&&h<=p)return t.copy(s);const v=h*l-c*p;if(v<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(cu,a);const m=u*p-h*d;if(m<=0&&d-u>=0&&h-p>=0)return IL.subVectors(s,r),a=(d-u)/(d-u+(h-p)),t.copy(r).addScaledVector(IL,a);const g=1/(m+v+f);return o=v*g,a=f*g,t.copy(i).addScaledVector(au,o).addScaledVector(cu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const RL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ko={h:0,s:0,l:0},Qm={h:0,s:0,l:0};function Yw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Ee{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=fr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Dt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Dt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Dt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Dt.workingColorSpace){if(e=function Aw(n,e){return(n%e+e)%e}(e,1),t=st(t,0,1),i=st(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Yw(o,s,e+1/3),this.g=Yw(o,s,e),this.b=Yw(o,s,e-1/3)}return Dt.toWorkingColorSpace(this,r),this}setStyle(e,t=fr){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=fr){const i=RL[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Js(e.r),this.g=Js(e.g),this.b=Js(e.b),this}copyLinearToSRGB(e){return this.r=Jl(e.r),this.g=Jl(e.g),this.b=Jl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=fr){return Dt.fromWorkingColorSpace(fi.copy(this),e),65536*Math.round(st(255*fi.r,0,255))+256*Math.round(st(255*fi.g,0,255))+Math.round(st(255*fi.b,0,255))}getHexString(e=fr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Dt.workingColorSpace){Dt.fromWorkingColorSpace(fi.copy(this),t);const i=fi.r,r=fi.g,s=fi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Dt.workingColorSpace){return Dt.fromWorkingColorSpace(fi.copy(this),t),e.r=fi.r,e.g=fi.g,e.b=fi.b,e}getStyle(e=fr){Dt.fromWorkingColorSpace(fi.copy(this),e);const t=fi.r,i=fi.g,r=fi.b;return e!==fr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(Ko),this.setHSL(Ko.h+e,Ko.s+t,Ko.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ko),e.getHSL(Qm);const i=Bh(Ko.h,Qm.h,t),r=Bh(Ko.s,Qm.s,t),s=Bh(Ko.l,Qm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const fi=new Ee;Ee.NAMES=RL;let gQ=0;class Ii extends Ks{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gQ++}),this.uuid=pr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ee(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yl,this.stencilZFail=Yl,this.stencilZPass=Yl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Yl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Yl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Yl&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Jo extends Ii{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new no,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ln=new T,e0=new K;let vQ=0;class Jt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:vQ++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRanges=[],this.gpuType=hr,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)e0.fromBufferAttribute(this,t),e0.applyMatrix3(e),this.setXY(t,e0.x,e0.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix3(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix4(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyNormalMatrix(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.transformDirection(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Di(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=at(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Di(t,this.array)),t}setX(e,t){return this.normalized&&(t=at(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Di(t,this.array)),t}setY(e,t){return this.normalized&&(t=at(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Di(t,this.array)),t}setZ(e,t){return this.normalized&&(t=at(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Di(t,this.array)),t}setW(e,t){return this.normalized&&(t=at(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=at(t,this.array),i=at(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=at(t,this.array),i=at(i,this.array),r=at(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=at(t,this.array),i=at(i,this.array),r=at(r,this.array),s=at(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class PL extends Jt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class NL extends Jt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Fe extends Jt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let yQ=0;const Ir=new Qe,Zw=new sn,lu=new T,vr=new Zi,jh=new Zi,ei=new T;class dt extends Ks{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yQ++}),this.uuid=pr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(yL(e)?NL:PL)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new ct).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ir.makeRotationFromQuaternion(e),this.applyMatrix4(Ir),this}rotateX(e){return Ir.makeRotationX(e),this.applyMatrix4(Ir),this}rotateY(e){return Ir.makeRotationY(e),this.applyMatrix4(Ir),this}rotateZ(e){return Ir.makeRotationZ(e),this.applyMatrix4(Ir),this}translate(e,t,i){return Ir.makeTranslation(e,t,i),this.applyMatrix4(Ir),this}scale(e,t,i){return Ir.makeScale(e,t,i),this.applyMatrix4(Ir),this}lookAt(e){return Zw.lookAt(e),Zw.updateMatrix(),this.applyMatrix4(Zw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lu).negate(),this.translate(lu.x,lu.y,lu.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Fe(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Zi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new T(-1/0,-1/0,-1/0),new T(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)vr.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(ei.addVectors(this.boundingBox.min,vr.min),this.boundingBox.expandByPoint(ei),ei.addVectors(this.boundingBox.max,vr.max),this.boundingBox.expandByPoint(ei)):(this.boundingBox.expandByPoint(vr.min),this.boundingBox.expandByPoint(vr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ai);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new T,1/0);if(e){const i=this.boundingSphere.center;if(vr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)jh.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(ei.addVectors(vr.min,jh.min),vr.expandByPoint(ei),ei.addVectors(vr.max,jh.max),vr.expandByPoint(ei)):(vr.expandByPoint(jh.min),vr.expandByPoint(jh.max));vr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ei.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ei));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)ei.fromBufferAttribute(a,l),c&&(lu.fromBufferAttribute(e,l),ei.add(lu)),r=Math.max(r,i.distanceToSquared(ei))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Jt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let I=0;I<i.count;I++)a[I]=new T,c[I]=new T;const l=new T,u=new T,d=new T,f=new K,h=new K,p=new K,v=new T,m=new T;function g(I,w,M){l.fromBufferAttribute(i,I),u.fromBufferAttribute(i,w),d.fromBufferAttribute(i,M),f.fromBufferAttribute(s,I),h.fromBufferAttribute(s,w),p.fromBufferAttribute(s,M),u.sub(l),d.sub(l),h.sub(f),p.sub(f);const R=1/(h.x*p.y-p.x*h.y);isFinite(R)&&(v.copy(u).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(R),m.copy(d).multiplyScalar(h.x).addScaledVector(u,-p.x).multiplyScalar(R),a[I].add(v),a[w].add(v),a[M].add(v),c[I].add(m),c[w].add(m),c[M].add(m))}let y=this.groups;0===y.length&&(y=[{start:0,count:e.count}]);for(let I=0,w=y.length;I<w;++I){const M=y[I],R=M.start;for(let V=R,X=R+M.count;V<X;V+=3)g(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const _=new T,x=new T,D=new T,C=new T;function A(I){D.fromBufferAttribute(r,I),C.copy(D);const w=a[I];_.copy(w),_.sub(D.multiplyScalar(D.dot(w))).normalize(),x.crossVectors(C,w);const R=x.dot(c[I])<0?-1:1;o.setXYZW(I,_.x,_.y,_.z,R)}for(let I=0,w=y.length;I<w;++I){const M=y[I],R=M.start;for(let V=R,X=R+M.count;V<X;V+=3)A(e.getX(V+0)),A(e.getX(V+1)),A(e.getX(V+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Jt(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new T,s=new T,o=new T,a=new T,c=new T,l=new T,u=new T,d=new T;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),v=e.getX(f+1),m=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,v),l.fromBufferAttribute(i,m),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(v,c.x,c.y,c.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ei.fromBufferAttribute(e,t),ei.normalize(),e.setXYZ(t,ei.x,ei.y,ei.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,d=a.normalized,f=new l.constructor(c.length*u);let h=0,p=0;for(let v=0,m=c.length;v<m;v++){h=a.isInterleavedBufferAttribute?c[v]*a.data.stride+a.offset:c[v]*u;for(let g=0;g<u;g++)f[p++]=l[h++]}return new Jt(f,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new dt,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){const h=e(l[u],i);c.push(h)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let d=0,f=l.length;d<f;d++)u.push(l[d].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone());const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],d=s[l];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const OL=new Qe,nc=new iu,t0=new Ai,LL=new T,n0=new T,r0=new T,s0=new T,Kw=new T,o0=new T,FL=new T,a0=new T;class An extends sn{constructor(e=new dt,t=new Jo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){o0.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c];0!==u&&(Kw.fromBufferAttribute(s[c],e),o0.addScaledVector(o?Kw:Kw.sub(t),u))}t.add(o0)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),t0.copy(i.boundingSphere),t0.applyMatrix4(s),nc.copy(e.ray).recast(e.near),(!1!==t0.containsPoint(nc.origin)||!(null===nc.intersectSphere(t0,LL)||nc.origin.distanceToSquared(LL)>(e.far-e.near)**2))&&(OL.copy(s).invert(),nc.copy(e.ray).applyMatrix4(OL),(null===i.boundingBox||!1!==nc.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,nc)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const m=f[p],g=o[m.materialIndex];for(let x=Math.max(m.start,h.start),D=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));x<D;x+=3)r=c0(this,g,e,i,l,u,d,a.getX(x),a.getX(x+1),a.getX(x+2)),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,h.start),g=Math.min(a.count,h.start+h.count);m<g;m+=3)r=c0(this,o,e,i,l,u,d,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==c)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const m=f[p],g=o[m.materialIndex];for(let x=Math.max(m.start,h.start),D=Math.min(c.count,Math.min(m.start+m.count,h.start+h.count));x<D;x+=3)r=c0(this,g,e,i,l,u,d,x,x+1,x+2),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,h.start),g=Math.min(c.count,h.start+h.count);m<g;m+=3)r=c0(this,o,e,i,l,u,d,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}function c0(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,n0),n.getVertexPosition(c,r0),n.getVertexPosition(l,s0);const u=function _Q(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===c)return null;a0.copy(a),a0.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(a0);return l<t.near||l>t.far?null:{distance:l,point:a0.clone(),object:n}}(n,e,t,i,n0,r0,s0,FL);if(u){const d=new T;mr.getBarycoord(FL,n0,r0,s0,d),r&&(u.uv=mr.getInterpolatedAttribute(r,a,c,l,d,new K)),s&&(u.uv1=mr.getInterpolatedAttribute(s,a,c,l,d,new K)),o&&(u.normal=mr.getInterpolatedAttribute(o,a,c,l,d,new T),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:c,c:l,normal:new T,materialIndex:0};mr.getNormal(n0,r0,s0,f.normal),u.face=f,u.barycoord=d}return u}class uu extends dt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],d=[];let f=0,h=0;function p(v,m,g,y,_,x,D,C,A,I,w){const M=x/A,R=D/I,W=x/2,V=D/2,X=C/2,re=A+1,$=I+1;let ue=0,q=0;const ve=new T;for(let De=0;De<$;De++){const Oe=De*R-V;for(let lt=0;lt<re;lt++)ve[v]=(lt*M-W)*y,ve[m]=Oe*_,ve[g]=X,l.push(ve.x,ve.y,ve.z),ve[v]=0,ve[m]=0,ve[g]=C>0?1:-1,u.push(ve.x,ve.y,ve.z),d.push(lt/A),d.push(1-De/I),ue+=1}for(let De=0;De<I;De++)for(let Oe=0;Oe<A;Oe++){const Ft=f+Oe+re*(De+1),ie=f+(Oe+1)+re*(De+1),pe=f+(Oe+1)+re*De;c.push(f+Oe+re*De,Ft,pe),c.push(Ft,ie,pe),q+=6}a.addGroup(h,q,w),h+=q,f+=ue}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Fe(l,3)),this.setAttribute("normal",new Fe(u,3)),this.setAttribute("uv",new Fe(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function du(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Ri(n){const e={};for(let t=0;t<n.length;t++){const i=du(n[t]);for(const r in i)e[r]=i[r]}return e}function kL(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:Dt.workingColorSpace}const bQ={clone:du,merge:Ri};class Ss extends Ii{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=du(e.uniforms),this.uniformsGroups=function xQ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Jw extends sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qe,this.projectionMatrix=new Qe,this.projectionMatrixInverse=new Qe,this.coordinateSystem=ws}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Qo=new T,UL=new K,BL=new K;class oi extends Jw{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Zl*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ja*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Zl*Math.atan(Math.tan(.5*Ja*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Qo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z),Qo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z)}getViewSize(e,t){return this.getViewBounds(e,UL,BL),t.subVectors(BL,UL)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ja*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class SQ extends sn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new oi(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new oi(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new oi(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new oi(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new oi(-90,1,e,t);c.layers=this.layers,this.add(c);const l=new oi(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(const l of t)this.remove(l);if(e===ws)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class l0 extends Yi{constructor(e=[],t=301,i,r,s,o,a,c,l,u){super(e,t,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class CQ extends Qs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new l0([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Qn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new uu(5,5,5),s=new Ss({name:"CubemapFromEquirect",uniforms:du(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new An(r,s),a=t.minFilter;return t.minFilter===Ys&&(t.minFilter=Qn),new SQ(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class $h extends sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const EQ={type:"move"};class Qw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new $h,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new $h,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new T,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new T),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new $h,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new T,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new T),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const v of e.hand.values()){const m=t.getJointPose(v,i),g=this._getHandJoint(l,v);null!==m&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=null!==m}const f=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),h=.02,p=.005;l.inputState.pinching&&f>h+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=h-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(EQ)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new $h;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class VL extends sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new no,this.environmentIntensity=1,this.environmentRotation=new no,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const aS=new T,OQ=new T,LQ=new ct;class ea{constructor(e=new T(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=aS.subVectors(i,t).cross(OQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(aS),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||LQ.getNormalMatrix(e),r=this.coplanarPoint(aS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ic=new Ai,m0=new T;class v0{constructor(e=new ea,t=new ea,i=new ea,r=new ea,s=new ea,o=new ea){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ws){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],c=r[3],l=r[4],u=r[5],d=r[6],f=r[7],h=r[8],p=r[9],v=r[10],m=r[11],g=r[12],y=r[13],_=r[14],x=r[15];if(i[0].setComponents(c-s,f-l,m-h,x-g).normalize(),i[1].setComponents(c+s,f+l,m+h,x+g).normalize(),i[2].setComponents(c+o,f+u,m+p,x+y).normalize(),i[3].setComponents(c-o,f-u,m-p,x-y).normalize(),i[4].setComponents(c-a,f-d,m-v,x-_).normalize(),t===ws)i[5].setComponents(c+a,f+d,m+v,x+_).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,v,_).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),ic.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),ic.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ic)}intersectsSprite(e){return ic.center.set(0,0,0),ic.radius=.7071067811865476,ic.applyMatrix4(e.matrixWorld),this.intersectsSphere(ic)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(m0.x=r.normal.x>0?e.max.x:e.min.x,m0.y=r.normal.y>0?e.max.y:e.min.y,m0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(m0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Ni extends Ii{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ee(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const x0=new T,b0=new T,nF=new Qe,ef=new iu,M0=new Ai,dS=new T,iF=new T;class ta extends sn{constructor(e=new dt,t=new Ni){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)x0.fromBufferAttribute(t,r-1),b0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=x0.distanceTo(b0);e.setAttribute("lineDistance",new Fe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),M0.copy(i.boundingSphere),M0.applyMatrix4(r),M0.radius+=s,!1===e.ray.intersectsSphere(M0))return;nF.copy(r).invert(),ef.copy(e.ray).applyMatrix4(nF);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=i.index,f=i.attributes.position;if(null!==u){const h=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let v=h,m=p-1;v<m;v+=l){const g=u.getX(v),y=u.getX(v+1),_=w0(this,e,ef,c,g,y,v);_&&t.push(_)}if(this.isLineLoop){const v=u.getX(p-1),m=u.getX(h),g=w0(this,e,ef,c,v,m,p-1);g&&t.push(g)}}else{const h=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let v=h,m=p-1;v<m;v+=l){const g=w0(this,e,ef,c,v,v+1,v);g&&t.push(g)}if(this.isLineLoop){const v=w0(this,e,ef,c,p-1,h,p-1);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function w0(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(x0.fromBufferAttribute(a,r),b0.fromBufferAttribute(a,s),t.distanceSqToSegment(x0,b0,dS,iF)>i)return;dS.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(dS);return l<e.near||l>e.far?void 0:{distance:l,point:iF.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}class lF extends Yi{constructor(e,t,i=jo,r,s,o,a=di,c=di,l,u=kh){if(u!==kh&&u!==Uh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Qa(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Mu extends dt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,f=t/c,h=[],p=[],v=[],m=[];for(let g=0;g<u;g++){const y=g*f-o;for(let _=0;_<l;_++)p.push(_*d-s,-y,0),v.push(0,0,1),m.push(_/a),m.push(1-g/c)}for(let g=0;g<c;g++)for(let y=0;y<a;y++){const x=y+l*(g+1),D=y+1+l*(g+1),C=y+1+l*g;h.push(y+l*g,x,C),h.push(x,D,C)}this.setIndex(h),this.setAttribute("position",new Fe(p,3)),this.setAttribute("normal",new Fe(v,3)),this.setAttribute("uv",new Fe(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.width,e.height,e.widthSegments,e.heightSegments)}}class uf extends dt{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let l=0;const u=[],d=new T,f=new T,h=[],p=[],v=[],m=[];for(let g=0;g<=i;g++){const y=[],_=g/i;let x=0;0===g&&0===o?x=.5/t:g===i&&c===Math.PI&&(x=-.5/t);for(let D=0;D<=t;D++){const C=D/t;d.x=-e*Math.cos(r+C*s)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(r+C*s)*Math.sin(o+_*a),p.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),m.push(C+x,1-_),y.push(l++)}u.push(y)}for(let g=0;g<i;g++)for(let y=0;y<t;y++){const x=u[g][y],D=u[g+1][y],C=u[g+1][y+1];(0!==g||o>0)&&h.push(u[g][y+1],x,C),(g!==i-1||c<Math.PI)&&h.push(x,D,C)}this.setIndex(h),this.setAttribute("position",new Fe(p,3)),this.setAttribute("normal",new Fe(v,3)),this.setAttribute("uv",new Fe(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class EF extends Ii{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ee(16777215),this.specular=new Ee(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new K(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new no,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DF extends Ii{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class TF extends Ii{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function cc(n,e){return n&&n.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n):n}class F0{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kee extends F0{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(i-t)/(r-t),v=p*p,m=v*p,g=-f*m+2*f*v-f*p,y=(1+f)*m+(-1.5-2*f)*v+(-.5+f)*p+1,_=(-1-h)*m+(1.5+h)*v+.5*p,x=h*m-h*v;for(let D=0;D!==a;++D)s[D]=g*o[u+D]+y*o[l+D]+_*o[c+D]+x*o[d+D];return s}}class RF extends F0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let f=0;f!==a;++f)s[f]=o[l+f]*d+o[c+f]*u;return s}}class Uee extends F0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class es{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cc(t,this.TimeBufferType),this.values=cc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:cc(e.times,Array),values:cc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Uee(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new RF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kee(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&function AF(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const d=a*i,f=d-i,h=d+i;for(let p=0;p!==i;++p){const v=t[d+p];if(v!==t[f+p]||v!==t[h+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const d=a*i,f=o*i;for(let h=0;h!==i;++h)t[f+h]=t[d+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}es.prototype.ValueTypeName="",es.prototype.TimeBufferType=Float32Array,es.prototype.ValueBufferType=Float32Array,es.prototype.DefaultInterpolation=2301;class wu extends es{constructor(e,t,i){super(e,t,i)}}wu.prototype.ValueTypeName="bool",wu.prototype.ValueBufferType=Array,wu.prototype.DefaultInterpolation=2300,wu.prototype.InterpolantFactoryMethodLinear=void 0,wu.prototype.InterpolantFactoryMethodSmooth=void 0;(class PF extends es{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="color";(class k0 extends es{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="number";class Bee extends F0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)Ti.slerpFlat(s,0,o,l-a,o,l,c);return s}}class U0 extends es{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new Bee(this.times,this.values,this.getValueSize(),e)}}U0.prototype.ValueTypeName="quaternion",U0.prototype.InterpolantFactoryMethodSmooth=void 0;class Su extends es{constructor(e,t,i){super(e,t,i)}}Su.prototype.ValueTypeName="string",Su.prototype.ValueBufferType=Array,Su.prototype.DefaultInterpolation=2300,Su.prototype.InterpolantFactoryMethodLinear=void 0,Su.prototype.InterpolantFactoryMethodSmooth=void 0;(class B0 extends es{constructor(e,t,i,r){super(e,t,i,r)}}).prototype.ValueTypeName="vector";const na={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class NF{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){const d=l.indexOf(u);return-1!==d&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=l.length;d<f;d+=2){const h=l[d],p=l[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const Hee=new NF;let Rr=(()=>{class n{constructor(t){this.manager=void 0!==t?t:Hee,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();Error;class z0 extends Rr{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=na.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Vh("img");function c(){u(),na.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class OF extends Rr{constructor(e){super(e)}load(e,t,i,r){const s=new Yi,o=new z0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class lc extends sn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ee(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const FS=new Qe,LF=new T,FF=new T;class kS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new K(512,512),this.map=null,this.mapPass=null,this.matrix=new Qe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new v0,this._frameExtents=new K(1,1),this._viewportCount=1,this._viewports=[new At(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;LF.setFromMatrixPosition(e.matrixWorld),t.position.copy(LF),FF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(FF),t.updateMatrixWorld(),FS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(FS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class BS extends Jw{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Yee extends kS{constructor(){super(new BS(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class UF extends lc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(sn.DEFAULT_UP),this.updateMatrix(),this.target=new sn,this.shadow=new Yee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class BF extends lc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class nte extends oi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}const zS="\\[\\]\\.:\\/",cte=new RegExp("["+zS+"]","g"),HS="[^"+zS+"]",lte="[^"+zS.replace("\\.","")+"]",pte=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",HS)+/(WCOD+)?/.source.replace("WCOD",lte)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",HS)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",HS)+"$"),gte=["material","materials","bones","map"];class mte{constructor(e,t,i){const r=i||on.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let on=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(cte,"")}static parseTrackName(t){const i=pte.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==gte.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?c=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=mte,n})();on.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},on.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},on.prototype.GetterByBindingType=[on.prototype._getValue_direct,on.prototype._getValue_array,on.prototype._getValue_arrayElement,on.prototype._getValue_toArray],on.prototype.SetterByBindingTypeAndVersioning=[[on.prototype._setValue_direct,on.prototype._setValue_direct_setNeedsUpdate,on.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[on.prototype._setValue_array,on.prototype._setValue_array_setNeedsUpdate,on.prototype._setValue_array_setMatrixWorldNeedsUpdate],[on.prototype._setValue_arrayElement,on.prototype._setValue_arrayElement_setNeedsUpdate,on.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[on.prototype._setValue_fromArray,on.prototype._setValue_fromArray_setNeedsUpdate,on.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);const ZF=new Qe;class KF{constructor(e,t,i=0,r=1/0){this.ray=new iu(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Vw,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return ZF.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ZF),this}intersectObject(e,t=!0,i=[]){return GS(e,this,i,t),i.sort(JF),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)GS(e[r],this,i,t);return i.sort(JF),i}}function JF(n,e){return n.distance-e.distance}function GS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&!1===n.raycast(e,t)&&(r=!1),!0===r&&!0===i){const s=n.children;for(let o=0,a=s.length;o<a;o++)GS(s[o],e,t,!0)}}class QF{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=st(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(st(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class bte extends Ks{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e?(null!==this.domElement&&this.disconnect(),this.domElement=e):console.warn("THREE.Controls: connect() now requires an element.")}disconnect(){}dispose(){}update(){}}function $S(n,e,t,i){const r=function Cte(n){switch(n){case Zs:case 1010:return{byteLength:1,components:1};case Oh:case 1011:case Lh:return{byteLength:2,components:1};case 1017:case 1018:return{byteLength:2,components:4};case jo:case 1013:case hr:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}(i);switch(t){case 1021:case 1024:return n*e;case 1025:return n*e*2;case 1028:case 1029:return n*e/r.components*r.byteLength;case 1030:case 1031:return n*e*2/r.components*r.byteLength;case 1022:return n*e*3/r.components*r.byteLength;case Xi:case 1033:return n*e*4/r.components*r.byteLength;case Om:case Lm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Fm:case km:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case 35841:case 35843:return Math.max(n,16)*Math.max(e,8)/4;case 35840:case 35842:return Math.max(n,8)*Math.max(e,8)/2;case 36196:case 37492:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case 37496:case 37808:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case 37809:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case 37810:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case 37811:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case 37812:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case 37813:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case 37814:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case 37815:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case 37816:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case 37817:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case 37818:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case 37819:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case 37820:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case 37821:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Um:case 36494:case 36495:return Math.ceil(n/4)*Math.ceil(e/4)*16;case 36283:case 36284:return Math.ceil(n/4)*Math.ceil(e/4)*8;case 36285:case 36286:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function uk(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Ete(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))},update:function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);return void((!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const l=e.get(a);if(void 0===l)e.set(a,function t(a,c){const l=a.array,u=a.usage,d=l.byteLength,f=n.createBuffer();let h;if(n.bindBuffer(c,f),n.bufferData(c,l,u),a.onUploadCallback(),l instanceof Float32Array)h=n.FLOAT;else if(l instanceof Uint16Array)h=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(l instanceof Int16Array)h=n.SHORT;else if(l instanceof Uint32Array)h=n.UNSIGNED_INT;else if(l instanceof Int32Array)h=n.INT;else if(l instanceof Int8Array)h=n.BYTE;else if(l instanceof Uint8Array)h=n.UNSIGNED_BYTE;else{if(!(l instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);h=n.UNSIGNED_BYTE}return{buffer:f,type:h,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,c,l){const u=c.array,d=c.updateRanges;if(n.bindBuffer(l,a),0===d.length)n.bufferSubData(l,0,u);else{d.sort((h,p)=>h.start-p.start);let f=0;for(let h=1;h<d.length;h++){const p=d[f],v=d[h];v.start<=p.start+p.count+1?p.count=Math.max(p.count,v.start+v.count-p.start):(++f,d[f]=v)}d.length=f+1;for(let h=0,p=d.length;h<p;h++){const v=d[h];n.bufferSubData(l,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}c.clearUpdateRanges()}c.onUploadCallback()})(l.buffer,a,c),l.version=a.version}}}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"175"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="175");const ft={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},xe={common:{diffuse:{value:new Ee(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ct},alphaMap:{value:null},alphaMapTransform:{value:new ct},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ct}},envmap:{envMap:{value:null},envMapRotation:{value:new ct},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ct}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ct}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ct},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ct},normalScale:{value:new K(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ct},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ct}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ct}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ct}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ee(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ee(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ct},alphaTest:{value:0},uvTransform:{value:new ct}},sprite:{diffuse:{value:new Ee(16777215)},opacity:{value:1},center:{value:new K(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ct},alphaMap:{value:null},alphaMapTransform:{value:new ct},alphaTest:{value:0}}},Es={basic:{uniforms:Ri([xe.common,xe.specularmap,xe.envmap,xe.aomap,xe.lightmap,xe.fog]),vertexShader:ft.meshbasic_vert,fragmentShader:ft.meshbasic_frag},lambert:{uniforms:Ri([xe.common,xe.specularmap,xe.envmap,xe.aomap,xe.lightmap,xe.emissivemap,xe.bumpmap,xe.normalmap,xe.displacementmap,xe.fog,xe.lights,{emissive:{value:new Ee(0)}}]),vertexShader:ft.meshlambert_vert,fragmentShader:ft.meshlambert_frag},phong:{uniforms:Ri([xe.common,xe.specularmap,xe.envmap,xe.aomap,xe.lightmap,xe.emissivemap,xe.bumpmap,xe.normalmap,xe.displacementmap,xe.fog,xe.lights,{emissive:{value:new Ee(0)},specular:{value:new Ee(1118481)},shininess:{value:30}}]),vertexShader:ft.meshphong_vert,fragmentShader:ft.meshphong_frag},standard:{uniforms:Ri([xe.common,xe.envmap,xe.aomap,xe.lightmap,xe.emissivemap,xe.bumpmap,xe.normalmap,xe.displacementmap,xe.roughnessmap,xe.metalnessmap,xe.fog,xe.lights,{emissive:{value:new Ee(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag},toon:{uniforms:Ri([xe.common,xe.aomap,xe.lightmap,xe.emissivemap,xe.bumpmap,xe.normalmap,xe.displacementmap,xe.gradientmap,xe.fog,xe.lights,{emissive:{value:new Ee(0)}}]),vertexShader:ft.meshtoon_vert,fragmentShader:ft.meshtoon_frag},matcap:{uniforms:Ri([xe.common,xe.bumpmap,xe.normalmap,xe.displacementmap,xe.fog,{matcap:{value:null}}]),vertexShader:ft.meshmatcap_vert,fragmentShader:ft.meshmatcap_frag},points:{uniforms:Ri([xe.points,xe.fog]),vertexShader:ft.points_vert,fragmentShader:ft.points_frag},dashed:{uniforms:Ri([xe.common,xe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ft.linedashed_vert,fragmentShader:ft.linedashed_frag},depth:{uniforms:Ri([xe.common,xe.displacementmap]),vertexShader:ft.depth_vert,fragmentShader:ft.depth_frag},normal:{uniforms:Ri([xe.common,xe.bumpmap,xe.normalmap,xe.displacementmap,{opacity:{value:1}}]),vertexShader:ft.meshnormal_vert,fragmentShader:ft.meshnormal_frag},sprite:{uniforms:Ri([xe.sprite,xe.fog]),vertexShader:ft.sprite_vert,fragmentShader:ft.sprite_frag},background:{uniforms:{uvTransform:{value:new ct},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ft.background_vert,fragmentShader:ft.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ct}},vertexShader:ft.backgroundCube_vert,fragmentShader:ft.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ft.cube_vert,fragmentShader:ft.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ft.equirect_vert,fragmentShader:ft.equirect_frag},distanceRGBA:{uniforms:Ri([xe.common,xe.displacementmap,{referencePosition:{value:new T},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ft.distanceRGBA_vert,fragmentShader:ft.distanceRGBA_frag},shadow:{uniforms:Ri([xe.lights,xe.fog,{color:{value:new Ee(0)},opacity:{value:1}}]),vertexShader:ft.shadow_vert,fragmentShader:ft.shadow_frag}};Es.physical={uniforms:Ri([Es.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ct},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ct},clearcoatNormalScale:{value:new K(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ct},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ct},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ct},sheen:{value:0},sheenColor:{value:new Ee(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ct},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ct},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ct},transmissionSamplerSize:{value:new K},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ct},attenuationDistance:{value:0},attenuationColor:{value:new Ee(0)},specularColor:{value:new Ee(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ct},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ct},anisotropyVector:{value:new K},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ct}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag};const Y0={r:0,b:0,g:0},gc=new no,Eie=new Qe;function Die(n,e,t,i,r,s,o){const a=new Ee(0);let l,u,c=!0===s?0:1,d=null,f=0,h=null;function p(_){let x=!0===_.isScene?_.background:null;return x&&x.isTexture&&(x=(_.backgroundBlurriness>0?t:e).get(x)),x}function g(_,x){_.getRGB(Y0,kL(n)),i.buffers.color.setClear(Y0.r,Y0.g,Y0.b,x,o)}return{getClearColor:function(){return a},setClearColor:function(_,x=1){a.set(_),c=x,g(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(_){c=_,g(a,c)},render:function v(_){let x=!1;const D=p(_);null===D?g(a,c):D&&D.isColor&&(g(D,1),x=!0);const C=n.xr.getEnvironmentBlendMode();"additive"===C?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===C&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||x)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function m(_,x){const D=p(x);D&&(D.isCubeTexture||306===D.mapping)?(void 0===u&&(u=new An(new uu(1,1,1),new Ss({name:"BackgroundCubeMaterial",uniforms:du(Es.backgroundCube.uniforms),vertexShader:Es.backgroundCube.vertexShader,fragmentShader:Es.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,A,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),gc.copy(x.backgroundRotation),gc.x*=-1,gc.y*=-1,gc.z*=-1,D.isCubeTexture&&!1===D.isRenderTargetTexture&&(gc.y*=-1,gc.z*=-1),u.material.uniforms.envMap.value=D,u.material.uniforms.flipEnvMap.value=D.isCubeTexture&&!1===D.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Eie.makeRotationFromEuler(gc)),u.material.toneMapped=Dt.getTransfer(D.colorSpace)!==qt,(d!==D||f!==D.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,d=D,f=D.version,h=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):D&&D.isTexture&&(void 0===l&&(l=new An(new Mu(2,2),new Ss({name:"BackgroundMaterial",uniforms:du(Es.background.uniforms),vertexShader:Es.background.vertexShader,fragmentShader:Es.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=D,l.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,l.material.toneMapped=Dt.getTransfer(D.colorSpace)!==qt,!0===D.matrixAutoUpdate&&D.updateMatrix(),l.material.uniforms.uvTransform.value.copy(D.matrix),(d!==D||f!==D.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,d=D,f=D.version,h=n.toneMapping),l.layers.enableAll(),_.unshift(l,l.geometry,l.material,0,0,null))},dispose:function y(){void 0!==u&&(u.geometry.dispose(),u.material.dispose(),u=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Tie(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,o=!1;function l(M){return n.bindVertexArray(M)}function u(M){return n.deleteVertexArray(M)}function f(M){const R=[],W=[],V=[];for(let X=0;X<t;X++)R[X]=0,W[X]=0,V[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:W,attributeDivisors:V,object:M,attributes:{},index:null}}function v(){const M=s.newAttributes;for(let R=0,W=M.length;R<W;R++)M[R]=0}function m(M){g(M,0)}function g(M,R){const V=s.enabledAttributes,X=s.attributeDivisors;s.newAttributes[M]=1,0===V[M]&&(n.enableVertexAttribArray(M),V[M]=1),X[M]!==R&&(n.vertexAttribDivisor(M,R),X[M]=R)}function y(){const M=s.newAttributes,R=s.enabledAttributes;for(let W=0,V=R.length;W<V;W++)R[W]!==M[W]&&(n.disableVertexAttribArray(W),R[W]=0)}function _(M,R,W,V,X,re,$){!0===$?n.vertexAttribIPointer(M,R,W,X,re):n.vertexAttribPointer(M,R,W,V,X,re)}function I(){w(),o=!0,s!==r&&(s=r,l(s.object))}function w(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(M,R,W,V,X){let re=!1;const $=function d(M,R,W){const V=!0===W.wireframe;let X=i[M.id];void 0===X&&(X={},i[M.id]=X);let re=X[R.id];void 0===re&&(re={},X[R.id]=re);let $=re[V];return void 0===$&&($=f(function c(){return n.createVertexArray()}()),re[V]=$),$}(V,W,R);s!==$&&(s=$,l(s.object)),re=function h(M,R,W,V){const X=s.attributes,re=R.attributes;let $=0;const ue=W.getAttributes();for(const q in ue)if(ue[q].location>=0){const De=X[q];let Oe=re[q];if(void 0===Oe&&("instanceMatrix"===q&&M.instanceMatrix&&(Oe=M.instanceMatrix),"instanceColor"===q&&M.instanceColor&&(Oe=M.instanceColor)),void 0===De||De.attribute!==Oe||Oe&&De.data!==Oe.data)return!0;$++}return s.attributesNum!==$||s.index!==V}(M,V,W,X),re&&function p(M,R,W,V){const X={},re=R.attributes;let $=0;const ue=W.getAttributes();for(const q in ue)if(ue[q].location>=0){let De=re[q];void 0===De&&("instanceMatrix"===q&&M.instanceMatrix&&(De=M.instanceMatrix),"instanceColor"===q&&M.instanceColor&&(De=M.instanceColor));const Oe={};Oe.attribute=De,De&&De.data&&(Oe.data=De.data),X[q]=Oe,$++}s.attributes=X,s.attributesNum=$,s.index=V}(M,V,W,X),null!==X&&e.update(X,n.ELEMENT_ARRAY_BUFFER),(re||o)&&(o=!1,function x(M,R,W,V){v();const X=V.attributes,re=W.getAttributes(),$=R.defaultAttributeValues;for(const ue in re){const q=re[ue];if(q.location>=0){let ve=X[ue];if(void 0===ve&&("instanceMatrix"===ue&&M.instanceMatrix&&(ve=M.instanceMatrix),"instanceColor"===ue&&M.instanceColor&&(ve=M.instanceColor)),void 0!==ve){const De=ve.normalized,Oe=ve.itemSize,lt=e.get(ve);if(void 0===lt)continue;const Ft=lt.buffer,ie=lt.type,pe=lt.bytesPerElement,ke=ie===n.INT||ie===n.UNSIGNED_INT||1013===ve.gpuType;if(ve.isInterleavedBufferAttribute){const ye=ve.data,We=ye.stride,Ct=ve.offset;if(ye.isInstancedInterleavedBuffer){for(let ze=0;ze<q.locationSize;ze++)g(q.location+ze,ye.meshPerAttribute);!0!==M.isInstancedMesh&&void 0===V._maxInstanceCount&&(V._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let ze=0;ze<q.locationSize;ze++)m(q.location+ze);n.bindBuffer(n.ARRAY_BUFFER,Ft);for(let ze=0;ze<q.locationSize;ze++)_(q.location+ze,Oe/q.locationSize,ie,De,We*pe,(Ct+Oe/q.locationSize*ze)*pe,ke)}else{if(ve.isInstancedBufferAttribute){for(let ye=0;ye<q.locationSize;ye++)g(q.location+ye,ve.meshPerAttribute);!0!==M.isInstancedMesh&&void 0===V._maxInstanceCount&&(V._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let ye=0;ye<q.locationSize;ye++)m(q.location+ye);n.bindBuffer(n.ARRAY_BUFFER,Ft);for(let ye=0;ye<q.locationSize;ye++)_(q.location+ye,Oe/q.locationSize,ie,De,Oe*pe,Oe/q.locationSize*ye*pe,ke)}}else if(void 0!==$){const De=$[ue];if(void 0!==De)switch(De.length){case 2:n.vertexAttrib2fv(q.location,De);break;case 3:n.vertexAttrib3fv(q.location,De);break;case 4:n.vertexAttrib4fv(q.location,De);break;default:n.vertexAttrib1fv(q.location,De)}}}}y()}(M,R,W,V),null!==X&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(X).buffer))},reset:I,resetDefaultState:w,dispose:function D(){I();for(const M in i){const R=i[M];for(const W in R){const V=R[W];for(const X in V)u(V[X].object),delete V[X];delete R[W]}delete i[M]}},releaseStatesOfGeometry:function C(M){if(void 0===i[M.id])return;const R=i[M.id];for(const W in R){const V=R[W];for(const X in V)u(V[X].object),delete V[X];delete R[W]}delete i[M.id]},releaseStatesOfProgram:function A(M){for(const R in i){const W=i[R];if(void 0===W[M.id])continue;const V=W[M.id];for(const X in V)u(V[X].object),delete V[X];delete W[M.id]}},initAttributes:v,enableAttribute:m,disableUnusedAttributes:y}}function Aie(n,e,t){let i;function o(l,u,d){0!==d&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}this.setMode=function r(l){i=l},this.render=function s(l,u){n.drawArrays(i,l,u),t.update(u,i,1)},this.renderInstances=o,this.renderMultiDraw=function a(l,u,d){if(0===d)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let h=0;for(let p=0;p<d;p++)h+=u[p];t.update(h,i,1)},this.renderMultiDrawInstances=function c(l,u,d,f){if(0===d)return;const h=e.get("WEBGL_multi_draw");if(null===h)for(let p=0;p<l.length;p++)o(l[p],u[p],f[p]);else{h.multiDrawArraysInstancedWEBGL(i,l,0,u,0,f,0,d);let p=0;for(let v=0;v<d;v++)p+=u[v]*f[v];t.update(p,i,1)}}}function Iie(n,e,t,i){let r;function c(A){if("highp"===A){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return"mediump"===A&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=void 0!==t.precision?t.precision:"highp";const u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const d=!0===t.logarithmicDepthBuffer,f=!0===t.reverseDepthBuffer&&e.has("EXT_clip_control"),h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,textureFormatReadable:function o(A){return!(A!==Xi&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(A){const I=A===Lh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==Zs&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==hr&&!I)},precision:l,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:p>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function Rie(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ea,a=new ct,c={value:null,needsUpdate:!1};function u(d,f,h,p){const v=null!==d?d.length:0;let m=null;if(0!==v){if(m=c.value,!0!==p||null===m){const g=h+4*v,y=f.matrixWorldInverse;a.getNormalMatrix(y),(null===m||m.length<g)&&(m=new Float32Array(g));for(let _=0,x=h;_!==v;++_,x+=4)o.copy(d[_]).applyMatrix4(y,a),o.normal.toArray(m,x),m[x+3]=o.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,m}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=0!==d.length||f||0!==i||r;return r=f,i=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,v=d.clipIntersection,m=d.clipShadows,g=n.get(d);if(!r||null===p||0===p.length||s&&!m)s?u(null):function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const y=s?0:i,_=4*y;let x=g.clippingState||null;c.value=x,x=u(p,f,_,h);for(let D=0;D!==_;++D)x[D]=t[D];g.clippingState=x,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}}}function Pie(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new CQ(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}const dk=[.125,.215,.35,.446,.526,.582],qS=new BS,hk=new Ee;let XS=null,YS=0,ZS=0,KS=!1;const vc=(1+Math.sqrt(5))/2,Eu=1/vc,fk=[new T(-vc,Eu,0),new T(vc,Eu,0),new T(-Eu,0,vc),new T(Eu,0,vc),new T(0,vc,-Eu),new T(0,vc,Eu),new T(-1,1,-1),new T(1,1,-1),new T(-1,1,1),new T(1,1,1)],Nie=new T;class pk{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=Nie}=s;XS=this._renderer.getRenderTarget(),YS=this._renderer.getActiveCubeFace(),ZS=this._renderer.getActiveMipmapLevel(),KS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,a),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=vk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=mk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(XS,YS,ZS),this._renderer.xr.enabled=KS,e.scissorTest=!1,Z0(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),XS=this._renderer.getRenderTarget(),YS=this._renderer.getActiveCubeFace(),ZS=this._renderer.getActiveMipmapLevel(),KS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Qn,minFilter:Qn,generateMipmaps:!1,type:Lh,format:Xi,colorSpace:Xl,depthBuffer:!1},r=gk(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=gk(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Oie(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+dk.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=dk[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,d=1+l,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*h),_=new Float32Array(m*p*h),x=new Float32Array(g*p*h);for(let C=0;C<h;C++){const A=C%3*2/3-1,I=C>2?0:-1;y.set([A,I,0,A+2/3,I,0,A+2/3,I+1,0,A,I,0,A+2/3,I+1,0,A,I+1,0],v*p*C),_.set(f,m*p*C),x.set([C,C,C,C,C,C],g*p*C)}const D=new dt;D.setAttribute("position",new Jt(y,v)),D.setAttribute("uv",new Jt(_,m)),D.setAttribute("faceIndex",new Jt(x,g)),e.push(D),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function Lie(n,e,t){const i=new Float32Array(20),r=new T(0,1,0);return new Ss({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new An(this._lodPlanes[0],e);this._renderer.compile(t,qS)}_sceneToCubeUV(e,t,i,r,s){const c=new oi(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,h=d.toneMapping;d.getClearColor(hk),d.toneMapping=0,d.autoClear=!1;const p=new Jo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),v=new An(new uu,p);let m=!1;const g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,m=!0):(p.color.copy(hk),m=!0);for(let y=0;y<6;y++){const _=y%3;0===_?(c.up.set(0,l[y],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+u[y],s.y,s.z)):1===_?(c.up.set(0,0,l[y]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+u[y],s.z)):(c.up.set(0,l[y],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+u[y]));const x=this._cubeSize;Z0(r,_*x,y>2?x:0,x,x),d.setRenderTarget(r),m&&d.render(v,c),d.render(e,c)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=h,d.autoClear=f,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=vk()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=mk());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new An(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;Z0(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,qS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,o,fk[(r-s-1)%fk.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new An(this._lodPlanes[r],l),f=l.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/39,v=s/p,m=isFinite(s)?1+Math.floor(3*v):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const g=[];let y=0;for(let A=0;A<20;++A){const I=A/v,w=Math.exp(-I*I/2);g.push(w),0===A?y+=w:A<m&&(y+=2*w)}for(let A=0;A<g.length;A++)g[A]=g[A]/y;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value="latitudinal"===o,a&&(f.poleAxis.value=a);const{_lodMax:_}=this;f.dTheta.value=p,f.mipInt.value=_-i;const x=this._sizeLods[r];Z0(t,3*x*(r>_-4?r-_+4:0),4*(this._cubeSize-x),3*x,2*x),c.setRenderTarget(t),c.render(d,qS)}}function gk(n,e,t){const i=new Qs(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Z0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function mk(){return new Ss({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function vk(){return new Ss({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Fie(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){let d=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==d?d.texture.pmremVersion:0))return null===t&&(t=new pk(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(void 0!==d)return d.texture;{const h=a.image;return l&&h&&h.height>0||u&&h&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(h)?(null===t&&(t=new pk(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function kie(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&Wm("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Uie(n,e,t,i){const r={},s=new WeakMap;function o(d){const f=d.target;null!==f.index&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",o),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),i.releaseStatesOfGeometry(f),!0===f.isInstancedBufferGeometry&&delete f._maxInstanceCount,t.memory.geometries--}function l(d){const f=[],h=d.index,p=d.attributes.position;let v=0;if(null!==h){const y=h.array;v=h.version;for(let _=0,x=y.length;_<x;_+=3){const D=y[_+0],C=y[_+1],A=y[_+2];f.push(D,C,C,A,A,D)}}else{if(void 0===p)return;v=p.version;for(let _=0,x=p.array.length/3-1;_<x;_+=3){const D=_+0,C=_+1,A=_+2;f.push(D,C,C,A,A,D)}}const m=new(yL(f)?NL:PL)(f,1);m.version=v;const g=s.get(d);g&&e.remove(g),s.set(d,m)}return{get:function a(d,f){return!0===r[f.id]||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f},update:function c(d){const f=d.attributes;for(const h in f)e.update(f[h],n.ARRAY_BUFFER)},getWireframeAttribute:function u(d){const f=s.get(d);if(f){const h=d.index;null!==h&&f.version<h.version&&l(d)}else l(d);return s.get(d)}}}function Bie(n,e,t){let i,s,o;function l(f,h,p){0!==p&&(n.drawElementsInstanced(i,h,s,f*o,p),t.update(h,i,p))}this.setMode=function r(f){i=f},this.setIndex=function a(f){s=f.type,o=f.bytesPerElement},this.render=function c(f,h){n.drawElements(i,h,s,f*o),t.update(h,i,1)},this.renderInstances=l,this.renderMultiDraw=function u(f,h,p){if(0===p)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,h,0,s,f,0,p);let m=0;for(let g=0;g<p;g++)m+=h[g];t.update(m,i,1)},this.renderMultiDrawInstances=function d(f,h,p,v){if(0===p)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let g=0;g<f.length;g++)l(f[g]/o,h[g],v[g]);else{m.multiDrawElementsInstancedWEBGL(i,h,0,s,f,0,v,0,p);let g=0;for(let y=0;y<p;y++)g+=h[y]*v[y];t.update(g,i,1)}}}function Vie(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function zie(n,e,t){const i=new WeakMap,r=new At;return{update:function s(o,a,c){const l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=void 0!==u?u.length:0;let f=i.get(a);if(void 0===f||f.count!==d){let w=function(){A.dispose(),i.delete(a),a.removeEventListener("dispose",w)};void 0!==f&&f.texture.dispose();const h=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,v=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],y=a.morphAttributes.color||[];let _=0;!0===h&&(_=1),!0===p&&(_=2),!0===v&&(_=3);let x=a.attributes.position.count*_,D=1;x>e.maxTextureSize&&(D=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const C=new Float32Array(x*D*4*d),A=new jm(C,x,D,d);A.type=hr,A.needsUpdate=!0;const I=4*_;for(let M=0;M<d;M++){const R=m[M],W=g[M],V=y[M],X=x*D*4*M;for(let re=0;re<R.count;re++){const $=re*I;!0===h&&(r.fromBufferAttribute(R,re),C[X+$+0]=r.x,C[X+$+1]=r.y,C[X+$+2]=r.z,C[X+$+3]=0),!0===p&&(r.fromBufferAttribute(W,re),C[X+$+4]=r.x,C[X+$+5]=r.y,C[X+$+6]=r.z,C[X+$+7]=0),!0===v&&(r.fromBufferAttribute(V,re),C[X+$+8]=r.x,C[X+$+9]=r.y,C[X+$+10]=r.z,C[X+$+11]=4===V.itemSize?r.w:1)}}f={count:d,texture:A,size:new K(x,D)},i.set(a,f),a.addEventListener("dispose",w)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let h=0;for(let v=0;v<l.length;v++)h+=l[v];const p=a.morphTargetsRelative?1:1-h;c.getUniforms().setValue(n,"morphTargetBaseInfluence",p),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}}}function Hie(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,d=e.get(c,c.geometry);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){const f=c.skeleton;r.get(f)!==l&&(f.update(),r.set(f,l))}return d},dispose:function o(){r=new WeakMap}}}const yk=new Yi,_k=new lF(1,1),xk=new jm,bk=new Nw,Mk=new l0,wk=[],Sk=[],Ck=new Float32Array(16),Ek=new Float32Array(9),Dk=new Float32Array(4);function Du(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=wk[r];if(void 0===s&&(s=new Float32Array(r),wk[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Wn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function jn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function K0(n,e){let t=Sk[e];void 0===t&&(t=new Int32Array(e),Sk[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Gie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Wie(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wn(t,e))return;n.uniform2fv(this.addr,e),jn(t,e)}}function jie(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Wn(t,e))return;n.uniform3fv(this.addr,e),jn(t,e)}}function $ie(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wn(t,e))return;n.uniform4fv(this.addr,e),jn(t,e)}}function qie(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Wn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),jn(t,e)}else{if(Wn(t,i))return;Dk.set(i),n.uniformMatrix2fv(this.addr,!1,Dk),jn(t,i)}}function Xie(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Wn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),jn(t,e)}else{if(Wn(t,i))return;Ek.set(i),n.uniformMatrix3fv(this.addr,!1,Ek),jn(t,i)}}function Yie(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Wn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),jn(t,e)}else{if(Wn(t,i))return;Ck.set(i),n.uniformMatrix4fv(this.addr,!1,Ck),jn(t,i)}}function Zie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Kie(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wn(t,e))return;n.uniform2iv(this.addr,e),jn(t,e)}}function Jie(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wn(t,e))return;n.uniform3iv(this.addr,e),jn(t,e)}}function Qie(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wn(t,e))return;n.uniform4iv(this.addr,e),jn(t,e)}}function ere(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function tre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wn(t,e))return;n.uniform2uiv(this.addr,e),jn(t,e)}}function nre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wn(t,e))return;n.uniform3uiv(this.addr,e),jn(t,e)}}function ire(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wn(t,e))return;n.uniform4uiv(this.addr,e),jn(t,e)}}function rre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();let s;i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),this.type===n.SAMPLER_2D_SHADOW?(_k.compareFunction=515,s=_k):s=yk,t.setTexture2D(e||s,r)}function sre(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||bk,r)}function ore(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Mk,r)}function are(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||xk,r)}function lre(n,e){n.uniform1fv(this.addr,e)}function ure(n,e){const t=Du(e,this.size,2);n.uniform2fv(this.addr,t)}function dre(n,e){const t=Du(e,this.size,3);n.uniform3fv(this.addr,t)}function hre(n,e){const t=Du(e,this.size,4);n.uniform4fv(this.addr,t)}function fre(n,e){const t=Du(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function pre(n,e){const t=Du(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function gre(n,e){const t=Du(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function mre(n,e){n.uniform1iv(this.addr,e)}function vre(n,e){n.uniform2iv(this.addr,e)}function yre(n,e){n.uniform3iv(this.addr,e)}function _re(n,e){n.uniform4iv(this.addr,e)}function xre(n,e){n.uniform1uiv(this.addr,e)}function bre(n,e){n.uniform2uiv(this.addr,e)}function Mre(n,e){n.uniform3uiv(this.addr,e)}function wre(n,e){n.uniform4uiv(this.addr,e)}function Sre(n,e,t){const i=this.cache,r=e.length,s=K0(t,r);Wn(i,s)||(n.uniform1iv(this.addr,s),jn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||yk,s[o])}function Cre(n,e,t){const i=this.cache,r=e.length,s=K0(t,r);Wn(i,s)||(n.uniform1iv(this.addr,s),jn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||bk,s[o])}function Ere(n,e,t){const i=this.cache,r=e.length,s=K0(t,r);Wn(i,s)||(n.uniform1iv(this.addr,s),jn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Mk,s[o])}function Dre(n,e,t){const i=this.cache,r=e.length,s=K0(t,r);Wn(i,s)||(n.uniform1iv(this.addr,s),jn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||xk,s[o])}class Are{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function cre(n){switch(n){case 5126:return Gie;case 35664:return Wie;case 35665:return jie;case 35666:return $ie;case 35674:return qie;case 35675:return Xie;case 35676:return Yie;case 5124:case 35670:return Zie;case 35667:case 35671:return Kie;case 35668:case 35672:return Jie;case 35669:case 35673:return Qie;case 5125:return ere;case 36294:return tre;case 36295:return nre;case 36296:return ire;case 35678:case 36198:case 36298:case 36306:case 35682:return rre;case 35679:case 36299:case 36307:return sre;case 35680:case 36300:case 36308:case 36293:return ore;case 36289:case 36303:case 36311:case 36292:return are}}(t.type)}}class Ire{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function Tre(n){switch(n){case 5126:return lre;case 35664:return ure;case 35665:return dre;case 35666:return hre;case 35674:return fre;case 35675:return pre;case 35676:return gre;case 5124:case 35670:return mre;case 35667:case 35671:return vre;case 35668:case 35672:return yre;case 35669:case 35673:return _re;case 5125:return xre;case 36294:return bre;case 36295:return Mre;case 36296:return wre;case 35678:case 36198:case 36298:case 36306:case 35682:return Sre;case 35679:case 36299:case 36307:return Cre;case 35680:case 36300:case 36308:case 36293:return Ere;case 36289:case 36303:case 36311:case 36292:return Dre}}(t.type)}}class Rre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const QS=/(\w+)(\])?(\[|\.)?/g;function Tk(n,e){n.seq.push(e),n.map[e.id]=e}function Pre(n,e,t){const i=n.name,r=i.length;for(QS.lastIndex=0;;){const s=QS.exec(i);let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&QS.lastIndex+2===r){Tk(t,void 0===l?new Are(a,n,e):new Ire(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new Rre(a),Tk(t,d)),t=d}}}class J0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);Pre(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Ak(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Ore=0;const Ik=new ct;function Rk(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Lre(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function kre(n,e){const t=function Fre(n){Dt._getMatrix(Ik,Dt.workingColorSpace,n);const e=`mat3( ${Ik.elements.map(t=>t.toFixed(4))} )`;switch(Dt.getTransfer(n)){case zm:return[e,"LinearTransferOETF"];case qt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${n}( vec4 value ) {`,`\treturn ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join("\n")}function Ure(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Cineon";break;case 4:t="ACESFilmic";break;case 6:t="AgX";break;case 7:t="Neutral";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Q0=new T;function hf(n){return""!==n}function Pk(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Nk(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Gre=/^[ \t]*#include +<([\w\d./]+)>/gm;function eC(n){return n.replace(Gre,jre)}const Wre=new Map;function jre(n,e){let t=ft[e];if(void 0===t){const i=Wre.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=ft[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return eC(t)}const $re=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ok(n){return n.replace($re,qre)}function qre(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Lk(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Qre(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function Xre(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function Yre(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function Zre(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function Kre(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),f=function Jre(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),h=function Vre(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(hf).join("\n")}(t),p=function zre(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),v=r.createProgram();let m,g,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(hf).join("\n"),m.length>0&&(m+="\n"),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(hf).join("\n"),g.length>0&&(g+="\n")):(m=[Lk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(hf).join("\n"),g=[Lk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?ft.tonemapping_pars_fragment:"",0!==t.toneMapping?Ure("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ft.colorspace_pars_fragment,kre("linearToOutputTexel",t.outputColorSpace),(Dt.getLuminanceCoefficients(Q0),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Q0.x.toFixed(4)}, ${Q0.y.toFixed(4)}, ${Q0.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(hf).join("\n")),o=eC(o),o=Pk(o,t),o=Nk(o,t),a=eC(a),a=Pk(a,t),a=Nk(a,t),o=Ok(o),a=Ok(a),!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",m=[h,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const x=y+g+a,D=Ak(r,r.VERTEX_SHADER,y+m+o),C=Ak(r,r.FRAGMENT_SHADER,x);function A(R){if(n.debug.checkShaderErrors){const W=r.getProgramInfoLog(v).trim(),V=r.getShaderInfoLog(D).trim(),X=r.getShaderInfoLog(C).trim();let re=!0,$=!0;if(!1===r.getProgramParameter(v,r.LINK_STATUS))if(re=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,v,D,C);else{const ue=Rk(r,D,"vertex"),q=Rk(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+R.name+"\nMaterial Type: "+R.type+"\n\nProgram Info Log: "+W+"\n"+ue+"\n"+q)}else""!==W?console.warn("THREE.WebGLProgram: Program Info Log:",W):(""===V||""===X)&&($=!1);$&&(R.diagnostics={runnable:re,programLog:W,vertexShader:{log:V,prefix:m},fragmentShader:{log:X,prefix:g}})}r.deleteShader(D),r.deleteShader(C),I=new J0(r,v),w=function Hre(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,v)}let I,w;r.attachShader(v,D),r.attachShader(v,C),void 0!==t.index0AttributeName?r.bindAttribLocation(v,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),this.getUniforms=function(){return void 0===I&&A(this),I},this.getAttributes=function(){return void 0===w&&A(this),w};let M=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=r.getProgramParameter(v,37297)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Ore++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=D,this.fragmentShader=C,this}let ese=0;class tse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new nse(e),t.set(e,i)),i}}class nse{constructor(e){this.id=ese++,this.code=e,this.usedTimes=0}}function ise(n,e,t,i,r,s,o){const a=new Vw,c=new tse,l=new Set,u=[],d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(w){return l.add(w),0===w?"uv":`uv${w}`}return{getParameters:function m(w,M,R,W,V){const X=W.fog,re=V.geometry,ue=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?W.environment:null)),q=ue&&306===ue.mapping?ue.image.height:null,ve=p[w.type];null!==w.precision&&(h=r.getMaxPrecision(w.precision),h!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",h,"instead."));const De=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,Oe=void 0!==De?De.length:0;let Ft,ie,pe,ke,lt=0;if(void 0!==re.morphAttributes.position&&(lt=1),void 0!==re.morphAttributes.normal&&(lt=2),void 0!==re.morphAttributes.color&&(lt=3),ve){const Ht=Es[ve];Ft=Ht.vertexShader,ie=Ht.fragmentShader}else Ft=w.vertexShader,ie=w.fragmentShader,c.update(w),pe=c.getVertexShaderID(w),ke=c.getFragmentShaderID(w);const ye=n.getRenderTarget(),We=n.state.buffers.depth.getReversed(),Ct=!0===V.isInstancedMesh,ze=!0===V.isBatchedMesh,Nt=!!w.map,_t=!!ue,P=!!w.aoMap,Sn=!!w.lightMap,se=!!w.bumpMap,ae=!!w.normalMap,J=!!w.displacementMap,_e=!!w.emissiveMap,Q=!!w.metalnessMap,E=!!w.roughnessMap,b=w.anisotropy>0,k=w.clearcoat>0,ee=w.iridescence>0,Z=w.sheen>0,Le=w.transmission>0,me=b&&!!w.anisotropyMap,Te=k&&!!w.clearcoatMap,xt=k&&!!w.clearcoatNormalMap,he=k&&!!w.clearcoatRoughnessMap,Ie=ee&&!!w.iridescenceMap,$e=ee&&!!w.iridescenceThicknessMap,Ye=Z&&!!w.sheenColorMap,Ae=Z&&!!w.sheenRoughnessMap,Et=!!w.specularMap,pt=!!w.specularColorMap,nn=!!w.specularIntensityMap,O=Le&&!!w.transmissionMap,Me=Le&&!!w.thicknessMap,oe=!!w.alphaMap,ht=!!w.extensions;let Cn=0;w.toneMapped&&(null===ye||!0===ye.isXRRenderTarget)&&(Cn=n.toneMapping);const gi={shaderID:ve,shaderType:w.type,shaderName:w.name,vertexShader:Ft,fragmentShader:ie,defines:w.defines,customVertexShaderID:pe,customFragmentShaderID:ke,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:h,batching:ze,batchingColor:ze&&null!==V._colorsTexture,instancing:Ct,instancingColor:Ct&&null!==V.instanceColor,instancingMorph:Ct&&null!==V.morphTexture,supportsVertexTextures:f,outputColorSpace:null===ye?n.outputColorSpace:!0===ye.isXRRenderTarget?ye.texture.colorSpace:Xl,alphaToCoverage:!!w.alphaToCoverage,map:Nt,matcap:!!w.matcap,envMap:_t,envMapMode:_t&&ue.mapping,envMapCubeUVHeight:q,aoMap:P,lightMap:Sn,bumpMap:se,normalMap:ae,displacementMap:f&&J,emissiveMap:_e,normalMapObjectSpace:ae&&1===w.normalMapType,normalMapTangentSpace:ae&&0===w.normalMapType,metalnessMap:Q,roughnessMap:E,anisotropy:b,anisotropyMap:me,clearcoat:k,clearcoatMap:Te,clearcoatNormalMap:xt,clearcoatRoughnessMap:he,dispersion:w.dispersion>0,iridescence:ee,iridescenceMap:Ie,iridescenceThicknessMap:$e,sheen:Z,sheenColorMap:Ye,sheenRoughnessMap:Ae,specularMap:Et,specularColorMap:pt,specularIntensityMap:nn,transmission:Le,transmissionMap:O,thicknessMap:Me,gradientMap:!!w.gradientMap,opaque:!1===w.transparent&&1===w.blending&&!1===w.alphaToCoverage,alphaMap:oe,alphaTest:w.alphaTest>0,alphaHash:!!w.alphaHash,combine:w.combine,mapUv:Nt&&v(w.map.channel),aoMapUv:P&&v(w.aoMap.channel),lightMapUv:Sn&&v(w.lightMap.channel),bumpMapUv:se&&v(w.bumpMap.channel),normalMapUv:ae&&v(w.normalMap.channel),displacementMapUv:J&&v(w.displacementMap.channel),emissiveMapUv:_e&&v(w.emissiveMap.channel),metalnessMapUv:Q&&v(w.metalnessMap.channel),roughnessMapUv:E&&v(w.roughnessMap.channel),anisotropyMapUv:me&&v(w.anisotropyMap.channel),clearcoatMapUv:Te&&v(w.clearcoatMap.channel),clearcoatNormalMapUv:xt&&v(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:he&&v(w.clearcoatRoughnessMap.channel),iridescenceMapUv:Ie&&v(w.iridescenceMap.channel),iridescenceThicknessMapUv:$e&&v(w.iridescenceThicknessMap.channel),sheenColorMapUv:Ye&&v(w.sheenColorMap.channel),sheenRoughnessMapUv:Ae&&v(w.sheenRoughnessMap.channel),specularMapUv:Et&&v(w.specularMap.channel),specularColorMapUv:pt&&v(w.specularColorMap.channel),specularIntensityMapUv:nn&&v(w.specularIntensityMap.channel),transmissionMapUv:O&&v(w.transmissionMap.channel),thicknessMapUv:Me&&v(w.thicknessMap.channel),alphaMapUv:oe&&v(w.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(ae||b),vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!re.attributes.color&&4===re.attributes.color.itemSize,pointsUvs:!0===V.isPoints&&!!re.attributes.uv&&(Nt||oe),fog:!!X,useFog:!0===w.fog,fogExp2:!!X&&X.isFogExp2,flatShading:!0===w.flatShading,sizeAttenuation:!0===w.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:We,skinning:!0===V.isSkinnedMesh,morphTargets:void 0!==re.morphAttributes.position,morphNormals:void 0!==re.morphAttributes.normal,morphColors:void 0!==re.morphAttributes.color,morphTargetsCount:Oe,morphTextureStride:lt,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:Cn,decodeVideoTexture:Nt&&!0===w.map.isVideoTexture&&Dt.getTransfer(w.map.colorSpace)===qt,decodeVideoTextureEmissive:_e&&!0===w.emissiveMap.isVideoTexture&&Dt.getTransfer(w.emissiveMap.colorSpace)===qt,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionClipCullDistance:ht&&!0===w.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ht&&!0===w.extensions.multiDraw||ze)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return gi.vertexUv1s=l.has(1),gi.vertexUv2s=l.has(2),gi.vertexUv3s=l.has(3),l.clear(),gi},getProgramCacheKey:function g(w){const M=[];if(w.shaderID?M.push(w.shaderID):(M.push(w.customVertexShaderID),M.push(w.customFragmentShaderID)),void 0!==w.defines)for(const R in w.defines)M.push(R),M.push(w.defines[R]);return!1===w.isRawShaderMaterial&&(function y(w,M){w.push(M.precision),w.push(M.outputColorSpace),w.push(M.envMapMode),w.push(M.envMapCubeUVHeight),w.push(M.mapUv),w.push(M.alphaMapUv),w.push(M.lightMapUv),w.push(M.aoMapUv),w.push(M.bumpMapUv),w.push(M.normalMapUv),w.push(M.displacementMapUv),w.push(M.emissiveMapUv),w.push(M.metalnessMapUv),w.push(M.roughnessMapUv),w.push(M.anisotropyMapUv),w.push(M.clearcoatMapUv),w.push(M.clearcoatNormalMapUv),w.push(M.clearcoatRoughnessMapUv),w.push(M.iridescenceMapUv),w.push(M.iridescenceThicknessMapUv),w.push(M.sheenColorMapUv),w.push(M.sheenRoughnessMapUv),w.push(M.specularMapUv),w.push(M.specularColorMapUv),w.push(M.specularIntensityMapUv),w.push(M.transmissionMapUv),w.push(M.thicknessMapUv),w.push(M.combine),w.push(M.fogExp2),w.push(M.sizeAttenuation),w.push(M.morphTargetsCount),w.push(M.morphAttributeCount),w.push(M.numDirLights),w.push(M.numPointLights),w.push(M.numSpotLights),w.push(M.numSpotLightMaps),w.push(M.numHemiLights),w.push(M.numRectAreaLights),w.push(M.numDirLightShadows),w.push(M.numPointLightShadows),w.push(M.numSpotLightShadows),w.push(M.numSpotLightShadowsWithMaps),w.push(M.numLightProbes),w.push(M.shadowMapType),w.push(M.toneMapping),w.push(M.numClippingPlanes),w.push(M.numClipIntersection),w.push(M.depthPacking)}(M,w),function _(w,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),w.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),w.push(a.mask)}(M,w),M.push(n.outputColorSpace)),M.push(w.customProgramCacheKey),M.join()},getUniforms:function x(w){const M=p[w.type];let R;return R=M?bQ.clone(Es[M].uniforms):w.uniforms,R},acquireProgram:function D(w,M){let R;for(let W=0,V=u.length;W<V;W++){const X=u[W];if(X.cacheKey===M){R=X,++R.usedTimes;break}}return void 0===R&&(R=new Qre(n,M,w,s),u.push(R)),R},releaseProgram:function C(w){if(0==--w.usedTimes){const M=u.indexOf(w);u[M]=u[u.length-1],u.pop(),w.destroy()}},releaseShaderCache:function A(w){c.remove(w)},programs:u,dispose:function I(){c.dispose()}}}function rse(){let n=new WeakMap;return{has:function e(o){return n.has(o)},get:function t(o){let a=n.get(o);return void 0===a&&(a={},n.set(o,a)),a},remove:function i(o){n.delete(o)},update:function r(o,a,c){n.get(o)[a]=c},dispose:function s(){n=new WeakMap}}}function sse(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Fk(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function kk(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,f,h,p,v,m){let g=n[e];return void 0===g?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:v,group:m},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=v,g.group=m),e++,g}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,f,h,p,v,m){const g=o(d,f,h,p,v,m);h.transmission>0?i.push(g):!0===h.transparent?r.push(g):t.push(g)},unshift:function c(d,f,h,p,v,m){const g=o(d,f,h,p,v,m);h.transmission>0?i.unshift(g):!0===h.transparent?r.unshift(g):t.unshift(g)},finish:function u(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(null===h.id)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}},sort:function l(d,f){t.length>1&&t.sort(d||sse),i.length>1&&i.sort(f||Fk),r.length>1&&r.sort(f||Fk)}}}function ose(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new kk,n.set(i,[o])):r>=s.length?(o=new kk,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function ase(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new T,color:new Ee};break;case"SpotLight":t={position:new T,direction:new T,color:new Ee,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new T,color:new Ee,distance:0,decay:0};break;case"HemisphereLight":t={direction:new T,skyColor:new Ee,groundColor:new Ee};break;case"RectAreaLight":t={color:new Ee,position:new T,halfWidth:new T,halfHeight:new T}}return n[e.id]=t,t}}}let lse=0;function use(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function dse(n){const e=new ase,t=function cse(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new K};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new K,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new T);const r=new T,s=new Qe,o=new Qe;return{setup:function a(l){let u=0,d=0,f=0;for(let w=0;w<9;w++)i.probe[w].set(0,0,0);let h=0,p=0,v=0,m=0,g=0,y=0,_=0,x=0,D=0,C=0,A=0;l.sort(use);for(let w=0,M=l.length;w<M;w++){const R=l[w],W=R.color,V=R.intensity,X=R.distance,re=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)u+=W.r*V,d+=W.g*V,f+=W.b*V;else if(R.isLightProbe){for(let $=0;$<9;$++)i.probe[$].addScaledVector(R.sh.coefficients[$],V);A++}else if(R.isDirectionalLight){const $=e.get(R);if($.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const ue=R.shadow,q=t.get(R);q.shadowIntensity=ue.intensity,q.shadowBias=ue.bias,q.shadowNormalBias=ue.normalBias,q.shadowRadius=ue.radius,q.shadowMapSize=ue.mapSize,i.directionalShadow[h]=q,i.directionalShadowMap[h]=re,i.directionalShadowMatrix[h]=R.shadow.matrix,y++}i.directional[h]=$,h++}else if(R.isSpotLight){const $=e.get(R);$.position.setFromMatrixPosition(R.matrixWorld),$.color.copy(W).multiplyScalar(V),$.distance=X,$.coneCos=Math.cos(R.angle),$.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),$.decay=R.decay,i.spot[v]=$;const ue=R.shadow;if(R.map&&(i.spotLightMap[D]=R.map,D++,ue.updateMatrices(R),R.castShadow&&C++),i.spotLightMatrix[v]=ue.matrix,R.castShadow){const q=t.get(R);q.shadowIntensity=ue.intensity,q.shadowBias=ue.bias,q.shadowNormalBias=ue.normalBias,q.shadowRadius=ue.radius,q.shadowMapSize=ue.mapSize,i.spotShadow[v]=q,i.spotShadowMap[v]=re,x++}v++}else if(R.isRectAreaLight){const $=e.get(R);$.color.copy(W).multiplyScalar(V),$.halfWidth.set(.5*R.width,0,0),$.halfHeight.set(0,.5*R.height,0),i.rectArea[m]=$,m++}else if(R.isPointLight){const $=e.get(R);if($.color.copy(R.color).multiplyScalar(R.intensity),$.distance=R.distance,$.decay=R.decay,R.castShadow){const ue=R.shadow,q=t.get(R);q.shadowIntensity=ue.intensity,q.shadowBias=ue.bias,q.shadowNormalBias=ue.normalBias,q.shadowRadius=ue.radius,q.shadowMapSize=ue.mapSize,q.shadowCameraNear=ue.camera.near,q.shadowCameraFar=ue.camera.far,i.pointShadow[p]=q,i.pointShadowMap[p]=re,i.pointShadowMatrix[p]=R.shadow.matrix,_++}i.point[p]=$,p++}else if(R.isHemisphereLight){const $=e.get(R);$.skyColor.copy(R.color).multiplyScalar(V),$.groundColor.copy(R.groundColor).multiplyScalar(V),i.hemi[g]=$,g++}}m>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=xe.LTC_FLOAT_1,i.rectAreaLTC2=xe.LTC_FLOAT_2):(i.rectAreaLTC1=xe.LTC_HALF_1,i.rectAreaLTC2=xe.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=f;const I=i.hash;(I.directionalLength!==h||I.pointLength!==p||I.spotLength!==v||I.rectAreaLength!==m||I.hemiLength!==g||I.numDirectionalShadows!==y||I.numPointShadows!==_||I.numSpotShadows!==x||I.numSpotMaps!==D||I.numLightProbes!==A)&&(i.directional.length=h,i.spot.length=v,i.rectArea.length=m,i.point.length=p,i.hemi.length=g,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=x+D-C,i.spotLightMap.length=D,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=A,I.directionalLength=h,I.pointLength=p,I.spotLength=v,I.rectAreaLength=m,I.hemiLength=g,I.numDirectionalShadows=y,I.numPointShadows=_,I.numSpotShadows=x,I.numSpotMaps=D,I.numLightProbes=A,i.version=lse++)},setupView:function c(l,u){let d=0,f=0,h=0,p=0,v=0;const m=u.matrixWorldInverse;for(let g=0,y=l.length;g<y;g++){const _=l[g];if(_.isDirectionalLight){const x=i.directional[d];x.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(m),d++}else if(_.isSpotLight){const x=i.spot[h];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(m),x.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(m),h++}else if(_.isRectAreaLight){const x=i.rectArea[p];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(m),o.identity(),s.copy(_.matrixWorld),s.premultiply(m),o.extractRotation(s),x.halfWidth.set(.5*_.width,0,0),x.halfHeight.set(0,.5*_.height,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),p++}else if(_.isPointLight){const x=i.point[f];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(m),f++}else if(_.isHemisphereLight){const x=i.hemi[v];x.direction.setFromMatrixPosition(_.matrixWorld),x.direction.transformDirection(m),v++}}},state:i}}function Uk(n){const e=new dse(n),t=[],i=[],l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(u){l.camera=u,t.length=0,i.length=0},state:l,setupLights:function a(){e.setup(t)},setupLightsView:function c(u){e.setupView(t,u)},pushLight:function s(u){t.push(u)},pushShadow:function o(u){i.push(u)}}}function hse(n){let e=new WeakMap;return{get:function t(r,s=0){const o=e.get(r);let a;return void 0===o?(a=new Uk(n),e.set(r,[a])):s>=o.length?(a=new Uk(n),o.push(a)):a=o[s],a},dispose:function i(){e=new WeakMap}}}function gse(n,e,t){let i=new v0;const r=new K,s=new K,o=new At,a=new DF({depthPacking:3201}),c=new TF,l={},u=t.maxTextureSize,d={[zo]:1,[qi]:0,[Ms]:2},f=new Ss({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new K},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new dt;p.setAttribute("position",new Jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new An(p,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let g=this.type;function y(C,A){const I=e.update(v);f.defines.VSM_SAMPLES!==C.blurSamples&&(f.defines.VSM_SAMPLES=C.blurSamples,h.defines.VSM_SAMPLES=C.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),null===C.mapPass&&(C.mapPass=new Qs(r.x,r.y)),f.uniforms.shadow_pass.value=C.map.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(A,null,I,f,v,null),h.uniforms.shadow_pass.value=C.mapPass.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(A,null,I,h,v,null)}function _(C,A,I,w){let M=null;const R=!0===I.isPointLight?C.customDistanceMaterial:C.customDepthMaterial;if(void 0!==R)M=R;else if(M=!0===I.isPointLight?c:a,n.localClippingEnabled&&!0===A.clipShadows&&Array.isArray(A.clippingPlanes)&&0!==A.clippingPlanes.length||A.displacementMap&&0!==A.displacementScale||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const W=M.uuid,V=A.uuid;let X=l[W];void 0===X&&(X={},l[W]=X);let re=X[V];void 0===re&&(re=M.clone(),X[V]=re,A.addEventListener("dispose",D)),M=re}return M.visible=A.visible,M.wireframe=A.wireframe,M.side=3===w?null!==A.shadowSide?A.shadowSide:A.side:null!==A.shadowSide?A.shadowSide:d[A.side],M.alphaMap=A.alphaMap,M.alphaTest=A.alphaTest,M.map=A.map,M.clipShadows=A.clipShadows,M.clippingPlanes=A.clippingPlanes,M.clipIntersection=A.clipIntersection,M.displacementMap=A.displacementMap,M.displacementScale=A.displacementScale,M.displacementBias=A.displacementBias,M.wireframeLinewidth=A.wireframeLinewidth,M.linewidth=A.linewidth,!0===I.isPointLight&&!0===M.isMeshDistanceMaterial&&(n.properties.get(M).light=I),M}function x(C,A,I,w,M){if(!1===C.visible)return;if(C.layers.test(A.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&3===M)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,C.matrixWorld);const V=e.update(C),X=C.material;if(Array.isArray(X)){const re=V.groups;for(let $=0,ue=re.length;$<ue;$++){const q=re[$],ve=X[q.materialIndex];if(ve&&ve.visible){const De=_(C,ve,w,M);C.onBeforeShadow(n,C,A,I,V,De,q),n.renderBufferDirect(I,null,V,De,C,q),C.onAfterShadow(n,C,A,I,V,De,q)}}}else if(X.visible){const re=_(C,X,w,M);C.onBeforeShadow(n,C,A,I,V,re,null),n.renderBufferDirect(I,null,V,re,C,null),C.onAfterShadow(n,C,A,I,V,re,null)}}const W=C.children;for(let V=0,X=W.length;V<X;V++)x(W[V],A,I,w,M)}function D(C){C.target.removeEventListener("dispose",D);for(const I in l){const w=l[I],M=C.target.uuid;M in w&&(w[M].dispose(),delete w[M])}}this.render=function(C,A,I){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===C.length)return;const w=n.getRenderTarget(),M=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),W=n.state;W.setBlending(0),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const V=3!==g&&3===this.type,X=3===g&&3!==this.type;for(let re=0,$=C.length;re<$;re++){const ue=C[re],q=ue.shadow;if(void 0===q){console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.");continue}if(!1===q.autoUpdate&&!1===q.needsUpdate)continue;r.copy(q.mapSize);const ve=q.getFrameExtents();if(r.multiply(ve),s.copy(q.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ve.x),r.x=s.x*ve.x,q.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ve.y),r.y=s.y*ve.y,q.mapSize.y=s.y)),null===q.map||!0===V||!0===X){const Oe=3!==this.type?{minFilter:di,magFilter:di}:{};null!==q.map&&q.map.dispose(),q.map=new Qs(r.x,r.y,Oe),q.map.texture.name=ue.name+".shadowMap",q.camera.updateProjectionMatrix()}n.setRenderTarget(q.map),n.clear();const De=q.getViewportCount();for(let Oe=0;Oe<De;Oe++){const lt=q.getViewport(Oe);o.set(s.x*lt.x,s.y*lt.y,s.x*lt.z,s.y*lt.w),W.viewport(o),q.updateMatrices(ue,Oe),i=q.getFrustum(),x(A,I,q.camera,ue,this.type)}!0!==q.isPointLightShadow&&3===this.type&&y(q,I),q.needsUpdate=!1}g=this.type,m.needsUpdate=!1,n.setRenderTarget(w,M,R)}}const mse={[VM]:1,[HM]:6,[GM]:7,[jl]:5,[zM]:0,[jM]:2,[$M]:4,[WM]:3};function vse(n,e){const s=new function t(){let O=!1;const Me=new At;let Y=null;const oe=new At(0,0,0,0);return{setMask:function(Se){Y!==Se&&!O&&(n.colorMask(Se,Se,Se,Se),Y=Se)},setLocked:function(Se){O=Se},setClear:function(Se,we,ht,Cn,gi){!0===gi&&(Se*=Cn,we*=Cn,ht*=Cn),Me.set(Se,we,ht,Cn),!1===oe.equals(Me)&&(n.clearColor(Se,we,ht,Cn),oe.copy(Me))},reset:function(){O=!1,Y=null,oe.set(-1,0,0,0)}}},o=new function i(){let O=!1,Me=!1,Y=null,oe=null,Se=null;return{setReversed:function(we){if(Me!==we){const ht=e.get("EXT_clip_control");ht.clipControlEXT(ht.LOWER_LEFT_EXT,we?ht.ZERO_TO_ONE_EXT:ht.NEGATIVE_ONE_TO_ONE_EXT),Me=we;const Cn=Se;Se=null,this.setClear(Cn)}},getReversed:function(){return Me},setTest:function(we){we?ye(n.DEPTH_TEST):We(n.DEPTH_TEST)},setMask:function(we){Y!==we&&!O&&(n.depthMask(we),Y=we)},setFunc:function(we){if(Me&&(we=mse[we]),oe!==we){switch(we){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}oe=we}},setLocked:function(we){O=we},setClear:function(we){Se!==we&&(Me&&(we=1-we),n.clearDepth(we),Se=we)},reset:function(){O=!1,Y=null,oe=null,Se=null,Me=!1}}},a=new function r(){let O=!1,Me=null,Y=null,oe=null,Se=null,we=null,ht=null,Cn=null,gi=null;return{setTest:function(Ht){O||(Ht?ye(n.STENCIL_TEST):We(n.STENCIL_TEST))},setMask:function(Ht){Me!==Ht&&!O&&(n.stencilMask(Ht),Me=Ht)},setFunc:function(Ht,ts,ho){(Y!==Ht||oe!==ts||Se!==ho)&&(n.stencilFunc(Ht,ts,ho),Y=Ht,oe=ts,Se=ho)},setOp:function(Ht,ts,ho){(we!==Ht||ht!==ts||Cn!==ho)&&(n.stencilOp(Ht,ts,ho),we=Ht,ht=ts,Cn=ho)},setLocked:function(Ht){O=Ht},setClear:function(Ht){gi!==Ht&&(n.clearStencil(Ht),gi=Ht)},reset:function(){O=!1,Me=null,Y=null,oe=null,Se=null,we=null,ht=null,Cn=null,gi=null}}},c=new WeakMap,l=new WeakMap;let u={},d={},f=new WeakMap,h=[],p=null,v=!1,m=null,g=null,y=null,_=null,x=null,D=null,C=null,A=new Ee(0,0,0),I=0,w=!1,M=null,R=null,W=null,V=null,X=null;const re=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,ue=0;const q=n.getParameter(n.VERSION);-1!==q.indexOf("WebGL")?(ue=parseFloat(/^WebGL (\d)/.exec(q)[1]),$=ue>=1):-1!==q.indexOf("OpenGL ES")&&(ue=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),$=ue>=2);let ve=null,De={};const Oe=n.getParameter(n.SCISSOR_BOX),lt=n.getParameter(n.VIEWPORT),Ft=(new At).fromArray(Oe),ie=(new At).fromArray(lt);function pe(O,Me,Y,oe){const Se=new Uint8Array(4),we=n.createTexture();n.bindTexture(O,we),n.texParameteri(O,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(O,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ht=0;ht<Y;ht++)O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY?n.texImage3D(Me,0,n.RGBA,1,1,oe,0,n.RGBA,n.UNSIGNED_BYTE,Se):n.texImage2D(Me+ht,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Se);return we}const ke={};function ye(O){!0!==u[O]&&(n.enable(O),u[O]=!0)}function We(O){!1!==u[O]&&(n.disable(O),u[O]=!1)}ke[n.TEXTURE_2D]=pe(n.TEXTURE_2D,n.TEXTURE_2D,1),ke[n.TEXTURE_CUBE_MAP]=pe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ke[n.TEXTURE_2D_ARRAY]=pe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ke[n.TEXTURE_3D]=pe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ye(n.DEPTH_TEST),o.setFunc(3),se(!1),ae(1),ye(n.CULL_FACE),P(0);const Yt={[Ya]:n.FUNC_ADD,[ZK]:n.FUNC_SUBTRACT,[KK]:n.FUNC_REVERSE_SUBTRACT};Yt[103]=n.MIN,Yt[104]=n.MAX;const _t={[eJ]:n.ZERO,[tJ]:n.ONE,[nJ]:n.SRC_COLOR,[UM]:n.SRC_ALPHA,[cJ]:n.SRC_ALPHA_SATURATE,[oJ]:n.DST_COLOR,[rJ]:n.DST_ALPHA,[iJ]:n.ONE_MINUS_SRC_COLOR,[BM]:n.ONE_MINUS_SRC_ALPHA,[aJ]:n.ONE_MINUS_DST_COLOR,[sJ]:n.ONE_MINUS_DST_ALPHA,[lJ]:n.CONSTANT_COLOR,[uJ]:n.ONE_MINUS_CONSTANT_COLOR,[dJ]:n.CONSTANT_ALPHA,[hJ]:n.ONE_MINUS_CONSTANT_ALPHA};function P(O,Me,Y,oe,Se,we,ht,Cn,gi,Ht){if(0!==O){if(!1===v&&(ye(n.BLEND),v=!0),5===O)Se=Se||Me,we=we||Y,ht=ht||oe,(Me!==g||Se!==x)&&(n.blendEquationSeparate(Yt[Me],Yt[Se]),g=Me,x=Se),(Y!==y||oe!==_||we!==D||ht!==C)&&(n.blendFuncSeparate(_t[Y],_t[oe],_t[we],_t[ht]),y=Y,_=oe,D=we,C=ht),(!1===Cn.equals(A)||gi!==I)&&(n.blendColor(Cn.r,Cn.g,Cn.b,gi),A.copy(Cn),I=gi),m=O,w=!1;else if(O!==m||Ht!==w){if((100!==g||100!==x)&&(n.blendEquation(n.FUNC_ADD),g=100,x=100),Ht)switch(O){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",O)}else switch(O){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",O)}y=null,_=null,D=null,C=null,A.set(0,0,0),I=0,m=O,w=Ht}}else!0===v&&(We(n.BLEND),v=!1)}function se(O){M!==O&&(n.frontFace(O?n.CW:n.CCW),M=O)}function ae(O){0!==O?(ye(n.CULL_FACE),O!==R&&n.cullFace(1===O?n.BACK:2===O?n.FRONT:n.FRONT_AND_BACK)):We(n.CULL_FACE),R=O}function _e(O,Me,Y){O?(ye(n.POLYGON_OFFSET_FILL),(V!==Me||X!==Y)&&(n.polygonOffset(Me,Y),V=Me,X=Y)):We(n.POLYGON_OFFSET_FILL)}return{buffers:{color:s,depth:o,stencil:a},enable:ye,disable:We,bindFramebuffer:function Ct(O,Me){return d[O]!==Me&&(n.bindFramebuffer(O,Me),d[O]=Me,O===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Me),O===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Me),!0)},drawBuffers:function ze(O,Me){let Y=h,oe=!1;if(O){Y=f.get(Me),void 0===Y&&(Y=[],f.set(Me,Y));const Se=O.textures;if(Y.length!==Se.length||Y[0]!==n.COLOR_ATTACHMENT0){for(let we=0,ht=Se.length;we<ht;we++)Y[we]=n.COLOR_ATTACHMENT0+we;Y.length=Se.length,oe=!0}}else Y[0]!==n.BACK&&(Y[0]=n.BACK,oe=!0);oe&&n.drawBuffers(Y)},useProgram:function Nt(O){return p!==O&&(n.useProgram(O),p=O,!0)},setBlending:P,setMaterial:function Sn(O,Me){2===O.side?We(n.CULL_FACE):ye(n.CULL_FACE);let Y=1===O.side;Me&&(Y=!Y),se(Y),1===O.blending&&!1===O.transparent?P(0):P(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.blendColor,O.blendAlpha,O.premultipliedAlpha),o.setFunc(O.depthFunc),o.setTest(O.depthTest),o.setMask(O.depthWrite),s.setMask(O.colorWrite);const oe=O.stencilWrite;a.setTest(oe),oe&&(a.setMask(O.stencilWriteMask),a.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),a.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),_e(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),!0===O.alphaToCoverage?ye(n.SAMPLE_ALPHA_TO_COVERAGE):We(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:se,setCullFace:ae,setLineWidth:function J(O){O!==W&&($&&n.lineWidth(O),W=O)},setPolygonOffset:_e,setScissorTest:function Q(O){O?ye(n.SCISSOR_TEST):We(n.SCISSOR_TEST)},activeTexture:function E(O){void 0===O&&(O=n.TEXTURE0+re-1),ve!==O&&(n.activeTexture(O),ve=O)},bindTexture:function b(O,Me,Y){void 0===Y&&(Y=null===ve?n.TEXTURE0+re-1:ve);let oe=De[Y];void 0===oe&&(oe={type:void 0,texture:void 0},De[Y]=oe),(oe.type!==O||oe.texture!==Me)&&(ve!==Y&&(n.activeTexture(Y),ve=Y),n.bindTexture(O,Me||ke[O]),oe.type=O,oe.texture=Me)},unbindTexture:function k(){const O=De[ve];void 0!==O&&void 0!==O.type&&(n.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)},compressedTexImage2D:function j(){try{n.compressedTexImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},compressedTexImage3D:function ee(){try{n.compressedTexImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texImage2D:function Ie(){try{n.texImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texImage3D:function $e(){try{n.texImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},updateUBOMapping:function Et(O,Me){let Y=l.get(Me);void 0===Y&&(Y=new WeakMap,l.set(Me,Y));let oe=Y.get(O);void 0===oe&&(oe=n.getUniformBlockIndex(Me,O.name),Y.set(O,oe))},uniformBlockBinding:function pt(O,Me){const oe=l.get(Me).get(O);c.get(Me)!==oe&&(n.uniformBlockBinding(Me,oe,O.__bindingPointIndex),c.set(Me,oe))},texStorage2D:function xt(){try{n.texStorage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texStorage3D:function he(){try{n.texStorage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texSubImage2D:function Z(){try{n.texSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},texSubImage3D:function Le(){try{n.texSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},compressedTexSubImage2D:function me(){try{n.compressedTexSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},compressedTexSubImage3D:function Te(){try{n.compressedTexSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}},scissor:function Ye(O){!1===Ft.equals(O)&&(n.scissor(O.x,O.y,O.z,O.w),Ft.copy(O))},viewport:function Ae(O){!1===ie.equals(O)&&(n.viewport(O.x,O.y,O.z,O.w),ie.copy(O))},reset:function nn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},ve=null,De={},d={},f=new WeakMap,h=[],p=null,v=!1,m=null,g=null,y=null,_=null,x=null,D=null,C=null,A=new Ee(0,0,0),I=0,w=!1,M=null,R=null,W=null,V=null,X=null,Ft.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}}}function yse(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),l=new K,u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function p(E,b){return h?new OffscreenCanvas(E,b):Vh("canvas")}function v(E,b,k){let j=1;const ee=Q(E);if((ee.width>k||ee.height>k)&&(j=k/Math.max(ee.width,ee.height)),j<1){if(typeof HTMLImageElement<"u"&&E instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&E instanceof ImageBitmap||typeof VideoFrame<"u"&&E instanceof VideoFrame){const Z=Math.floor(j*ee.width),Le=Math.floor(j*ee.height);void 0===d&&(d=p(Z,Le));const me=b?p(Z,Le):d;return me.width=Z,me.height=Le,me.getContext("2d").drawImage(E,0,0,Z,Le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+Z+"x"+Le+")."),me}return"data"in E&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),E}return E}function m(E){return E.generateMipmaps}function g(E){n.generateMipmap(E)}function y(E){return E.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:E.isWebGL3DRenderTarget?n.TEXTURE_3D:E.isWebGLArrayRenderTarget||E.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function _(E,b,k,j,ee=!1){if(null!==E){if(void 0!==n[E])return n[E];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+E+"'")}let Z=b;if(b===n.RED&&(k===n.FLOAT&&(Z=n.R32F),k===n.HALF_FLOAT&&(Z=n.R16F),k===n.UNSIGNED_BYTE&&(Z=n.R8)),b===n.RED_INTEGER&&(k===n.UNSIGNED_BYTE&&(Z=n.R8UI),k===n.UNSIGNED_SHORT&&(Z=n.R16UI),k===n.UNSIGNED_INT&&(Z=n.R32UI),k===n.BYTE&&(Z=n.R8I),k===n.SHORT&&(Z=n.R16I),k===n.INT&&(Z=n.R32I)),b===n.RG&&(k===n.FLOAT&&(Z=n.RG32F),k===n.HALF_FLOAT&&(Z=n.RG16F),k===n.UNSIGNED_BYTE&&(Z=n.RG8)),b===n.RG_INTEGER&&(k===n.UNSIGNED_BYTE&&(Z=n.RG8UI),k===n.UNSIGNED_SHORT&&(Z=n.RG16UI),k===n.UNSIGNED_INT&&(Z=n.RG32UI),k===n.BYTE&&(Z=n.RG8I),k===n.SHORT&&(Z=n.RG16I),k===n.INT&&(Z=n.RG32I)),b===n.RGB_INTEGER&&(k===n.UNSIGNED_BYTE&&(Z=n.RGB8UI),k===n.UNSIGNED_SHORT&&(Z=n.RGB16UI),k===n.UNSIGNED_INT&&(Z=n.RGB32UI),k===n.BYTE&&(Z=n.RGB8I),k===n.SHORT&&(Z=n.RGB16I),k===n.INT&&(Z=n.RGB32I)),b===n.RGBA_INTEGER&&(k===n.UNSIGNED_BYTE&&(Z=n.RGBA8UI),k===n.UNSIGNED_SHORT&&(Z=n.RGBA16UI),k===n.UNSIGNED_INT&&(Z=n.RGBA32UI),k===n.BYTE&&(Z=n.RGBA8I),k===n.SHORT&&(Z=n.RGBA16I),k===n.INT&&(Z=n.RGBA32I)),b===n.RGB&&k===n.UNSIGNED_INT_5_9_9_9_REV&&(Z=n.RGB9_E5),b===n.RGBA){const Le=ee?zm:Dt.getTransfer(j);k===n.FLOAT&&(Z=n.RGBA32F),k===n.HALF_FLOAT&&(Z=n.RGBA16F),k===n.UNSIGNED_BYTE&&(Z=Le===qt?n.SRGB8_ALPHA8:n.RGBA8),k===n.UNSIGNED_SHORT_4_4_4_4&&(Z=n.RGBA4),k===n.UNSIGNED_SHORT_5_5_5_1&&(Z=n.RGB5_A1)}return(Z===n.R16F||Z===n.R32F||Z===n.RG16F||Z===n.RG32F||Z===n.RGBA16F||Z===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Z}function x(E,b){let k;return E?null===b||b===jo||b===Fh?k=n.DEPTH24_STENCIL8:b===hr?k=n.DEPTH32F_STENCIL8:b===Oh&&(k=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===b||b===jo||b===Fh?k=n.DEPTH_COMPONENT24:b===hr?k=n.DEPTH_COMPONENT32F:b===Oh&&(k=n.DEPTH_COMPONENT16),k}function D(E,b){return!0===m(E)||E.isFramebufferTexture&&E.minFilter!==di&&E.minFilter!==Qn?Math.log2(Math.max(b.width,b.height))+1:void 0!==E.mipmaps&&E.mipmaps.length>0?E.mipmaps.length:E.isCompressedTexture&&Array.isArray(E.image)?b.mipmaps.length:1}function C(E){const b=E.target;b.removeEventListener("dispose",C),function I(E){const b=i.get(E);if(void 0===b.__webglInit)return;const k=E.source,j=f.get(k);if(j){const ee=j[b.__cacheKey];ee.usedTimes--,0===ee.usedTimes&&w(E),0===Object.keys(j).length&&f.delete(k)}i.remove(E)}(b),b.isVideoTexture&&u.delete(b)}function A(E){const b=E.target;b.removeEventListener("dispose",A),function M(E){const b=i.get(E);if(E.depthTexture&&(E.depthTexture.dispose(),i.remove(E.depthTexture)),E.isWebGLCubeRenderTarget)for(let j=0;j<6;j++){if(Array.isArray(b.__webglFramebuffer[j]))for(let ee=0;ee<b.__webglFramebuffer[j].length;ee++)n.deleteFramebuffer(b.__webglFramebuffer[j][ee]);else n.deleteFramebuffer(b.__webglFramebuffer[j]);b.__webglDepthbuffer&&n.deleteRenderbuffer(b.__webglDepthbuffer[j])}else{if(Array.isArray(b.__webglFramebuffer))for(let j=0;j<b.__webglFramebuffer.length;j++)n.deleteFramebuffer(b.__webglFramebuffer[j]);else n.deleteFramebuffer(b.__webglFramebuffer);if(b.__webglDepthbuffer&&n.deleteRenderbuffer(b.__webglDepthbuffer),b.__webglMultisampledFramebuffer&&n.deleteFramebuffer(b.__webglMultisampledFramebuffer),b.__webglColorRenderbuffer)for(let j=0;j<b.__webglColorRenderbuffer.length;j++)b.__webglColorRenderbuffer[j]&&n.deleteRenderbuffer(b.__webglColorRenderbuffer[j]);b.__webglDepthRenderbuffer&&n.deleteRenderbuffer(b.__webglDepthRenderbuffer)}const k=E.textures;for(let j=0,ee=k.length;j<ee;j++){const Z=i.get(k[j]);Z.__webglTexture&&(n.deleteTexture(Z.__webglTexture),o.memory.textures--),i.remove(k[j])}i.remove(E)}(b)}function w(E){const b=i.get(E);n.deleteTexture(b.__webglTexture),delete f.get(E.source)[b.__cacheKey],o.memory.textures--}let R=0;function re(E,b){const k=i.get(E);if(E.isVideoTexture&&function J(E){const b=o.render.frame;u.get(E)!==b&&(u.set(E,b),E.update())}(E),!1===E.isRenderTargetTexture&&E.version>0&&k.__version!==E.version){const j=E.image;if(null===j)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==j.complete)return void ie(k,E,b);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,k.__webglTexture,n.TEXTURE0+b)}const ve={[Im]:n.REPEAT,[Zr]:n.CLAMP_TO_EDGE,[Rm]:n.MIRRORED_REPEAT},De={[di]:n.NEAREST,[iL]:n.NEAREST_MIPMAP_NEAREST,[Nh]:n.NEAREST_MIPMAP_LINEAR,[Qn]:n.LINEAR,[Pm]:n.LINEAR_MIPMAP_NEAREST,[Ys]:n.LINEAR_MIPMAP_LINEAR},Oe={[AJ]:n.NEVER,[LJ]:n.ALWAYS,[IJ]:n.LESS,[gL]:n.LEQUAL,[RJ]:n.EQUAL,[OJ]:n.GEQUAL,[PJ]:n.GREATER,[NJ]:n.NOTEQUAL};function lt(E,b){if(b.type===hr&&!1===e.has("OES_texture_float_linear")&&(b.magFilter===Qn||1007===b.magFilter||1005===b.magFilter||b.magFilter===Ys||b.minFilter===Qn||1007===b.minFilter||1005===b.minFilter||b.minFilter===Ys)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(E,n.TEXTURE_WRAP_S,ve[b.wrapS]),n.texParameteri(E,n.TEXTURE_WRAP_T,ve[b.wrapT]),(E===n.TEXTURE_3D||E===n.TEXTURE_2D_ARRAY)&&n.texParameteri(E,n.TEXTURE_WRAP_R,ve[b.wrapR]),n.texParameteri(E,n.TEXTURE_MAG_FILTER,De[b.magFilter]),n.texParameteri(E,n.TEXTURE_MIN_FILTER,De[b.minFilter]),b.compareFunction&&(n.texParameteri(E,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(E,n.TEXTURE_COMPARE_FUNC,Oe[b.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(b.magFilter===di||1005!==b.minFilter&&b.minFilter!==Ys||b.type===hr&&!1===e.has("OES_texture_float_linear"))return;if(b.anisotropy>1||i.get(b).__currentAnisotropy){const k=e.get("EXT_texture_filter_anisotropic");n.texParameterf(E,k.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,r.getMaxAnisotropy())),i.get(b).__currentAnisotropy=b.anisotropy}}}function Ft(E,b){let k=!1;void 0===E.__webglInit&&(E.__webglInit=!0,b.addEventListener("dispose",C));const j=b.source;let ee=f.get(j);void 0===ee&&(ee={},f.set(j,ee));const Z=function X(E){const b=[];return b.push(E.wrapS),b.push(E.wrapT),b.push(E.wrapR||0),b.push(E.magFilter),b.push(E.minFilter),b.push(E.anisotropy),b.push(E.internalFormat),b.push(E.format),b.push(E.type),b.push(E.generateMipmaps),b.push(E.premultiplyAlpha),b.push(E.flipY),b.push(E.unpackAlignment),b.push(E.colorSpace),b.join()}(b);if(Z!==E.__cacheKey){void 0===ee[Z]&&(ee[Z]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,k=!0),ee[Z].usedTimes++;const Le=ee[E.__cacheKey];void 0!==Le&&(ee[E.__cacheKey].usedTimes--,0===Le.usedTimes&&w(b)),E.__cacheKey=Z,E.__webglTexture=ee[Z].texture}return k}function ie(E,b,k){let j=n.TEXTURE_2D;(b.isDataArrayTexture||b.isCompressedArrayTexture)&&(j=n.TEXTURE_2D_ARRAY),b.isData3DTexture&&(j=n.TEXTURE_3D);const ee=Ft(E,b),Z=b.source;t.bindTexture(j,E.__webglTexture,n.TEXTURE0+k);const Le=i.get(Z);if(Z.version!==Le.__version||!0===ee){t.activeTexture(n.TEXTURE0+k);const me=Dt.getPrimaries(Dt.workingColorSpace),Te=""===b.colorSpace?null:Dt.getPrimaries(b.colorSpace),xt=""===b.colorSpace||me===Te?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,b.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,b.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let he=v(b.image,!1,r.maxTextureSize);he=_e(b,he);const Ie=s.convert(b.format,b.colorSpace),$e=s.convert(b.type);let Ae,Ye=_(b.internalFormat,Ie,$e,b.colorSpace,b.isVideoTexture);lt(j,b);const Et=b.mipmaps,pt=!0!==b.isVideoTexture,nn=void 0===Le.__version||!0===ee,O=Z.dataReady,Me=D(b,he);if(b.isDepthTexture)Ye=x(b.format===Uh,b.type),nn&&(pt?t.texStorage2D(n.TEXTURE_2D,1,Ye,he.width,he.height):t.texImage2D(n.TEXTURE_2D,0,Ye,he.width,he.height,0,Ie,$e,null));else if(b.isDataTexture)if(Et.length>0){pt&&nn&&t.texStorage2D(n.TEXTURE_2D,Me,Ye,Et[0].width,Et[0].height);for(let Y=0,oe=Et.length;Y<oe;Y++)Ae=Et[Y],pt?O&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,Ae.width,Ae.height,Ie,$e,Ae.data):t.texImage2D(n.TEXTURE_2D,Y,Ye,Ae.width,Ae.height,0,Ie,$e,Ae.data);b.generateMipmaps=!1}else pt?(nn&&t.texStorage2D(n.TEXTURE_2D,Me,Ye,he.width,he.height),O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,he.width,he.height,Ie,$e,he.data)):t.texImage2D(n.TEXTURE_2D,0,Ye,he.width,he.height,0,Ie,$e,he.data);else if(b.isCompressedTexture)if(b.isCompressedArrayTexture){pt&&nn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Me,Ye,Et[0].width,Et[0].height,he.depth);for(let Y=0,oe=Et.length;Y<oe;Y++)if(Ae=Et[Y],b.format!==Xi)if(null!==Ie)if(pt){if(O)if(b.layerUpdates.size>0){const Se=$S(Ae.width,Ae.height,b.format,b.type);for(const we of b.layerUpdates){const ht=Ae.data.subarray(we*Se/Ae.data.BYTES_PER_ELEMENT,(we+1)*Se/Ae.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,we,Ae.width,Ae.height,1,Ie,ht)}b.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,Ae.width,Ae.height,he.depth,Ie,Ae.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Y,Ye,Ae.width,Ae.height,he.depth,0,Ae.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pt?O&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Y,0,0,0,Ae.width,Ae.height,he.depth,Ie,$e,Ae.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Y,Ye,Ae.width,Ae.height,he.depth,0,Ie,$e,Ae.data)}else{pt&&nn&&t.texStorage2D(n.TEXTURE_2D,Me,Ye,Et[0].width,Et[0].height);for(let Y=0,oe=Et.length;Y<oe;Y++)Ae=Et[Y],b.format!==Xi?null!==Ie?pt?O&&t.compressedTexSubImage2D(n.TEXTURE_2D,Y,0,0,Ae.width,Ae.height,Ie,Ae.data):t.compressedTexImage2D(n.TEXTURE_2D,Y,Ye,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?O&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,Ae.width,Ae.height,Ie,$e,Ae.data):t.texImage2D(n.TEXTURE_2D,Y,Ye,Ae.width,Ae.height,0,Ie,$e,Ae.data)}else if(b.isDataArrayTexture)if(pt){if(nn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Me,Ye,he.width,he.height,he.depth),O)if(b.layerUpdates.size>0){const Y=$S(he.width,he.height,b.format,b.type);for(const oe of b.layerUpdates){const Se=he.data.subarray(oe*Y/he.data.BYTES_PER_ELEMENT,(oe+1)*Y/he.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,oe,he.width,he.height,1,Ie,$e,Se)}b.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,he.width,he.height,he.depth,Ie,$e,he.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ye,he.width,he.height,he.depth,0,Ie,$e,he.data);else if(b.isData3DTexture)pt?(nn&&t.texStorage3D(n.TEXTURE_3D,Me,Ye,he.width,he.height,he.depth),O&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,he.width,he.height,he.depth,Ie,$e,he.data)):t.texImage3D(n.TEXTURE_3D,0,Ye,he.width,he.height,he.depth,0,Ie,$e,he.data);else if(b.isFramebufferTexture){if(nn)if(pt)t.texStorage2D(n.TEXTURE_2D,Me,Ye,he.width,he.height);else{let Y=he.width,oe=he.height;for(let Se=0;Se<Me;Se++)t.texImage2D(n.TEXTURE_2D,Se,Ye,Y,oe,0,Ie,$e,null),Y>>=1,oe>>=1}}else if(Et.length>0){if(pt&&nn){const Y=Q(Et[0]);t.texStorage2D(n.TEXTURE_2D,Me,Ye,Y.width,Y.height)}for(let Y=0,oe=Et.length;Y<oe;Y++)Ae=Et[Y],pt?O&&t.texSubImage2D(n.TEXTURE_2D,Y,0,0,Ie,$e,Ae):t.texImage2D(n.TEXTURE_2D,Y,Ye,Ie,$e,Ae);b.generateMipmaps=!1}else if(pt){if(nn){const Y=Q(he);t.texStorage2D(n.TEXTURE_2D,Me,Ye,Y.width,Y.height)}O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie,$e,he)}else t.texImage2D(n.TEXTURE_2D,0,Ye,Ie,$e,he);m(b)&&g(j),Le.__version=Z.version,b.onUpdate&&b.onUpdate(b)}E.__version=b.version}function ke(E,b,k,j,ee,Z){const Le=s.convert(k.format,k.colorSpace),me=s.convert(k.type),Te=_(k.internalFormat,Le,me,k.colorSpace),xt=i.get(b),he=i.get(k);if(he.__renderTarget=b,!xt.__hasExternalTextures){const Ie=Math.max(1,b.width>>Z),$e=Math.max(1,b.height>>Z);ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?t.texImage3D(ee,Z,Te,Ie,$e,b.depth,0,Le,me,null):t.texImage2D(ee,Z,Te,Ie,$e,0,Le,me,null)}t.bindFramebuffer(n.FRAMEBUFFER,E),ae(b)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,j,ee,he.__webglTexture,0,se(b)):(ee===n.TEXTURE_2D||ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,j,ee,he.__webglTexture,Z),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ye(E,b,k){if(n.bindRenderbuffer(n.RENDERBUFFER,E),b.depthBuffer){const j=b.depthTexture,Z=x(b.stencilBuffer,j&&j.isDepthTexture?j.type:null),Le=b.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,me=se(b);ae(b)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,me,Z,b.width,b.height):k?n.renderbufferStorageMultisample(n.RENDERBUFFER,me,Z,b.width,b.height):n.renderbufferStorage(n.RENDERBUFFER,Z,b.width,b.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Le,n.RENDERBUFFER,E)}else{const j=b.textures;for(let ee=0;ee<j.length;ee++){const Z=j[ee],Le=s.convert(Z.format,Z.colorSpace),me=s.convert(Z.type),Te=_(Z.internalFormat,Le,me,Z.colorSpace),xt=se(b);k&&!1===ae(b)?n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,Te,b.width,b.height):ae(b)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,xt,Te,b.width,b.height):n.renderbufferStorage(n.RENDERBUFFER,Te,b.width,b.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ct(E){const b=i.get(E),k=!0===E.isWebGLCubeRenderTarget;if(b.__boundDepthTexture!==E.depthTexture){const j=E.depthTexture;if(b.__depthDisposeCallback&&b.__depthDisposeCallback(),j){const ee=()=>{delete b.__boundDepthTexture,delete b.__depthDisposeCallback,j.removeEventListener("dispose",ee)};j.addEventListener("dispose",ee),b.__depthDisposeCallback=ee}b.__boundDepthTexture=j}if(E.depthTexture&&!b.__autoAllocateDepthBuffer){if(k)throw new Error("target.depthTexture not supported in Cube render targets");!function We(E,b){if(b&&b.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,E),!b.depthTexture||!b.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const j=i.get(b.depthTexture);j.__renderTarget=b,(!j.__webglTexture||b.depthTexture.image.width!==b.width||b.depthTexture.image.height!==b.height)&&(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0),re(b.depthTexture,0);const ee=j.__webglTexture,Z=se(b);if(b.depthTexture.format===kh)ae(b)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0,Z):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0);else{if(b.depthTexture.format!==Uh)throw new Error("Unknown depthTexture format");ae(b)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0,Z):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0)}}(b.__webglFramebuffer,E)}else if(k){b.__webglDepthbuffer=[];for(let j=0;j<6;j++)if(t.bindFramebuffer(n.FRAMEBUFFER,b.__webglFramebuffer[j]),void 0===b.__webglDepthbuffer[j])b.__webglDepthbuffer[j]=n.createRenderbuffer(),ye(b.__webglDepthbuffer[j],E,!1);else{const ee=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Z=b.__webglDepthbuffer[j];n.bindRenderbuffer(n.RENDERBUFFER,Z),n.framebufferRenderbuffer(n.FRAMEBUFFER,ee,n.RENDERBUFFER,Z)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,b.__webglFramebuffer),void 0===b.__webglDepthbuffer)b.__webglDepthbuffer=n.createRenderbuffer(),ye(b.__webglDepthbuffer,E,!1);else{const j=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ee=b.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ee),n.framebufferRenderbuffer(n.FRAMEBUFFER,j,n.RENDERBUFFER,ee)}t.bindFramebuffer(n.FRAMEBUFFER,null)}const _t=[],P=[];function se(E){return Math.min(r.maxSamples,E.samples)}function ae(E){const b=i.get(E);return E.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==b.__useRenderToTexture}function _e(E,b){const k=E.colorSpace,j=E.format,ee=E.type;return!0===E.isCompressedTexture||!0===E.isVideoTexture||k!==Xl&&""!==k&&(Dt.getTransfer(k)===qt?(j!==Xi||ee!==Zs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",k)),b}function Q(E){return typeof HTMLImageElement<"u"&&E instanceof HTMLImageElement?(l.width=E.naturalWidth||E.width,l.height=E.naturalHeight||E.height):typeof VideoFrame<"u"&&E instanceof VideoFrame?(l.width=E.displayWidth,l.height=E.displayHeight):(l.width=E.width,l.height=E.height),l}this.allocateTextureUnit=function V(){const E=R;return E>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+E+" texture units while this GPU supports only "+r.maxTextures),R+=1,E},this.resetTextureUnits=function W(){R=0},this.setTexture2D=re,this.setTexture2DArray=function $(E,b){const k=i.get(E);E.version>0&&k.__version!==E.version?ie(k,E,b):t.bindTexture(n.TEXTURE_2D_ARRAY,k.__webglTexture,n.TEXTURE0+b)},this.setTexture3D=function ue(E,b){const k=i.get(E);E.version>0&&k.__version!==E.version?ie(k,E,b):t.bindTexture(n.TEXTURE_3D,k.__webglTexture,n.TEXTURE0+b)},this.setTextureCube=function q(E,b){const k=i.get(E);E.version>0&&k.__version!==E.version?function pe(E,b,k){if(6!==b.image.length)return;const j=Ft(E,b),ee=b.source;t.bindTexture(n.TEXTURE_CUBE_MAP,E.__webglTexture,n.TEXTURE0+k);const Z=i.get(ee);if(ee.version!==Z.__version||!0===j){t.activeTexture(n.TEXTURE0+k);const Le=Dt.getPrimaries(Dt.workingColorSpace),me=""===b.colorSpace?null:Dt.getPrimaries(b.colorSpace),Te=""===b.colorSpace||Le===me?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,b.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,b.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Te);const xt=b.isCompressedTexture||b.image[0].isCompressedTexture,he=b.image[0]&&b.image[0].isDataTexture,Ie=[];for(let oe=0;oe<6;oe++)Ie[oe]=xt||he?he?b.image[oe].image:b.image[oe]:v(b.image[oe],!0,r.maxCubemapSize),Ie[oe]=_e(b,Ie[oe]);const $e=Ie[0],Ye=s.convert(b.format,b.colorSpace),Ae=s.convert(b.type),Et=_(b.internalFormat,Ye,Ae,b.colorSpace),pt=!0!==b.isVideoTexture,nn=void 0===Z.__version||!0===j,O=ee.dataReady;let Y,Me=D(b,$e);if(lt(n.TEXTURE_CUBE_MAP,b),xt){pt&&nn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Me,Et,$e.width,$e.height);for(let oe=0;oe<6;oe++){Y=Ie[oe].mipmaps;for(let Se=0;Se<Y.length;Se++){const we=Y[Se];b.format!==Xi?null!==Ye?pt?O&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se,0,0,we.width,we.height,Ye,we.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se,Et,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pt?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se,0,0,we.width,we.height,Ye,Ae,we.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se,Et,we.width,we.height,0,Ye,Ae,we.data)}}}else{if(Y=b.mipmaps,pt&&nn){Y.length>0&&Me++;const oe=Q(Ie[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Me,Et,oe.width,oe.height)}for(let oe=0;oe<6;oe++)if(he){pt?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,Ie[oe].width,Ie[oe].height,Ye,Ae,Ie[oe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Et,Ie[oe].width,Ie[oe].height,0,Ye,Ae,Ie[oe].data);for(let Se=0;Se<Y.length;Se++){const ht=Y[Se].image[oe].image;pt?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se+1,0,0,ht.width,ht.height,Ye,Ae,ht.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se+1,Et,ht.width,ht.height,0,Ye,Ae,ht.data)}}else{pt?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,Ye,Ae,Ie[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Et,Ye,Ae,Ie[oe]);for(let Se=0;Se<Y.length;Se++){const we=Y[Se];pt?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se+1,0,0,Ye,Ae,we.image[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Se+1,Et,Ye,Ae,we.image[oe])}}}m(b)&&g(n.TEXTURE_CUBE_MAP),Z.__version=ee.version,b.onUpdate&&b.onUpdate(b)}E.__version=b.version}(k,E,b):t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+b)},this.rebindTextures=function ze(E,b,k){const j=i.get(E);void 0!==b&&ke(j.__webglFramebuffer,E,E.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==k&&Ct(E)},this.setupRenderTarget=function Nt(E){const b=E.texture,k=i.get(E),j=i.get(b);E.addEventListener("dispose",A);const ee=E.textures,Z=!0===E.isWebGLCubeRenderTarget,Le=ee.length>1;if(Le||(void 0===j.__webglTexture&&(j.__webglTexture=n.createTexture()),j.__version=b.version,o.memory.textures++),Z){k.__webglFramebuffer=[];for(let me=0;me<6;me++)if(b.mipmaps&&b.mipmaps.length>0){k.__webglFramebuffer[me]=[];for(let Te=0;Te<b.mipmaps.length;Te++)k.__webglFramebuffer[me][Te]=n.createFramebuffer()}else k.__webglFramebuffer[me]=n.createFramebuffer()}else{if(b.mipmaps&&b.mipmaps.length>0){k.__webglFramebuffer=[];for(let me=0;me<b.mipmaps.length;me++)k.__webglFramebuffer[me]=n.createFramebuffer()}else k.__webglFramebuffer=n.createFramebuffer();if(Le)for(let me=0,Te=ee.length;me<Te;me++){const xt=i.get(ee[me]);void 0===xt.__webglTexture&&(xt.__webglTexture=n.createTexture(),o.memory.textures++)}if(E.samples>0&&!1===ae(E)){k.__webglMultisampledFramebuffer=n.createFramebuffer(),k.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,k.__webglMultisampledFramebuffer);for(let me=0;me<ee.length;me++){const Te=ee[me];k.__webglColorRenderbuffer[me]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,k.__webglColorRenderbuffer[me]);const xt=s.convert(Te.format,Te.colorSpace),he=s.convert(Te.type),Ie=_(Te.internalFormat,xt,he,Te.colorSpace,!0===E.isXRRenderTarget),$e=se(E);n.renderbufferStorageMultisample(n.RENDERBUFFER,$e,Ie,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+me,n.RENDERBUFFER,k.__webglColorRenderbuffer[me])}n.bindRenderbuffer(n.RENDERBUFFER,null),E.depthBuffer&&(k.__webglDepthRenderbuffer=n.createRenderbuffer(),ye(k.__webglDepthRenderbuffer,E,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Z){t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture),lt(n.TEXTURE_CUBE_MAP,b);for(let me=0;me<6;me++)if(b.mipmaps&&b.mipmaps.length>0)for(let Te=0;Te<b.mipmaps.length;Te++)ke(k.__webglFramebuffer[me][Te],E,b,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Te);else ke(k.__webglFramebuffer[me],E,b,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0);m(b)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Le){for(let me=0,Te=ee.length;me<Te;me++){const xt=ee[me],he=i.get(xt);t.bindTexture(n.TEXTURE_2D,he.__webglTexture),lt(n.TEXTURE_2D,xt),ke(k.__webglFramebuffer,E,xt,n.COLOR_ATTACHMENT0+me,n.TEXTURE_2D,0),m(xt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let me=n.TEXTURE_2D;if((E.isWebGL3DRenderTarget||E.isWebGLArrayRenderTarget)&&(me=E.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(me,j.__webglTexture),lt(me,b),b.mipmaps&&b.mipmaps.length>0)for(let Te=0;Te<b.mipmaps.length;Te++)ke(k.__webglFramebuffer[Te],E,b,n.COLOR_ATTACHMENT0,me,Te);else ke(k.__webglFramebuffer,E,b,n.COLOR_ATTACHMENT0,me,0);m(b)&&g(me),t.unbindTexture()}E.depthBuffer&&Ct(E)},this.updateRenderTargetMipmap=function Yt(E){const b=E.textures;for(let k=0,j=b.length;k<j;k++){const ee=b[k];if(m(ee)){const Z=y(E),Le=i.get(ee).__webglTexture;t.bindTexture(Z,Le),g(Z),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Sn(E){if(E.samples>0)if(!1===ae(E)){const b=E.textures,k=E.width,j=E.height;let ee=n.COLOR_BUFFER_BIT;const Z=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=i.get(E),me=b.length>1;if(me)for(let Te=0;Te<b.length;Te++)t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Le.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglFramebuffer);for(let Te=0;Te<b.length;Te++){if(E.resolveDepthBuffer&&(E.depthBuffer&&(ee|=n.DEPTH_BUFFER_BIT),E.stencilBuffer&&E.resolveStencilBuffer&&(ee|=n.STENCIL_BUFFER_BIT)),me){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Le.__webglColorRenderbuffer[Te]);const xt=i.get(b[Te]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,xt,0)}n.blitFramebuffer(0,0,k,j,0,0,k,j,ee,n.NEAREST),!0===c&&(_t.length=0,P.length=0,_t.push(n.COLOR_ATTACHMENT0+Te),E.depthBuffer&&!1===E.resolveDepthBuffer&&(_t.push(Z),P.push(Z),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,P)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,_t))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),me)for(let Te=0;Te<b.length;Te++){t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.RENDERBUFFER,Le.__webglColorRenderbuffer[Te]);const xt=i.get(b[Te]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.TEXTURE_2D,xt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglMultisampledFramebuffer)}else E.depthBuffer&&!1===E.resolveDepthBuffer&&c&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Ct,this.setupFrameBufferTexture=ke,this.useMultisampledRTT=ae}function _se(n,e){return{convert:function t(i,r=""){let s;const o=Dt.getTransfer(r);if(i===Zs)return n.UNSIGNED_BYTE;if(1017===i)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return n.UNSIGNED_SHORT_5_5_5_1;if(35902===i)return n.UNSIGNED_INT_5_9_9_9_REV;if(1010===i)return n.BYTE;if(1011===i)return n.SHORT;if(i===Oh)return n.UNSIGNED_SHORT;if(1013===i)return n.INT;if(i===jo)return n.UNSIGNED_INT;if(i===hr)return n.FLOAT;if(i===Lh)return n.HALF_FLOAT;if(1021===i)return n.ALPHA;if(1022===i)return n.RGB;if(i===Xi)return n.RGBA;if(1024===i)return n.LUMINANCE;if(1025===i)return n.LUMINANCE_ALPHA;if(i===kh)return n.DEPTH_COMPONENT;if(i===Uh)return n.DEPTH_STENCIL;if(1028===i)return n.RED;if(1029===i)return n.RED_INTEGER;if(1030===i)return n.RG;if(1031===i)return n.RG_INTEGER;if(1033===i)return n.RGBA_INTEGER;if(i===Om||i===Lm||i===Fm||i===km)if(o===qt){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===Om)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Lm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Fm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===km)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===Om)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Lm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Fm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===km)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===i||35841===i||35842===i||35843===i){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===i)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i||37492===i||37496===i){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(36196===i||37492===i)return o===qt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(37808===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===i)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===Um||36494===i||36495===i){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===Um)return o===qt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===i)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===i)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===i||36284===i||36285===i||36286===i){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===Um)return s.COMPRESSED_RED_RGTC1_EXT;if(36284===i)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===i)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===i)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Fh?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}class Mse{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new Yi;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Ss({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new An(new Mu(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class wse extends Ks{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,f=null,h=null,p=null;const v=new Mse,m=t.getContextAttributes();let g=null,y=null;const _=[],x=[],D=new K;let C=null;const A=new oi;A.viewport=new At;const I=new oi;I.viewport=new At;const w=[A,I],M=new nte;let R=null,W=null;function V(ie){const pe=x.indexOf(ie.inputSource);if(-1===pe)return;const ke=_[pe];void 0!==ke&&(ke.update(ie.inputSource,ie.frame,l||o),ke.dispatchEvent({type:ie.type,data:ie.inputSource}))}function X(){r.removeEventListener("select",V),r.removeEventListener("selectstart",V),r.removeEventListener("selectend",V),r.removeEventListener("squeeze",V),r.removeEventListener("squeezestart",V),r.removeEventListener("squeezeend",V),r.removeEventListener("end",X),r.removeEventListener("inputsourceschange",re);for(let ie=0;ie<_.length;ie++){const pe=x[ie];null!==pe&&(x[ie]=null,_[ie].disconnect(pe))}R=null,W=null,v.reset(),e.setRenderTarget(g),h=null,f=null,d=null,r=null,y=null,Ft.stop(),i.isPresenting=!1,e.setPixelRatio(C),e.setSize(D.width,D.height,!1),i.dispatchEvent({type:"sessionend"})}function re(ie){for(let pe=0;pe<ie.removed.length;pe++){const ke=ie.removed[pe],ye=x.indexOf(ke);ye>=0&&(x[ye]=null,_[ye].disconnect(ke))}for(let pe=0;pe<ie.added.length;pe++){const ke=ie.added[pe];let ye=x.indexOf(ke);if(-1===ye){for(let Ct=0;Ct<_.length;Ct++){if(Ct>=x.length){x.push(ke),ye=Ct;break}if(null===x[Ct]){x[Ct]=ke,ye=Ct;break}}if(-1===ye)break}const We=_[ye];We&&We.connect(ke)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let pe=_[ie];return void 0===pe&&(pe=new Qw,_[ie]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(ie){let pe=_[ie];return void 0===pe&&(pe=new Qw,_[ie]=pe),pe.getGripSpace()},this.getHand=function(ie){let pe=_[ie];return void 0===pe&&(pe=new Qw,_[ie]=pe),pe.getHandSpace()},this.setFramebufferScaleFactor=function(ie){s=ie,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(ie){l=ie},this.getBaseLayer=function(){return null!==f?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var ie=Li(function*(pe){if(r=pe,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",V),r.addEventListener("selectstart",V),r.addEventListener("selectend",V),r.addEventListener("squeeze",V),r.addEventListener("squeezestart",V),r.addEventListener("squeezeend",V),r.addEventListener("end",X),r.addEventListener("inputsourceschange",re),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),C=e.getPixelRatio(),e.getSize(D),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ye=null,We=null,Ct=null;m.depth&&(Ct=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ye=m.stencil?Uh:kh,We=m.stencil?Fh:jo);const ze={colorFormat:t.RGBA8,depthFormat:Ct,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(ze),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),y=new Qs(f.textureWidth,f.textureHeight,{format:Xi,type:Zs,depthTexture:new lF(f.textureWidth,f.textureHeight,We,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===f.ignoreDepthValues,resolveStencilBuffer:!1===f.ignoreDepthValues})}else h=new XRWebGLLayer(r,t,{antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),y=new Qs(h.framebufferWidth,h.framebufferHeight,{format:Xi,type:Zs,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues});y.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=yield r.requestReferenceSpace(a),Ft.setContext(r),Ft.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(pe){return ie.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};const $=new T,ue=new T;function ve(ie,pe){null===pe?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(pe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(null===r)return;let pe=ie.near,ke=ie.far;null!==v.texture&&(v.depthNear>0&&(pe=v.depthNear),v.depthFar>0&&(ke=v.depthFar)),M.near=I.near=A.near=pe,M.far=I.far=A.far=ke,(R!==M.near||W!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),R=M.near,W=M.far),A.layers.mask=2|ie.layers.mask,I.layers.mask=4|ie.layers.mask,M.layers.mask=A.layers.mask|I.layers.mask;const ye=ie.parent,We=M.cameras;ve(M,ye);for(let Ct=0;Ct<We.length;Ct++)ve(We[Ct],ye);2===We.length?function q(ie,pe,ke){$.setFromMatrixPosition(pe.matrixWorld),ue.setFromMatrixPosition(ke.matrixWorld);const ye=$.distanceTo(ue),We=pe.projectionMatrix.elements,Ct=ke.projectionMatrix.elements,ze=We[14]/(We[10]-1),Nt=We[14]/(We[10]+1),Yt=(We[9]+1)/We[5],_t=(We[9]-1)/We[5],P=(We[8]-1)/We[0],Sn=(Ct[8]+1)/Ct[0],se=ze*P,ae=ze*Sn,J=ye/(-P+Sn),_e=J*-P;if(pe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(_e),ie.translateZ(J),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),-1===We[10])ie.projectionMatrix.copy(pe.projectionMatrix),ie.projectionMatrixInverse.copy(pe.projectionMatrixInverse);else{const Q=ze+J,E=Nt+J;ie.projectionMatrix.makePerspective(se-_e,ae+(ye-_e),Yt*Nt/E*Q,_t*Nt/E*Q,Q,E),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}(M,A,I):M.projectionMatrix.copy(A.projectionMatrix),function De(ie,pe,ke){null===ke?ie.matrix.copy(pe.matrixWorld):(ie.matrix.copy(ke.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(pe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(pe.projectionMatrix),ie.projectionMatrixInverse.copy(pe.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=2*Zl*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}(ie,M,ye)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==f||null!==h)return c},this.setFoveation=function(ie){c=ie,null!==f&&(f.fixedFoveation=ie),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=ie)},this.hasDepthSensing=function(){return null!==v.texture},this.getDepthSensingMesh=function(){return v.getMesh(M)};let Oe=null;const Ft=new uk;Ft.setAnimationLoop(function lt(ie,pe){if(u=pe.getViewerPose(l||o),p=pe,null!==u){const ke=u.views;null!==h&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let ye=!1;ke.length!==M.cameras.length&&(M.cameras.length=0,ye=!0);for(let ze=0;ze<ke.length;ze++){const Nt=ke[ze];let Yt=null;if(null!==h)Yt=h.getViewport(Nt);else{const P=d.getViewSubImage(f,Nt);Yt=P.viewport,0===ze&&(e.setRenderTargetTextures(y,P.colorTexture,P.depthStencilTexture),e.setRenderTarget(y))}let _t=w[ze];void 0===_t&&(_t=new oi,_t.layers.enable(ze),_t.viewport=new At,w[ze]=_t),_t.matrix.fromArray(Nt.transform.matrix),_t.matrix.decompose(_t.position,_t.quaternion,_t.scale),_t.projectionMatrix.fromArray(Nt.projectionMatrix),_t.projectionMatrixInverse.copy(_t.projectionMatrix).invert(),_t.viewport.set(Yt.x,Yt.y,Yt.width,Yt.height),0===ze&&(M.matrix.copy(_t.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===ye&&M.cameras.push(_t)}const We=r.enabledFeatures;if(We&&We.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&d){const ze=d.getDepthInformation(ke[0]);ze&&ze.isValid&&ze.texture&&v.init(e,ze,r.renderState)}}for(let ke=0;ke<_.length;ke++){const ye=x[ke],We=_[ke];null!==ye&&void 0!==We&&We.update(ye,pe,l||o)}Oe&&Oe(ie,pe),pe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:pe}),p=null}),this.setAnimationLoop=function(ie){Oe=ie},this.dispose=function(){}}}const yc=new no,Sse=new Qe;function Cse(n,e){function t(m,g){!0===m.matrixAutoUpdate&&m.updateMatrix(),g.value.copy(m.matrix)}function s(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,t(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,t(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,t(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,t(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const y=e.get(g),_=y.envMap,x=y.envMapRotation;_&&(m.envMap.value=_,yc.copy(x),yc.x*=-1,yc.y*=-1,yc.z*=-1,_.isCubeTexture&&!1===_.isRenderTargetTexture&&(yc.y*=-1,yc.z*=-1),m.envMapRotation.value.setFromMatrix4(Sse.makeRotationFromEuler(yc)),m.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap&&(m.lightMap.value=g.lightMap,m.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,m.lightMapTransform)),g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function i(m,g){g.color.getRGB(m.fogColor.value,kL(n)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function r(m,g,y,_,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(m,g):g.isMeshToonMaterial?(s(m,g),function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(s(m,g),function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(s(m,g),function f(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,m.roughnessMapTransform)),g.envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,y){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),1===g.side&&m.clearcoatNormalScale.value.negate())),g.dispersion>0&&(m.dispersion.value=g.dispersion),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,m.specularIntensityMapTransform))}(m,g,x)):g.isMeshMatcapMaterial?(s(m,g),function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?s(m,g):g.isMeshDistanceMaterial?(s(m,g),function v(m,g){const y=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(y.matrixWorld),m.nearDistance.value=y.shadow.camera.near,m.farDistance.value=y.shadow.camera.far}(m,g)):g.isMeshNormalMaterial?s(m,g):g.isLineBasicMaterial?(function o(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform))}(m,g),g.isLineDashedMaterial&&function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function c(m,g,y,_){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*y,m.scale.value=.5*_,g.map&&(m.map.value=g.map,t(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g,y,_):g.isSpriteMaterial?function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function Ese(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function h(y,_,x,D){const C=y.value,A=_+"_"+x;if(void 0===D[A])return D[A]="number"==typeof C||"boolean"==typeof C?C:C.clone(),!0;{const I=D[A];if("number"==typeof C||"boolean"==typeof C){if(I!==C)return D[A]=C,!0}else if(!1===I.equals(C))return I.copy(C),!0}return!1}function v(y){const _={boundary:0,storage:0};return"number"==typeof y||"boolean"==typeof y?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function m(y){const _=y.target;_.removeEventListener("dispose",m);const x=o.indexOf(_.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}return{bind:function c(y,_){i.uniformBlockBinding(y,_.program)},update:function l(y,_){let x=r[y.id];void 0===x&&(function p(y){const _=y.uniforms;let x=0;for(let A=0,I=_.length;A<I;A++){const w=Array.isArray(_[A])?_[A]:[_[A]];for(let M=0,R=w.length;M<R;M++){const W=w[M],V=Array.isArray(W.value)?W.value:[W.value];for(let X=0,re=V.length;X<re;X++){const ue=v(V[X]),q=x%16,ve=q%ue.boundary,De=q+ve;x+=ve,0!==De&&16-De<ue.storage&&(x+=16-De),W.__data=new Float32Array(ue.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=x,x+=ue.storage}}}const C=x%16;C>0&&(x+=16-C),y.__size=x,y.__cache={}}(y),x=function u(y){const _=function d(){for(let y=0;y<a;y++)if(-1===o.indexOf(y))return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();y.__bindingPointIndex=_;const x=n.createBuffer(),D=y.__size,C=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,D,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,x),x}(y),r[y.id]=x,y.addEventListener("dispose",m)),i.updateUBOMapping(y,_.program);const C=e.render.frame;s[y.id]!==C&&(function f(y){const x=y.uniforms,D=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[y.id]);for(let C=0,A=x.length;C<A;C++){const I=Array.isArray(x[C])?x[C]:[x[C]];for(let w=0,M=I.length;w<M;w++){const R=I[w];if(!0===h(R,C,w,D)){const W=R.__offset,V=Array.isArray(R.value)?R.value:[R.value];let X=0;for(let re=0;re<V.length;re++){const $=V[re],ue=v($);"number"==typeof $||"boolean"==typeof $?(R.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,W+X,R.__data)):$.isMatrix3?(R.__data[0]=$.elements[0],R.__data[1]=$.elements[1],R.__data[2]=$.elements[2],R.__data[3]=0,R.__data[4]=$.elements[3],R.__data[5]=$.elements[4],R.__data[6]=$.elements[5],R.__data[7]=0,R.__data[8]=$.elements[6],R.__data[9]=$.elements[7],R.__data[10]=$.elements[8],R.__data[11]=0):($.toArray(R.__data,X),X+=ue.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,W,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(y),s[y.id]=C)},dispose:function g(){for(const y in r)n.deleteBuffer(r[y]);o=[],r={},s={}}}}class Dse{constructor(e={}){const{canvas:t=eQ(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const p=new Uint32Array(4),v=new Int32Array(4);let m=null,g=null;const y=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const x=this;let D=!1;this._outputColorSpace=fr;let C=0,A=0,I=null,w=-1,M=null;const R=new At,W=new At;let V=null;const X=new Ee(0);let re=0,$=t.width,ue=t.height,q=1,ve=null,De=null;const Oe=new At(0,0,$,ue),lt=new At(0,0,$,ue);let Ft=!1;const ie=new v0;let pe=!1,ke=!1;const ye=new Qe,We=new Qe,Ct=new T,ze=new At,Nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Yt=!1;function _t(){return null===I?q:1}let se,ae,J,_e,Q,E,b,k,j,ee,Z,Le,me,Te,xt,he,Ie,$e,Ye,Ae,Et,pt,nn,O,P=i;function Sn(S,L){return t.getContext(S,L)}try{const S={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r175"),t.addEventListener("webglcontextlost",oe,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",we,!1),null===P){const L="webgl2";if(P=Sn(L,S),null===P)throw Sn(L)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(S){throw console.error("THREE.WebGLRenderer: "+S.message),S}function Me(){se=new kie(P),se.init(),pt=new _se(P,se),ae=new Iie(P,se,e,pt),J=new vse(P,se),ae.reverseDepthBuffer&&f&&J.buffers.depth.setReversed(!0),_e=new Vie(P),Q=new rse,E=new yse(P,se,J,Q,ae,pt,_e),b=new Pie(x),k=new Fie(x),j=new Ete(P),nn=new Tie(P,j),ee=new Uie(P,j,_e,nn),Z=new Hie(P,ee,j,_e),Ye=new zie(P,ae,E),he=new Rie(Q),Le=new ise(x,b,k,se,ae,nn,he),me=new Cse(x,Q),Te=new ose,xt=new hse(se),$e=new Die(x,b,k,J,Z,h,c),Ie=new gse(x,Z,ae),O=new Ese(P,_e,ae,J),Ae=new Aie(P,se,_e),Et=new Bie(P,se,_e),_e.programs=Le.programs,x.capabilities=ae,x.extensions=se,x.properties=Q,x.renderLists=Te,x.shadowMap=Ie,x.state=J,x.info=_e}Me();const Y=new wse(x,P);function oe(S){S.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const S=_e.autoReset,L=Ie.enabled,z=Ie.autoUpdate,G=Ie.needsUpdate,U=Ie.type;Me(),_e.autoReset=S,Ie.enabled=L,Ie.autoUpdate=z,Ie.needsUpdate=G,Ie.type=U}function we(S){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",S.statusMessage)}function ht(S){const L=S.target;L.removeEventListener("dispose",ht),function Cn(S){(function gi(S){const L=Q.get(S).programs;void 0!==L&&(L.forEach(function(z){Le.releaseProgram(z)}),S.isShaderMaterial&&Le.releaseShaderCache(S))})(S),Q.remove(S)}(L)}function Ht(S,L,z){!0===S.transparent&&2===S.side&&!1===S.forceSinglePass?(S.side=1,S.needsUpdate=!0,nv(S,L,z),S.side=0,S.needsUpdate=!0,nv(S,L,z),S.side=2):nv(S,L,z)}this.xr=Y,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){const S=se.get("WEBGL_lose_context");S&&S.loseContext()},this.forceContextRestore=function(){const S=se.get("WEBGL_lose_context");S&&S.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(S){void 0!==S&&(q=S,this.setSize($,ue,!1))},this.getSize=function(S){return S.set($,ue)},this.setSize=function(S,L,z=!0){Y.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):($=S,ue=L,t.width=Math.floor(S*q),t.height=Math.floor(L*q),!0===z&&(t.style.width=S+"px",t.style.height=L+"px"),this.setViewport(0,0,S,L))},this.getDrawingBufferSize=function(S){return S.set($*q,ue*q).floor()},this.setDrawingBufferSize=function(S,L,z){$=S,ue=L,q=z,t.width=Math.floor(S*z),t.height=Math.floor(L*z),this.setViewport(0,0,S,L)},this.getCurrentViewport=function(S){return S.copy(R)},this.getViewport=function(S){return S.copy(Oe)},this.setViewport=function(S,L,z,G){S.isVector4?Oe.set(S.x,S.y,S.z,S.w):Oe.set(S,L,z,G),J.viewport(R.copy(Oe).multiplyScalar(q).round())},this.getScissor=function(S){return S.copy(lt)},this.setScissor=function(S,L,z,G){S.isVector4?lt.set(S.x,S.y,S.z,S.w):lt.set(S,L,z,G),J.scissor(W.copy(lt).multiplyScalar(q).round())},this.getScissorTest=function(){return Ft},this.setScissorTest=function(S){J.setScissorTest(Ft=S)},this.setOpaqueSort=function(S){ve=S},this.setTransparentSort=function(S){De=S},this.getClearColor=function(S){return S.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor(...arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha(...arguments)},this.clear=function(S=!0,L=!0,z=!0){let G=0;if(S){let U=!1;if(null!==I){const de=I.texture.format;U=1033===de||1031===de||1029===de}if(U){const de=I.texture.type,be=de===Zs||de===jo||de===Oh||de===Fh||1017===de||1018===de,Pe=$e.getClearColor(),Re=$e.getClearAlpha(),rt=Pe.r,tt=Pe.g,He=Pe.b;be?(p[0]=rt,p[1]=tt,p[2]=He,p[3]=Re,P.clearBufferuiv(P.COLOR,0,p)):(v[0]=rt,v[1]=tt,v[2]=He,v[3]=Re,P.clearBufferiv(P.COLOR,0,v))}else G|=P.COLOR_BUFFER_BIT}L&&(G|=P.DEPTH_BUFFER_BIT),z&&(G|=P.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),P.clear(G)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",oe,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",we,!1),$e.dispose(),Te.dispose(),xt.dispose(),Q.dispose(),b.dispose(),k.dispose(),Z.dispose(),nn.dispose(),O.dispose(),Le.dispose(),Y.dispose(),Y.removeEventListener("sessionstart",Hk),Y.removeEventListener("sessionend",Gk),_c.stop()},this.renderBufferDirect=function(S,L,z,G,U,de){null===L&&(L=Nt);const be=U.isMesh&&U.matrixWorld.determinant()<0,Pe=function hoe(S,L,z,G,U){!0!==L.isScene&&(L=Nt),E.resetTextureUnits();const de=L.fog,Pe=null===I?x.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:Xl,Re=(G.isMeshStandardMaterial?k:b).get(G.envMap||(G.isMeshStandardMaterial?L.environment:null)),rt=!0===G.vertexColors&&!!z.attributes.color&&4===z.attributes.color.itemSize,tt=!!z.attributes.tangent&&(!!G.normalMap||G.anisotropy>0),He=!!z.morphAttributes.position,wt=!!z.morphAttributes.normal,Gt=!!z.morphAttributes.color;let gn=0;G.toneMapped&&(null===I||!0===I.isXRRenderTarget)&&(gn=x.toneMapping);const En=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,It=void 0!==En?En.length:0,Ge=Q.get(G),ai=g.state.lights;!0!==pe||!0!==ke&&S===M||he.setState(G,S,S===M&&G.id===w);let kt=!1;G.version===Ge.__version?(Ge.needsLights&&Ge.lightsStateVersion!==ai.state.version||Ge.outputColorSpace!==Pe||U.isBatchedMesh&&!1===Ge.batching||!U.isBatchedMesh&&!0===Ge.batching||U.isBatchedMesh&&!0===Ge.batchingColor&&null===U.colorTexture||U.isBatchedMesh&&!1===Ge.batchingColor&&null!==U.colorTexture||U.isInstancedMesh&&!1===Ge.instancing||!U.isInstancedMesh&&!0===Ge.instancing||U.isSkinnedMesh&&!1===Ge.skinning||!U.isSkinnedMesh&&!0===Ge.skinning||U.isInstancedMesh&&!0===Ge.instancingColor&&null===U.instanceColor||U.isInstancedMesh&&!1===Ge.instancingColor&&null!==U.instanceColor||U.isInstancedMesh&&!0===Ge.instancingMorph&&null===U.morphTexture||U.isInstancedMesh&&!1===Ge.instancingMorph&&null!==U.morphTexture||Ge.envMap!==Re||!0===G.fog&&Ge.fog!==de||void 0!==Ge.numClippingPlanes&&(Ge.numClippingPlanes!==he.numPlanes||Ge.numIntersection!==he.numIntersection)||Ge.vertexAlphas!==rt||Ge.vertexTangents!==tt||Ge.morphTargets!==He||Ge.morphNormals!==wt||Ge.morphColors!==Gt||Ge.toneMapping!==gn||Ge.morphTargetsCount!==It)&&(kt=!0):(kt=!0,Ge.__version=G.version);let ns=Ge.currentProgram;!0===kt&&(ns=nv(G,L,U));let Tu=!1,yr=!1,ff=!1;const hn=ns.getUniforms(),Pr=Ge.uniforms;if(J.useProgram(ns.program)&&(Tu=!0,yr=!0,ff=!0),G.id!==w&&(w=G.id,yr=!0),Tu||M!==S){J.buffers.depth.getReversed()?(ye.copy(S.projectionMatrix),function nQ(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(ye),function iQ(n){const e=n.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(ye),hn.setValue(P,"projectionMatrix",ye)):hn.setValue(P,"projectionMatrix",S.projectionMatrix),hn.setValue(P,"viewMatrix",S.matrixWorldInverse);const er=hn.map.cameraPosition;void 0!==er&&er.setValue(P,Ct.setFromMatrixPosition(S.matrixWorld)),ae.logarithmicDepthBuffer&&hn.setValue(P,"logDepthBufFC",2/(Math.log(S.far+1)/Math.LN2)),(G.isMeshPhongMaterial||G.isMeshToonMaterial||G.isMeshLambertMaterial||G.isMeshBasicMaterial||G.isMeshStandardMaterial||G.isShaderMaterial)&&hn.setValue(P,"isOrthographic",!0===S.isOrthographicCamera),M!==S&&(M=S,yr=!0,ff=!0)}if(U.isSkinnedMesh){hn.setOptional(P,U,"bindMatrix"),hn.setOptional(P,U,"bindMatrixInverse");const Oi=U.skeleton;Oi&&(null===Oi.boneTexture&&Oi.computeBoneTexture(),hn.setValue(P,"boneTexture",Oi.boneTexture,E))}U.isBatchedMesh&&(hn.setOptional(P,U,"batchingTexture"),hn.setValue(P,"batchingTexture",U._matricesTexture,E),hn.setOptional(P,U,"batchingIdTexture"),hn.setValue(P,"batchingIdTexture",U._indirectTexture,E),hn.setOptional(P,U,"batchingColorTexture"),null!==U._colorsTexture&&hn.setValue(P,"batchingColorTexture",U._colorsTexture,E));const Nr=z.morphAttributes;if((void 0!==Nr.position||void 0!==Nr.normal||void 0!==Nr.color)&&Ye.update(U,z,ns),(yr||Ge.receiveShadow!==U.receiveShadow)&&(Ge.receiveShadow=U.receiveShadow,hn.setValue(P,"receiveShadow",U.receiveShadow)),G.isMeshGouraudMaterial&&null!==G.envMap&&(Pr.envMap.value=Re,Pr.flipEnvMap.value=Re.isCubeTexture&&!1===Re.isRenderTargetTexture?-1:1),G.isMeshStandardMaterial&&null===G.envMap&&null!==L.environment&&(Pr.envMapIntensity.value=L.environmentIntensity),yr&&(hn.setValue(P,"toneMappingExposure",x.toneMappingExposure),Ge.needsLights&&function foe(S,L){S.ambientLightColor.needsUpdate=L,S.lightProbe.needsUpdate=L,S.directionalLights.needsUpdate=L,S.directionalLightShadows.needsUpdate=L,S.pointLights.needsUpdate=L,S.pointLightShadows.needsUpdate=L,S.spotLights.needsUpdate=L,S.spotLightShadows.needsUpdate=L,S.rectAreaLights.needsUpdate=L,S.hemisphereLights.needsUpdate=L}(Pr,ff),de&&!0===G.fog&&me.refreshFogUniforms(Pr,de),me.refreshMaterialUniforms(Pr,G,q,ue,g.state.transmissionRenderTarget[S.id]),J0.upload(P,qk(Ge),Pr,E)),G.isShaderMaterial&&!0===G.uniformsNeedUpdate&&(J0.upload(P,qk(Ge),Pr,E),G.uniformsNeedUpdate=!1),G.isSpriteMaterial&&hn.setValue(P,"center",U.center),hn.setValue(P,"modelViewMatrix",U.modelViewMatrix),hn.setValue(P,"normalMatrix",U.normalMatrix),hn.setValue(P,"modelMatrix",U.matrixWorld),G.isShaderMaterial||G.isRawShaderMaterial){const Oi=G.uniformsGroups;for(let er=0,rC=Oi.length;er<rC;er++){const xc=Oi[er];O.update(xc,ns),O.bind(xc,ns)}}return ns}(S,L,z,G,U);J.setMaterial(G,be);let Re=z.index,rt=1;if(!0===G.wireframe){if(Re=ee.getWireframeAttribute(z),void 0===Re)return;rt=2}const tt=z.drawRange,He=z.attributes.position;let wt=tt.start*rt,Gt=(tt.start+tt.count)*rt;null!==de&&(wt=Math.max(wt,de.start*rt),Gt=Math.min(Gt,(de.start+de.count)*rt)),null!==Re?(wt=Math.max(wt,0),Gt=Math.min(Gt,Re.count)):null!=He&&(wt=Math.max(wt,0),Gt=Math.min(Gt,He.count));const gn=Gt-wt;if(gn<0||gn===1/0)return;nn.setup(U,G,Pe,z,Re);let En,It=Ae;if(null!==Re&&(En=j.get(Re),It=Et,It.setIndex(En)),U.isMesh)!0===G.wireframe?(J.setLineWidth(G.wireframeLinewidth*_t()),It.setMode(P.LINES)):It.setMode(P.TRIANGLES);else if(U.isLine){let Ge=G.linewidth;void 0===Ge&&(Ge=1),J.setLineWidth(Ge*_t()),It.setMode(U.isLineSegments?P.LINES:U.isLineLoop?P.LINE_LOOP:P.LINE_STRIP)}else U.isPoints?It.setMode(P.POINTS):U.isSprite&&It.setMode(P.TRIANGLES);if(U.isBatchedMesh)if(null!==U._multiDrawInstances)Wm("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),It.renderMultiDrawInstances(U._multiDrawStarts,U._multiDrawCounts,U._multiDrawCount,U._multiDrawInstances);else if(se.get("WEBGL_multi_draw"))It.renderMultiDraw(U._multiDrawStarts,U._multiDrawCounts,U._multiDrawCount);else{const Ge=U._multiDrawStarts,ai=U._multiDrawCounts,kt=U._multiDrawCount,ns=Re?j.get(Re).bytesPerElement:1,Tu=Q.get(G).currentProgram.getUniforms();for(let yr=0;yr<kt;yr++)Tu.setValue(P,"_gl_DrawID",yr),It.render(Ge[yr]/ns,ai[yr])}else if(U.isInstancedMesh)It.renderInstances(wt,gn,U.count);else if(z.isInstancedBufferGeometry){const ai=Math.min(z.instanceCount,void 0!==z._maxInstanceCount?z._maxInstanceCount:1/0);It.renderInstances(wt,gn,ai)}else It.render(wt,gn)},this.compile=function(S,L,z=null){null===z&&(z=S),g=xt.get(z),g.init(L),_.push(g),z.traverseVisible(function(U){U.isLight&&U.layers.test(L.layers)&&(g.pushLight(U),U.castShadow&&g.pushShadow(U))}),S!==z&&S.traverseVisible(function(U){U.isLight&&U.layers.test(L.layers)&&(g.pushLight(U),U.castShadow&&g.pushShadow(U))}),g.setupLights();const G=new Set;return S.traverse(function(U){if(!(U.isMesh||U.isPoints||U.isLine||U.isSprite))return;const de=U.material;if(de)if(Array.isArray(de))for(let be=0;be<de.length;be++){const Pe=de[be];Ht(Pe,z,U),G.add(Pe)}else Ht(de,z,U),G.add(de)}),g=_.pop(),G},this.compileAsync=function(S,L,z=null){const G=this.compile(S,L,z);return new Promise(U=>{function de(){G.forEach(function(be){Q.get(be).currentProgram.isReady()&&G.delete(be)}),0!==G.size?setTimeout(de,10):U(S)}null!==se.get("KHR_parallel_shader_compile")?de():setTimeout(de,10)})};let ts=null;function Hk(){_c.stop()}function Gk(){_c.start()}const _c=new uk;function iC(S,L,z,G){if(!1===S.visible)return;if(S.layers.test(L.layers))if(S.isGroup)z=S.renderOrder;else if(S.isLOD)!0===S.autoUpdate&&S.update(L);else if(S.isLight)g.pushLight(S),S.castShadow&&g.pushShadow(S);else if(S.isSprite){if(!S.frustumCulled||ie.intersectsSprite(S)){G&&ze.setFromMatrixPosition(S.matrixWorld).applyMatrix4(We);const be=Z.update(S),Pe=S.material;Pe.visible&&m.push(S,be,Pe,z,ze.z,null)}}else if((S.isMesh||S.isLine||S.isPoints)&&(!S.frustumCulled||ie.intersectsObject(S))){const be=Z.update(S),Pe=S.material;if(G&&(void 0!==S.boundingSphere?(null===S.boundingSphere&&S.computeBoundingSphere(),ze.copy(S.boundingSphere.center)):(null===be.boundingSphere&&be.computeBoundingSphere(),ze.copy(be.boundingSphere.center)),ze.applyMatrix4(S.matrixWorld).applyMatrix4(We)),Array.isArray(Pe)){const Re=be.groups;for(let rt=0,tt=Re.length;rt<tt;rt++){const He=Re[rt],wt=Pe[He.materialIndex];wt&&wt.visible&&m.push(S,be,wt,z,ze.z,He)}}else Pe.visible&&m.push(S,be,Pe,z,ze.z,null)}const de=S.children;for(let be=0,Pe=de.length;be<Pe;be++)iC(de[be],L,z,G)}function Wk(S,L,z,G){const U=S.opaque,de=S.transmissive,be=S.transparent;g.setupLightsView(z),!0===pe&&he.setGlobalState(x.clippingPlanes,z),G&&J.viewport(R.copy(G)),U.length>0&&tv(U,L,z),de.length>0&&tv(de,L,z),be.length>0&&tv(be,L,z),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function jk(S,L,z,G){if(null!==(!0===z.isScene?z.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[G.id]&&(g.state.transmissionRenderTarget[G.id]=new Qs(1,1,{generateMipmaps:!0,type:se.has("EXT_color_buffer_half_float")||se.has("EXT_color_buffer_float")?Lh:Zs,minFilter:Ys,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Dt.workingColorSpace}));const de=g.state.transmissionRenderTarget[G.id],be=G.viewport||R;de.setSize(be.z*x.transmissionResolutionScale,be.w*x.transmissionResolutionScale);const Pe=x.getRenderTarget();x.setRenderTarget(de),x.getClearColor(X),re=x.getClearAlpha(),re<1&&x.setClearColor(16777215,.5),x.clear(),Yt&&$e.render(z);const Re=x.toneMapping;x.toneMapping=0;const rt=G.viewport;if(void 0!==G.viewport&&(G.viewport=void 0),g.setupLightsView(G),!0===pe&&he.setGlobalState(x.clippingPlanes,G),tv(S,z,G),E.updateMultisampleRenderTarget(de),E.updateRenderTargetMipmap(de),!1===se.has("WEBGL_multisampled_render_to_texture")){let tt=!1;for(let He=0,wt=L.length;He<wt;He++){const Gt=L[He],gn=Gt.object,En=Gt.geometry,It=Gt.material,Ge=Gt.group;if(2===It.side&&gn.layers.test(G.layers)){const ai=It.side;It.side=1,It.needsUpdate=!0,$k(gn,z,G,En,It,Ge),It.side=ai,It.needsUpdate=!0,tt=!0}}!0===tt&&(E.updateMultisampleRenderTarget(de),E.updateRenderTargetMipmap(de))}x.setRenderTarget(Pe),x.setClearColor(X,re),void 0!==rt&&(G.viewport=rt),x.toneMapping=Re}function tv(S,L,z){const G=!0===L.isScene?L.overrideMaterial:null;for(let U=0,de=S.length;U<de;U++){const be=S[U],Pe=be.object,Re=be.geometry,rt=be.group;let tt=be.material;!0===tt.allowOverride&&null!==G&&(tt=G),Pe.layers.test(z.layers)&&$k(Pe,L,z,Re,tt,rt)}}function $k(S,L,z,G,U,de){S.onBeforeRender(x,L,z,G,U,de),S.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,S.matrixWorld),S.normalMatrix.getNormalMatrix(S.modelViewMatrix),U.onBeforeRender(x,L,z,G,S,de),!0===U.transparent&&2===U.side&&!1===U.forceSinglePass?(U.side=1,U.needsUpdate=!0,x.renderBufferDirect(z,L,G,U,S,de),U.side=0,U.needsUpdate=!0,x.renderBufferDirect(z,L,G,U,S,de),U.side=2):x.renderBufferDirect(z,L,G,U,S,de),S.onAfterRender(x,L,z,G,U,de)}function nv(S,L,z){!0!==L.isScene&&(L=Nt);const G=Q.get(S),U=g.state.lights,be=U.state.version,Pe=Le.getParameters(S,U.state,g.state.shadowsArray,L,z),Re=Le.getProgramCacheKey(Pe);let rt=G.programs;G.environment=S.isMeshStandardMaterial?L.environment:null,G.fog=L.fog,G.envMap=(S.isMeshStandardMaterial?k:b).get(S.envMap||G.environment),G.envMapRotation=null!==G.environment&&null===S.envMap?L.environmentRotation:S.envMapRotation,void 0===rt&&(S.addEventListener("dispose",ht),rt=new Map,G.programs=rt);let tt=rt.get(Re);if(void 0!==tt){if(G.currentProgram===tt&&G.lightsStateVersion===be)return Xk(S,Pe),tt}else Pe.uniforms=Le.getUniforms(S),S.onBeforeCompile(Pe,x),tt=Le.acquireProgram(Pe,Re),rt.set(Re,tt),G.uniforms=Pe.uniforms;const He=G.uniforms;return(!S.isShaderMaterial&&!S.isRawShaderMaterial||!0===S.clipping)&&(He.clippingPlanes=he.uniform),Xk(S,Pe),G.needsLights=function poe(S){return S.isMeshLambertMaterial||S.isMeshToonMaterial||S.isMeshPhongMaterial||S.isMeshStandardMaterial||S.isShadowMaterial||S.isShaderMaterial&&!0===S.lights}(S),G.lightsStateVersion=be,G.needsLights&&(He.ambientLightColor.value=U.state.ambient,He.lightProbe.value=U.state.probe,He.directionalLights.value=U.state.directional,He.directionalLightShadows.value=U.state.directionalShadow,He.spotLights.value=U.state.spot,He.spotLightShadows.value=U.state.spotShadow,He.rectAreaLights.value=U.state.rectArea,He.ltc_1.value=U.state.rectAreaLTC1,He.ltc_2.value=U.state.rectAreaLTC2,He.pointLights.value=U.state.point,He.pointLightShadows.value=U.state.pointShadow,He.hemisphereLights.value=U.state.hemi,He.directionalShadowMap.value=U.state.directionalShadowMap,He.directionalShadowMatrix.value=U.state.directionalShadowMatrix,He.spotShadowMap.value=U.state.spotShadowMap,He.spotLightMatrix.value=U.state.spotLightMatrix,He.spotLightMap.value=U.state.spotLightMap,He.pointShadowMap.value=U.state.pointShadowMap,He.pointShadowMatrix.value=U.state.pointShadowMatrix),G.currentProgram=tt,G.uniformsList=null,tt}function qk(S){if(null===S.uniformsList){const L=S.currentProgram.getUniforms();S.uniformsList=J0.seqWithValue(L.seq,S.uniforms)}return S.uniformsList}function Xk(S,L){const z=Q.get(S);z.outputColorSpace=L.outputColorSpace,z.batching=L.batching,z.batchingColor=L.batchingColor,z.instancing=L.instancing,z.instancingColor=L.instancingColor,z.instancingMorph=L.instancingMorph,z.skinning=L.skinning,z.morphTargets=L.morphTargets,z.morphNormals=L.morphNormals,z.morphColors=L.morphColors,z.morphTargetsCount=L.morphTargetsCount,z.numClippingPlanes=L.numClippingPlanes,z.numIntersection=L.numClipIntersection,z.vertexAlphas=L.vertexAlphas,z.vertexTangents=L.vertexTangents,z.toneMapping=L.toneMapping}_c.setAnimationLoop(function ho(S){ts&&ts(S)}),typeof self<"u"&&_c.setContext(self),this.setAnimationLoop=function(S){ts=S,Y.setAnimationLoop(S),null===S?_c.stop():_c.start()},Y.addEventListener("sessionstart",Hk),Y.addEventListener("sessionend",Gk),this.render=function(S,L){if(void 0!==L&&!0!==L.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===D)return;if(!0===S.matrixWorldAutoUpdate&&S.updateMatrixWorld(),null===L.parent&&!0===L.matrixWorldAutoUpdate&&L.updateMatrixWorld(),!0===Y.enabled&&!0===Y.isPresenting&&(!0===Y.cameraAutoUpdate&&Y.updateCamera(L),L=Y.getCamera()),!0===S.isScene&&S.onBeforeRender(x,S,L,I),g=xt.get(S,_.length),g.init(L),_.push(g),We.multiplyMatrices(L.projectionMatrix,L.matrixWorldInverse),ie.setFromProjectionMatrix(We),ke=this.localClippingEnabled,pe=he.init(this.clippingPlanes,ke),m=Te.get(S,y.length),m.init(),y.push(m),!0===Y.enabled&&!0===Y.isPresenting){const de=x.xr.getDepthSensingMesh();null!==de&&iC(de,L,-1/0,x.sortObjects)}iC(S,L,0,x.sortObjects),m.finish(),!0===x.sortObjects&&m.sort(ve,De),Yt=!1===Y.enabled||!1===Y.isPresenting||!1===Y.hasDepthSensing(),Yt&&$e.addToRenderList(m,S),this.info.render.frame++,!0===pe&&he.beginShadows(),Ie.render(g.state.shadowsArray,S,L),!0===pe&&he.endShadows(),!0===this.info.autoReset&&this.info.reset();const G=m.opaque,U=m.transmissive;if(g.setupLights(),L.isArrayCamera){const de=L.cameras;if(U.length>0)for(let be=0,Pe=de.length;be<Pe;be++)jk(G,U,S,de[be]);Yt&&$e.render(S);for(let be=0,Pe=de.length;be<Pe;be++){const Re=de[be];Wk(m,S,Re,Re.viewport)}}else U.length>0&&jk(G,U,S,L),Yt&&$e.render(S),Wk(m,S,L);null!==I&&0===A&&(E.updateMultisampleRenderTarget(I),E.updateRenderTargetMipmap(I)),!0===S.isScene&&S.onAfterRender(x,S,L),nn.resetDefaultState(),w=-1,M=null,_.pop(),_.length>0?(g=_[_.length-1],!0===pe&&he.setGlobalState(x.clippingPlanes,g.state.camera)):g=null,y.pop(),m=y.length>0?y[y.length-1]:null},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(S,L,z){const G=Q.get(S);G.__autoAllocateDepthBuffer=!1===S.resolveDepthBuffer,!1===G.__autoAllocateDepthBuffer&&(G.__useRenderToTexture=!1),Q.get(S.texture).__webglTexture=L,Q.get(S.depthTexture).__webglTexture=G.__autoAllocateDepthBuffer?void 0:z,G.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(S,L){const z=Q.get(S);z.__webglFramebuffer=L,z.__useDefaultFramebuffer=void 0===L};const goe=P.createFramebuffer();this.setRenderTarget=function(S,L=0,z=0){I=S,C=L,A=z;let G=!0,U=null,de=!1,be=!1;if(S){const Re=Q.get(S);if(void 0!==Re.__useDefaultFramebuffer)J.bindFramebuffer(P.FRAMEBUFFER,null),G=!1;else if(void 0===Re.__webglFramebuffer)E.setupRenderTarget(S);else if(Re.__hasExternalTextures)E.rebindTextures(S,Q.get(S.texture).__webglTexture,Q.get(S.depthTexture).__webglTexture);else if(S.depthBuffer){const He=S.depthTexture;if(Re.__boundDepthTexture!==He){if(null!==He&&Q.has(He)&&(S.width!==He.image.width||S.height!==He.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");E.setupDepthRenderbuffer(S)}}const rt=S.texture;(rt.isData3DTexture||rt.isDataArrayTexture||rt.isCompressedArrayTexture)&&(be=!0);const tt=Q.get(S).__webglFramebuffer;S.isWebGLCubeRenderTarget?(U=Array.isArray(tt[L])?tt[L][z]:tt[L],de=!0):U=S.samples>0&&!1===E.useMultisampledRTT(S)?Q.get(S).__webglMultisampledFramebuffer:Array.isArray(tt)?tt[z]:tt,R.copy(S.viewport),W.copy(S.scissor),V=S.scissorTest}else R.copy(Oe).multiplyScalar(q).floor(),W.copy(lt).multiplyScalar(q).floor(),V=Ft;if(0!==z&&(U=goe),J.bindFramebuffer(P.FRAMEBUFFER,U)&&G&&J.drawBuffers(S,U),J.viewport(R),J.scissor(W),J.setScissorTest(V),de){const Re=Q.get(S.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+L,Re.__webglTexture,z)}else if(be){const Re=Q.get(S.texture);P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,Re.__webglTexture,z,L)}else if(null!==S&&0!==z){const Re=Q.get(S.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Re.__webglTexture,z)}w=-1},this.readRenderTargetPixels=function(S,L,z,G,U,de,be){if(!S||!S.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Pe=Q.get(S).__webglFramebuffer;if(S.isWebGLCubeRenderTarget&&void 0!==be&&(Pe=Pe[be]),Pe){J.bindFramebuffer(P.FRAMEBUFFER,Pe);try{const Re=S.texture,rt=Re.format,tt=Re.type;if(!ae.textureFormatReadable(rt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!ae.textureTypeReadable(tt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");L>=0&&L<=S.width-G&&z>=0&&z<=S.height-U&&P.readPixels(L,z,G,U,pt.convert(rt),pt.convert(tt),de)}finally{const Re=null!==I?Q.get(I).__webglFramebuffer:null;J.bindFramebuffer(P.FRAMEBUFFER,Re)}}},this.readRenderTargetPixelsAsync=function(){var S=Li(function*(L,z,G,U,de,be,Pe){if(!L||!L.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Re=Q.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&void 0!==Pe&&(Re=Re[Pe]),Re){if(z>=0&&z<=L.width-U&&G>=0&&G<=L.height-de){J.bindFramebuffer(P.FRAMEBUFFER,Re);const rt=L.texture,tt=rt.format,He=rt.type;if(!ae.textureFormatReadable(tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ae.textureTypeReadable(He))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const wt=P.createBuffer();P.bindBuffer(P.PIXEL_PACK_BUFFER,wt),P.bufferData(P.PIXEL_PACK_BUFFER,be.byteLength,P.STREAM_READ),P.readPixels(z,G,U,de,pt.convert(tt),pt.convert(He),0);const Gt=null!==I?Q.get(I).__webglFramebuffer:null;J.bindFramebuffer(P.FRAMEBUFFER,Gt);const gn=P.fenceSync(P.SYNC_GPU_COMMANDS_COMPLETE,0);return P.flush(),yield function tQ(n,e,t){return new Promise(function(i,r){setTimeout(function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}},t)})}(P,gn,4),P.bindBuffer(P.PIXEL_PACK_BUFFER,wt),P.getBufferSubData(P.PIXEL_PACK_BUFFER,0,be),P.deleteBuffer(wt),P.deleteSync(gn),be}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(L,z,G,U,de,be,Pe){return S.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(S,L=null,z=0){const G=Math.pow(2,-z),U=Math.floor(S.image.width*G),de=Math.floor(S.image.height*G),be=null!==L?L.x:0,Pe=null!==L?L.y:0;E.setTexture2D(S,0),P.copyTexSubImage2D(P.TEXTURE_2D,z,0,0,be,Pe,U,de),J.unbindTexture()};const moe=P.createFramebuffer(),voe=P.createFramebuffer();this.copyTextureToTexture=function(S,L,z=null,G=null,U=0,de=null){let be,Pe,Re,rt,tt,He,wt,Gt,gn;null===de&&(0!==U?(Wm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),de=U,U=0):de=0);const En=S.isCompressedTexture?S.mipmaps[de]:S.image;if(null!==z)be=z.max.x-z.min.x,Pe=z.max.y-z.min.y,Re=z.isBox3?z.max.z-z.min.z:1,rt=z.min.x,tt=z.min.y,He=z.isBox3?z.min.z:0;else{const Nr=Math.pow(2,-U);be=Math.floor(En.width*Nr),Pe=Math.floor(En.height*Nr),Re=S.isDataArrayTexture?En.depth:S.isData3DTexture?Math.floor(En.depth*Nr):1,rt=0,tt=0,He=0}null!==G?(wt=G.x,Gt=G.y,gn=G.z):(wt=0,Gt=0,gn=0);const It=pt.convert(L.format),Ge=pt.convert(L.type);let ai;L.isData3DTexture?(E.setTexture3D(L,0),ai=P.TEXTURE_3D):L.isDataArrayTexture||L.isCompressedArrayTexture?(E.setTexture2DArray(L,0),ai=P.TEXTURE_2D_ARRAY):(E.setTexture2D(L,0),ai=P.TEXTURE_2D),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,L.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,L.unpackAlignment);const kt=P.getParameter(P.UNPACK_ROW_LENGTH),ns=P.getParameter(P.UNPACK_IMAGE_HEIGHT),Tu=P.getParameter(P.UNPACK_SKIP_PIXELS),yr=P.getParameter(P.UNPACK_SKIP_ROWS),ff=P.getParameter(P.UNPACK_SKIP_IMAGES);P.pixelStorei(P.UNPACK_ROW_LENGTH,En.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,En.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,rt),P.pixelStorei(P.UNPACK_SKIP_ROWS,tt),P.pixelStorei(P.UNPACK_SKIP_IMAGES,He);const hn=S.isDataArrayTexture||S.isData3DTexture,Pr=L.isDataArrayTexture||L.isData3DTexture;if(S.isDepthTexture){const Nr=Q.get(S),Oi=Q.get(L),er=Q.get(Nr.__renderTarget),rC=Q.get(Oi.__renderTarget);J.bindFramebuffer(P.READ_FRAMEBUFFER,er.__webglFramebuffer),J.bindFramebuffer(P.DRAW_FRAMEBUFFER,rC.__webglFramebuffer);for(let xc=0;xc<Re;xc++)hn&&(P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Q.get(S).__webglTexture,U,He+xc),P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Q.get(L).__webglTexture,de,gn+xc)),P.blitFramebuffer(rt,tt,be,Pe,wt,Gt,be,Pe,P.DEPTH_BUFFER_BIT,P.NEAREST);J.bindFramebuffer(P.READ_FRAMEBUFFER,null),J.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else if(0!==U||S.isRenderTargetTexture||Q.has(S)){const Nr=Q.get(S),Oi=Q.get(L);J.bindFramebuffer(P.READ_FRAMEBUFFER,moe),J.bindFramebuffer(P.DRAW_FRAMEBUFFER,voe);for(let er=0;er<Re;er++)hn?P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Nr.__webglTexture,U,He+er):P.framebufferTexture2D(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Nr.__webglTexture,U),Pr?P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Oi.__webglTexture,de,gn+er):P.framebufferTexture2D(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Oi.__webglTexture,de),0!==U?P.blitFramebuffer(rt,tt,be,Pe,wt,Gt,be,Pe,P.COLOR_BUFFER_BIT,P.NEAREST):Pr?P.copyTexSubImage3D(ai,de,wt,Gt,gn+er,rt,tt,be,Pe):P.copyTexSubImage2D(ai,de,wt,Gt,rt,tt,be,Pe);J.bindFramebuffer(P.READ_FRAMEBUFFER,null),J.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else Pr?S.isDataTexture||S.isData3DTexture?P.texSubImage3D(ai,de,wt,Gt,gn,be,Pe,Re,It,Ge,En.data):L.isCompressedArrayTexture?P.compressedTexSubImage3D(ai,de,wt,Gt,gn,be,Pe,Re,It,En.data):P.texSubImage3D(ai,de,wt,Gt,gn,be,Pe,Re,It,Ge,En):S.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,de,wt,Gt,be,Pe,It,Ge,En.data):S.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,de,wt,Gt,En.width,En.height,It,En.data):P.texSubImage2D(P.TEXTURE_2D,de,wt,Gt,be,Pe,It,Ge,En);P.pixelStorei(P.UNPACK_ROW_LENGTH,kt),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,ns),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Tu),P.pixelStorei(P.UNPACK_SKIP_ROWS,yr),P.pixelStorei(P.UNPACK_SKIP_IMAGES,ff),0===de&&L.generateMipmaps&&P.generateMipmap(ai),J.unbindTexture()},this.copyTextureToTexture3D=function(S,L,z=null,G=null,U=0){return Wm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(S,L,z,G,U)},this.initRenderTarget=function(S){void 0===Q.get(S).__webglFramebuffer&&E.setupRenderTarget(S)},this.initTexture=function(S){S.isCubeTexture?E.setTextureCube(S,0):S.isData3DTexture?E.setTexture3D(S,0):S.isDataArrayTexture||S.isCompressedArrayTexture?E.setTexture2DArray(S,0):E.setTexture2D(S,0),J.unbindTexture()},this.resetState=function(){C=0,A=0,I=null,J.reset(),nn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ws}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Dt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Dt._getUnpackColorSpace()}}const Bk={type:"change"},tC={type:"start"},Vk={type:"end"},ev=new iu,zk=new ea,Tse=Math.cos(70*JJ_DEG2RAD),$n=new T,Qi=2*Math.PI,nC=1e-6;class Ase extends bte{constructor(e,t=null){super(e,t),this.state=-1,this.target=new T,this.cursor=new T,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new T,this._lastQuaternion=new Ti,this._lastTargetPosition=new T,this._quat=(new Ti).setFromUnitVectors(e.up,new T(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new QF,this._sphericalDelta=new QF,this._scale=1,this._panOffset=new T,this._rotateStart=new K,this._rotateEnd=new K,this._rotateDelta=new K,this._panStart=new K,this._panEnd=new K,this._panDelta=new K,this._dollyStart=new K,this._dollyEnd=new K,this._dollyDelta=new K,this._dollyDirection=new T,this._mouse=new K,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Rse.bind(this),this._onPointerDown=Ise.bind(this),this._onPointerUp=Pse.bind(this),this._onContextMenu=Bse.bind(this),this._onMouseWheel=Lse.bind(this),this._onKeyDown=Fse.bind(this),this._onTouchStart=kse.bind(this),this._onTouchMove=Use.bind(this),this._onMouseDown=Nse.bind(this),this._onMouseMove=Ose.bind(this),this._interceptControlDown=Vse.bind(this),this._interceptControlUp=zse.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Bk),this.update(),this.state=-1}update(e=null){const t=this.object.position;$n.copy(t).sub(this.target),$n.applyQuaternion(this._quat),this._spherical.setFromVector3($n),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=Qi:i>Math.PI&&(i-=Qi),r<-Math.PI?r+=Qi:r>Math.PI&&(r-=Qi),this._spherical.theta=i<=r?Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if($n.setFromSpherical(this._spherical),$n.applyQuaternion(this._quatInverse),t.copy(this.target).add($n),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=$n.length();o=this._clampDistance(a*this._scale);const c=a-o;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),s=!!c}else if(this.object.isOrthographicCamera){const a=new T(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=c!==this.object.zoom;const l=new T(this._mouse.x,this._mouse.y,0);l.unproject(this.object),this.object.position.sub(l).add(a),this.object.updateMatrixWorld(),o=$n.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==o&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(ev.origin.copy(this.object.position),ev.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(ev.direction))<Tse?this.object.lookAt(this.target):(zk.setFromNormalAndCoplanarPoint(this.object.up,this.target),ev.intersectPlane(zk,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,!!(s||this._lastPosition.distanceToSquared(this.object.position)>nC||8*(1-this._lastQuaternion.dot(this.object.quaternion))>nC||this._lastTargetPosition.distanceToSquared(this.target)>nC)&&(this.dispatchEvent(Bk),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(e){return null!==e?Qi/60*this.autoRotateSpeed*e:Qi/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){$n.setFromMatrixColumn(t,0),$n.multiplyScalar(-e),this._panOffset.add($n)}_panUp(e,t){!0===this.screenSpacePanning?$n.setFromMatrixColumn(t,1):($n.setFromMatrixColumn(t,0),$n.crossVectors(this.object.up,$n)),$n.multiplyScalar(e),this._panOffset.add($n)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){$n.copy(this.object.position).sub(this.target);let s=$n.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*t*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),s=t-i.top,a=i.height;this._mouse.x=(e-i.left)/i.width*2-1,this._mouse.y=-s/a*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Qi*this._rotateDelta.x/t.clientHeight),this._rotateUp(Qi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Qi*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(1===this._pointers.length)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._rotateStart.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}}_handleTouchStartPan(e){if(1===this._pointers.length)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._panStart.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(1==this._pointers.length)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e);this._rotateEnd.set(.5*(e.pageX+i.x),.5*(e.pageY+i.y))}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Qi*this._rotateDelta.x/t.clientHeight),this._rotateUp(Qi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(1===this._pointers.length)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e);this._panEnd.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd),this._updateZoomParameters(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return void this._pointers.splice(t,1)}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];void 0===t&&(t=new K,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){return this._pointerPositions[e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0]]}_customWheelEvent(e){const i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(e.deltaMode){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function Ise(n){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),"touch"===n.pointerType?this._onTouchStart(n):this._onMouseDown(n)))}function Rse(n){!1!==this.enabled&&("touch"===n.pointerType?this._onTouchMove(n):this._onMouseMove(n))}function Pse(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Vk),this.state=-1;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y})}}function Nse(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case 1:if(!1===this.enableZoom)return;this._handleMouseDownDolly(n),this.state=1;break;case 0:if(n.ctrlKey||n.metaKey||n.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(n),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(n),this.state=0}break;case 2:if(n.ctrlKey||n.metaKey||n.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(n),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(n),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(tC)}function Ose(n){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(n);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(n);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(n)}}function Lse(n){!1===this.enabled||!1===this.enableZoom||-1!==this.state||(n.preventDefault(),this.dispatchEvent(tC),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(Vk))}function Fse(n){!1!==this.enabled&&this._handleKeyDown(n)}function kse(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case 0:if(!1===this.enableRotate)return;this._handleTouchStartRotate(n),this.state=3;break;case 1:if(!1===this.enablePan)return;this._handleTouchStartPan(n),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(n),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(n),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(tC)}function Use(n){switch(this._trackPointer(n),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(n),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(n),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(n),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=-1}}function Bse(n){!1!==this.enabled&&n.preventDefault()}function Vse(n){"Control"===n.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function zse(n){"Control"===n.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const Hse=["rendererContainer"];function Gse(n,e){if(1&n&&(N(0,"div",8),H(1),F()),2&n){const t=ln();tg("left",t.hoverInfo.x,"px")("top",t.hoverInfo.y,"px"),fe(),Gn(" ",t.hoverInfo.description," ")}}const jse=()=>({"background-image":"url(assets/library.jpeg)"});function $se(n,e){if(1&n&&(N(0,"div",21),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("email")," ")}}function qse(n,e){if(1&n&&(N(0,"div",21),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("password")," ")}}function Xse(n,e){1&n&&(N(0,"span"),H(1,"Sign In"),F())}function Yse(n,e){1&n&&(N(0,"span"),H(1,"Signing In..."),F())}const Kse=()=>({"background-image":"url(assets/library.jpeg)"});function Jse(n,e){if(1&n&&(N(0,"div",32),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("firstName")," ")}}function Qse(n,e){if(1&n&&(N(0,"div",32),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("lastName")," ")}}function eoe(n,e){if(1&n&&(N(0,"div",32),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("email")," ")}}function toe(n,e){if(1&n&&(N(0,"div",32),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("password")," ")}}function noe(n,e){if(1&n&&(N(0,"div",32),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("confirmPassword")," ")}}function ioe(n,e){1&n&&(N(0,"div",32),H(1," Passwords do not match "),F())}function roe(n,e){if(1&n&&(N(0,"div",32),H(1),F()),2&n){const t=ln();fe(),Gn(" ",t.getFieldError("terms")," ")}}function soe(n,e){1&n&&(N(0,"span"),H(1,"Create Account"),F())}function ooe(n,e){1&n&&(N(0,"span"),H(1,"Creating Account..."),F())}const aoe=[{path:"",component:LK},{path:"about-portal",component:zK},{path:"flip-card",component:GK},{path:"ai-tools",component:jK},{path:"photo-glope",component:(()=>{class n{rendererContainer;renderer;scene;camera;controls;globe;hoverInfo=null;photoData=[{url:"assets/emad-essa.jpg",description:"\u0627.\u062f \u0639\u0645\u0627\u062f \u0639\u064a\u0633\u0649 \u0635\u0627\u0644\u062d \u0645\u062d\u0645\u062f \u0631\u0626\u064a\u0633 \u0642\u0633\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0628\u0643\u0644\u064a\u0629 \u0627\u0644\u0622\u062f\u0627\u0628 \u0628\u062c\u0627\u0645\u0639\u0629 \u062d\u0644\u0648\u0627\u0646\u060c \u0648\u0646\u0627\u0626\u0628 \u0631\u0626\u064a\u0633 \u0627\u0644\u0627\u062a\u062d\u0627\u062f \u0627\u0644\u0639\u0631\u0628\u064a \u0644\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"},{url:"assets/hesham-ismail.jpg",description:"\u0627.\u062f \u0647\u0634\u0627\u0645 \u0645\u062d\u0645\u0648\u062f \u0639\u0632\u0645\u064a \u0631\u0626\u064a\u0633 \u0627\u0644\u062c\u0647\u0627\u0632 \u0627\u0644\u0645\u0635\u0631\u064a \u0644\u0644\u0645\u0644\u0643\u064a\u0629 \u0627\u0644\u0641\u0643\u0631\u064a \u0623\u0645\u064a\u0646 \u0639\u0627\u0645 \u0627\u0644\u0645\u062c\u0644\u0633 \u0627\u0644\u0623\u0639\u0644\u0649 \u0644\u0644\u062b\u0642\u0627\u0641\u0629"},{url:"assets/shaaban-khalifa.jpg",description:"\u0623.\u062f \u0634\u0639\u0628\u0627\u0646 \u062e\u0644\u064a\u0641\u0629 \u0639\u0636\u0648 \u0627\u0644\u0627\u062a\u062d\u0627\u062f \u0627\u0644\u062f\u0648\u0644\u064a \u0644\u062c\u0645\u0639\u064a\u0627\u062a \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0645\u0624\u0633\u0633\u0627\u062a\u0647\u0627 (IFLA)\u060c \u0648 \u0631\u0626\u064a\u0633 \u0645\u062c\u0644\u0633 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062c\u0645\u0639\u064a\u0629 \u0627\u0644\u0645\u0635\u0631\u064a\u0629 \u0644\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a (1994 - 2019)"},{url:"assets/abdalgalel-eltmimy.jpg",description:"\u0627.\u062f \u0639\u0628\u062f \u0627\u0644\u062c\u0644\u064a\u0644 \u0627\u0644\u062a\u0645\u064a\u0645\u064a\u0645\u0646 \u0645\u0624\u0633\u0633\u064a \u0627\u0644\u0627\u062a\u062d\u0627\u062f \u0627\u0644\u0639\u0631\u0628\u064a \u0644\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u060c \u0648\u0623\u0635\u062f\u0631 \u0627\u0644\u0645\u062c\u0644\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0644\u0644\u0623\u0631\u0634\u064a\u0641 \u0648\u0627\u0644\u062a\u0648\u062b\u064a\u0642 \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"},{url:"assets/salwa-milad.jpg",description:"\u0627.\u062f \u0633\u0644\u0648\u0649 \u0639\u0644\u064a \u0645\u064a\u0644\u0627\u062f \u0623\u0648\u0644 \u0631\u0627\u0626\u062f\u0629 \u0645\u0635\u0631\u064a\u0629 \u0641\u064a \u062a\u062e\u0635\u0635 \u0627\u0644\u0648\u062b\u0627\u0626\u0642 \u0648\u0627\u0644\u0623\u0631\u0634\u064a\u0641\u060c \u0639\u0636\u0648 \u0627\u0644\u0644\u062c\u0646\u0629 \u0627\u0644\u0639\u0644\u0645\u064a\u0629 \u0627\u0644\u062f\u0627\u0626\u0645\u0629 \u0644\u062a\u0631\u0642\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u062a\u0630\u0629 \u0648\u0627\u0644\u0623\u0633\u0627\u062a\u0630\u0629 \u0627\u0644\u0645\u0633\u0627\u0639\u062f\u064a\u0646 \u0648\u0623\u0645\u064a\u0646\u0629 \u0627\u0644\u0644\u062c\u0646\u0629 \u0627\u0644\u0639\u0644\u0645\u064a\u0629 \u0627\u0644\u062f\u0627\u0626\u0645\u0629 \u062c\u0627\u0645\u0639\u0629 \u0627\u0644\u0623\u0632\u0647\u0631."},{url:"assets/riyad.jpg",description:"\u0623. \u0631\u064a\u0627\u0636 \u0637\u0627\u0647\u0631 \u0631\u0636\u0648\u0627\u0646 \u062f\u064a\u0627\u0628 \u062d\u0627\u0635\u0644 \u0639\u0644\u0649 \u062c\u0627\u0626\u0632\u0629 \u0631\u0648\u0627\u062f \u0627\u0644\u062a\u062e\u0635\u0635 \u0641\u064a \u0627\u0644\u062a\u0645\u064a\u0632 \u0627\u0644\u0645\u0647\u0646\u064a\u060c \u0645\u062f\u064a\u0631 \u0645\u0643\u062a\u0628\u0629 \u0645\u0635\u0631 \u0627\u0644\u0639\u0627\u0645\u0629"},{url:"assets/sherif-shahen.jpg",description:". \u0623.\u062f \u0634\u0631\u064a\u0641 \u0643\u0627\u0645\u0644 \u0634\u0627\u0647\u064a\u0646 \u0639\u0645\u064a\u062f \u0643\u0644\u064a\u0629 \u0627\u0644\u0622\u062f\u0627\u0628 \u0627\u0644\u0633\u0627\u0628\u0642 \u0628\u062c\u0627\u0645\u0639\u0629 \u0627\u0644\u0642\u0627\u0647\u0631\u0629 \u0648\u0631\u0626\u064a\u0633 \u0627\u0644\u062c\u0645\u0639\u064a\u0629 \u0627\u0644\u0645\u0635\u0631\u064a\u0629 \u0644\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"},{url:"assets/mohamed-fathy.jpg",description:'\u062f. \u0645\u062d\u0645\u062f \u0641\u062a\u062d\u064a \u0639\u0628\u062f \u0627\u0644\u0647\u0627\u062f\u064a \u0623\u0633\u062a\u0627\u0630 \u0645\u062a\u0641\u0631\u063a \u0628\u0642\u0633\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0628\u0622\u062f\u0627\u0628 \u0627\u0644\u0642\u0627\u0647\u0631\u0629\u060c \u0645\u0646 \u0631\u0648\u0627\u062f \u0627\u0644\u062a\u062e\u0635\u0635 \u0628\u0645\u0635\u0631 \u0648\u0627\u0644\u0639\u0627\u0644\u0645 \u0627\u0644\u0639\u0631\u0628\u064a\u060c \u062d\u0627\u0632 "\u062c\u0627\u0626\u0632\u0629 \u0631\u0648\u0627\u062f \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a" \u0644\u062c\u0647\u0648\u062f\u0647 \u0641\u064a \u062a\u0637\u0648\u064a\u0631 \u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0639\u0644\u0645\u064a \u0648\u0627\u0644\u0645\u0645\u0627\u0631\u0633\u0627\u062a \u0627\u0644\u0645\u0647\u0646\u064a\u0629.'},{url:"assets/mostafa-amien.jpg",description:'\u062f. \u0645\u0635\u0637\u0641\u0649 \u0623\u0645\u064a\u0646 \u062d\u0633\u0627\u0645 \u0627\u0644\u062f\u064a\u0646 \u0623\u0633\u062a\u0627\u0630 \u0645\u0633\u0627\u0639\u062f \u0645\u062a\u0641\u0631\u063a \u0628\u0642\u0633\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a \u0628\u0622\u062f\u0627\u0628 \u0627\u0644\u0642\u0627\u0647\u0631\u0629\u060c \u062d\u0627\u0626\u0632 \u0639\u0644\u0649 "\u062c\u0627\u0626\u0632\u0629 \u0631\u0648\u0627\u062f \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a" \u0645\u0646 \u0623\u0643\u0627\u062f\u064a\u0645\u064a\u0629 \u0646\u0633\u064a\u062c \u062a\u0642\u062f\u064a\u0631\u064b\u0627 \u0644\u0625\u0633\u0647\u0627\u0645\u0627\u062a\u0647 \u0641\u064a \u0627\u0644\u0646\u0638\u0645 \u0627\u0644\u0622\u0644\u064a\u0629 \u0648\u0627\u0644\u0636\u0628\u0637 \u0627\u0644\u0628\u0628\u0644\u064a\u0648\u062c\u0631\u0627\u0641\u064a'}];photoObjects=[];onMouseMove=t=>{const i=new KF,r=new K;r.x=t.clientX/window.innerWidth*2-1,r.y=-t.clientY/window.innerHeight*2+1,i.setFromCamera(r,this.camera);const s=i.intersectObjects(this.photoObjects);s.length>0?(this.hoverInfo={x:t.clientX,y:t.clientY-40,description:s[0].object.userData.description||"\u0637\u0627\u0644\u0628 \u0628\u062f\u0648\u0646 \u0648\u0635\u0641"},this.renderer.domElement.style.cursor="pointer"):(this.hoverInfo=null,this.renderer.domElement.style.cursor="auto")};constructor(){}ngOnInit(){}ngAfterViewInit(){this.initThreeJs(),this.createGlobe(),this.addPhotosToGlobe(),this.animate(),this.renderer.domElement.addEventListener("mousedown",this.onMouseClick.bind(this)),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove.bind(this)),this.renderer.domElement.addEventListener("mouseleave",()=>{this.hoverInfo=null})}initThreeJs(){this.scene=new VL,this.camera=new oi(60,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new Dse({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(15790320),this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.controls=new Ase(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05;const t=new BF(16777215,.5);this.scene.add(t);const i=new UF(16777215,1);i.position.set(5,3,5),this.scene.add(i),window.addEventListener("resize",()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)})}createGlobe(){const t=new uf(2,64,64),r=(new OF).load("assets/earth-texture.jpg"),s=new EF({map:r,transparent:!0,opacity:.8});this.globe=new An(t,s),this.scene.add(this.globe)}addPhotosToGlobe(){for(let t=0;t<70;t++){const i=Math.acos(2*t/70-1),r=Math.sqrt(70*Math.PI)*i,s=2.1*Math.sin(i)*Math.cos(r),o=2.1*Math.sin(i)*Math.sin(r),a=2.1*Math.cos(i),c=new Mu(.4,.4),u=this.photoData[t%this.photoData.length],f=(new OF).load(u.url),h=new Jo({map:f,side:2}),p=new An(c,h);p.userData={description:u.description,originalUrl:u.url},p.position.set(s,o,a),p.lookAt(0,0,0),p.rotateY(Math.PI),this.scene.add(p),this.photoObjects.push(p)}}animate(){requestAnimationFrame(()=>this.animate()),this.globe.rotation.y+=.001,this.controls.update(),this.renderer.render(this.scene,this.camera)}onMouseClick(t){const i=new KF,r=new K;r.x=t.clientX/window.innerWidth*2-1,r.y=-t.clientY/window.innerHeight*2+1,i.setFromCamera(r,this.camera);const s=i.intersectObjects(this.photoObjects);if(s.length>0){const l=s[0].object.userData.profileUrl;l&&window.open(l,"_blank")}const o=new Ni({color:8947848,opacity:.3,transparent:!0});for(let c=0;c<80;c++){const l=Math.floor(Math.random()*this.photoObjects.length),u=Math.floor(Math.random()*this.photoObjects.length);if(l!==u){const d=this.photoObjects[l].position,f=this.photoObjects[u].position,h=(new dt).setFromPoints([d,f]),p=new ta(h,o);this.scene.add(p)}}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-photo-globe"]],viewQuery:function(i,r){if(1&i&&Hx(Hse,5),2&i){let s;cg(s=lg())&&(r.rendererContainer=s.first)}},decls:11,vars:1,consts:[["rendererContainer",""],[1,"section-title"],[1,"globe-container"],[1,"container"],["id","globeContainer",1,"globe"],[1,"photo-globe-container"],[1,"renderer-container"],["class","photo-tooltip",3,"left","top",4,"ngIf"],[1,"photo-tooltip"]],template:function(i,r){1&i&&(N(0,"h2",1),H(1,"\u0627\u0644\u0631\u0648\u0627\u062f \u0627\u0644\u0645\u062a\u062e\u0635\u0635\u0648\u0646"),F(),N(2,"div",2),bt(3,"div",null,0),F(),N(5,"div",3),bt(6,"div",4),N(7,"div",5),bt(8,"div",6,0),bn(10,Gse,2,5,"div",7),F()()),2&i&&(fe(10),Xe("ngIf",r.hoverInfo))},dependencies:[Tr,rh],styles:[".globe-container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-items:center;perspective:1000px;overflow:visible;background:linear-gradient(to right,#e6f2ff,#5fa8ed)}.section-title[_ngcontent-%COMP%]{font-size:34px;font-weight:700;text-align:center;margin:30px 0;color:#333}.globe[_ngcontent-%COMP%]{position:relative;width:600px;height:600px;border-radius:50%;transform-style:preserve-3d;animation:_ngcontent-%COMP%_rotate 60s linear infinite}.globe-surface[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border-radius:50%;background:radial-gradient(circle at 30% 30%,#1c88bb,#0a3a5a);background-image:url(https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/Earth_Western_Hemisphere_transparent_background.png/600px-Earth_Western_Hemisphere_transparent_background.png),radial-gradient(circle at 30% 30%,#1c88bb,#0a3a5a);background-size:cover;background-blend-mode:multiply;opacity:.8}.photo[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;transform-style:preserve-3d;transform-origin:center center -250px;transition:transform .5s;z-index:1}.photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px;border:2px solid white;box-shadow:0 2px 5px #0003}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotateY(0) rotateX(5deg)}to{transform:rotateY(360deg) rotateX(5deg)}}.photo[_ngcontent-%COMP%]:hover{transform-origin:center center -220px;z-index:10}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.globe[_ngcontent-%COMP%]{flex:2;transition:transform .5s ease;cursor:pointer}.info-panel[_ngcontent-%COMP%]{flex:1;padding:20px;background-color:#fff;border-left:2px solid #ccc}.photo-globe-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.renderer-container[_ngcontent-%COMP%]{width:100%;height:100%}.photo-tooltip[_ngcontent-%COMP%]{position:fixed;background-color:#000000b3;color:#fff;padding:9px 13px;border-radius:7px;font-size:24px;pointer-events:none;z-index:1000;max-width:250px;transform:translate(-50%);direction:rtl;text-align:center;cursor:pointer}"]})}return n})()},{path:"login",component:(()=>{class n{fb;router;loginForm;isLoading=!1;constructor(t,i){this.fb=t,this.router=i,this.loginForm=this.fb.group({email:["",[$i.required,$i.email]],password:["",[$i.required,$i.minLength(6)]],remember:[!1]})}onSubmit(){this.loginForm.valid?(this.isLoading=!0,setTimeout(()=>{console.log("Login form submitted:",this.loginForm.value),this.isLoading=!1},1e3)):this.markFormGroupTouched()}onGoogleLogin(){console.log("Google login clicked")}onForgotPassword(){console.log("Forgot password clicked")}navigateToSignup(){this.router.navigate(["/signup"])}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}isFieldInvalid(t){const i=this.loginForm.get(t);return!!(i&&i.invalid&&i.touched)}getFieldError(t){const i=this.loginForm.get(t);if(i?.errors){if(i.errors.required)return`${t.charAt(0).toUpperCase()+t.slice(1)} is required`;if(i.errors.email)return"Please enter a valid email address";if(i.errors.minlength)return`${t.charAt(0).toUpperCase()+t.slice(1)} must be at least ${i.errors.minlength.requiredLength} characters`}return""}static \u0275fac=function(i){return new(i||n)(le(YO),le(Ar))};static \u0275cmp=Kn({type:n,selectors:[["app-login"]],decls:40,vars:14,consts:[[1,"hero-section",3,"ngStyle"],[1,"login-container"],[1,"form-card"],[1,"form-header"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password"],[1,"checkbox-group"],["type","checkbox","id","remember","formControlName","remember"],["for","remember"],["type","submit",1,"submit-btn",3,"disabled"],[4,"ngIf"],[1,"form-footer"],["href","#",3,"click"],[1,"divider"],[1,"social-btn",3,"click"],[1,"google-icon"],[1,"error-message"]],template:function(i,r){1&i&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),H(5,"Welcome Back"),F(),N(6,"p"),H(7,"Sign in to Library Plus"),F()(),N(8,"form",4),yt("ngSubmit",function(){return r.onSubmit()}),N(9,"div",5)(10,"label",6),H(11,"Email Address"),F(),bt(12,"input",7),bn(13,$se,2,1,"div",8),F(),N(14,"div",5)(15,"label",9),H(16,"Password"),F(),bt(17,"input",10),bn(18,qse,2,1,"div",8),F(),N(19,"div",11),bt(20,"input",12),N(21,"label",13),H(22,"Remember me"),F()(),N(23,"button",14),bn(24,Xse,2,0,"span",15)(25,Yse,2,0,"span",15),F()(),N(26,"div",16)(27,"a",17),yt("click",function(o){return r.onForgotPassword(),o.preventDefault()}),H(28," Forgot your password? "),F()(),N(29,"div",18)(30,"span"),H(31,"or"),F()(),N(32,"button",19),yt("click",function(){return r.onGoogleLogin()}),N(33,"span",20),H(34,"\u{1f535}"),F(),H(35," Continue with Google "),F(),N(36,"div",16),H(37," Don't have an account? "),N(38,"a",17),yt("click",function(o){return r.navigateToSignup(),o.preventDefault()}),H(39," Sign up "),F()()()()()),2&i&&(Xe("ngStyle",El(13,jse)),fe(8),Xe("formGroup",r.loginForm),fe(4),si("error",r.isFieldInvalid("email")),fe(),Xe("ngIf",r.isFieldInvalid("email")),fe(4),si("error",r.isFieldInvalid("password")),fe(),Xe("ngIf",r.isFieldInvalid("password")),fe(5),si("loading",r.isLoading),Xe("disabled",r.isLoading),fe(),Xe("ngIf",!r.isLoading),fe(),Xe("ngIf",r.isLoading))},dependencies:[Tr,rh,Bg,Em,PM,$a,cm,wh,bM,ZO,zl,Cm],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;z-index:1}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-color:#fff6;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);z-index:-1}.login-container[_ngcontent-%COMP%]{min-height:83vh;display:flex;align-items:center;justify-content:center;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;text-align:left;direction:ltr}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:30px;padding:40px;box-shadow:0 20px 40px #0000001a;width:100%;max-width:750px;transition:transform .3s ease,box-shadow .3s ease;animation:_ngcontent-%COMP%_slideIn .5s ease-out}.form-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 30px 50px #00000026}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2563eb;font-size:35px;font-weight:700;margin-bottom:8px}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;font-size:22px;font-weight:500}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#1e293b;font-weight:400;font-size:22px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px;border:2px solid #e2e8f0;border-radius:10px;font-size:20px;transition:all .3s ease;background:#f8fafc;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#ef4444;background:#fef2f2}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]:focus{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:18px;margin-top:5px;display:block}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:25px}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#3b82f6;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#475569;cursor:pointer}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:10px;font-size:18px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 10px 20px #3b82f64d}.submit-btn[_ngcontent-%COMP%]:not(:disabled):active{transform:translateY(0)}.submit-btn.loading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563)}.submit-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.submit-btn[_ngcontent-%COMP%]:not(:disabled):hover:before{left:100%}.form-footer[_ngcontent-%COMP%]{text-align:center;margin-top:25px;color:#64748b;font-size:20px}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none;font-weight:500;transition:color .3s ease}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1d4ed8}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:25px 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#e2e8f0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 15px;color:#94a3b8;font-size:22px}.social-btn[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e2e8f0;background:#fff;border-radius:10px;font-size:20px;font-weight:500;cursor:pointer;transition:all .3s ease;margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:10px}.social-btn[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#f8fafc}.google-icon[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:15px}.form-card[_ngcontent-%COMP%]{padding:30px 20px}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}']})}return n})()},{path:"signup",component:(()=>{class n{fb;router;signupForm;isLoading=!1;passwordStrength=0;passwordStrengthText="Password strength";constructor(t,i){this.fb=t,this.router=i,this.signupForm=this.fb.group({firstName:["",[$i.required,$i.minLength(2)]],lastName:["",[$i.required,$i.minLength(2)]],email:["",[$i.required,$i.email]],password:["",[$i.required,$i.minLength(8)]],confirmPassword:["",[$i.required]],terms:[!1,[$i.requiredTrue]]},{validators:this.passwordMatchValidator}),this.signupForm.get("password")?.valueChanges.subscribe(r=>{this.calculatePasswordStrength(r)})}passwordMatchValidator(t){const i=t.get("password"),r=t.get("confirmPassword");return i&&r&&i.value!==r.value?{passwordMismatch:!0}:null}calculatePasswordStrength(t){let i=0;t.length>=8&&(i+=25),t.match(/[a-z]/)&&t.match(/[A-Z]/)&&(i+=25),t.match(/\d/)&&(i+=25),t.match(/[^a-zA-Z\d]/)&&(i+=25),this.passwordStrength=i,this.passwordStrengthText=i<50?"Weak password":i<75?"Medium password":"Strong password"}onSubmit(){this.signupForm.valid?(this.isLoading=!0,setTimeout(()=>{console.log("Signup form submitted:",this.signupForm.value),this.isLoading=!1},1e3)):this.markFormGroupTouched()}onGoogleSignup(){console.log("Google signup clicked")}navigateToLogin(){this.router.navigate(["/login"])}markFormGroupTouched(){Object.keys(this.signupForm.controls).forEach(t=>{this.signupForm.get(t)?.markAsTouched()})}isFieldInvalid(t){const i=this.signupForm.get(t);return!!(i&&i.invalid&&i.touched)}isFormInvalid(t){return!!(this.signupForm.errors&&this.signupForm.errors[t]&&this.signupForm.get("confirmPassword")?.touched)}getFieldError(t){const i=this.signupForm.get(t);if(i?.errors){if(i.errors.required)return`${this.getFieldDisplayName(t)} is required`;if(i.errors.email)return"Please enter a valid email address";if(i.errors.minlength)return`${this.getFieldDisplayName(t)} must be at least ${i.errors.minlength.requiredLength} characters`;if(i.errors.requiredTrue)return"You must agree to the terms and conditions"}return""}getFieldDisplayName(t){return{firstName:"First name",lastName:"Last name",email:"Email",password:"Password",confirmPassword:"Confirm password",terms:"Terms and conditions"}[t]||t}getPasswordStrengthClass(){return this.passwordStrength<50?"weak":this.passwordStrength<75?"medium":"strong"}static \u0275fac=function(i){return new(i||n)(le(YO),le(Ar))};static \u0275cmp=Kn({type:n,selectors:[["app-signup"]],decls:64,vars:34,consts:[[1,"hero-section",3,"ngStyle"],[1,"signup-container"],[1,"form-card"],[1,"form-header"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter your first name"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter your last name"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Create a password"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-fill"],[1,"strength-text"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password"],[1,"checkbox-group"],["type","checkbox","id","terms","formControlName","terms"],["for","terms"],["href","#","onclick","event.preventDefault()"],["type","submit",1,"submit-btn",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"social-btn",3,"click"],[1,"google-icon"],[1,"form-footer"],["href","#",3,"click"],[1,"error-message"]],template:function(i,r){1&i&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),H(5,"Join Library Plus"),F(),N(6,"p"),H(7,"Create your account to get started"),F()(),N(8,"form",4),yt("ngSubmit",function(){return r.onSubmit()}),N(9,"div",5)(10,"label",6),H(11,"First Name"),F(),bt(12,"input",7),bn(13,Jse,2,1,"div",8),F(),N(14,"div",5)(15,"label",9),H(16,"Last Name"),F(),bt(17,"input",10),bn(18,Qse,2,1,"div",8),F(),N(19,"div",5)(20,"label",11),H(21,"Email Address"),F(),bt(22,"input",12),bn(23,eoe,2,1,"div",8),F(),N(24,"div",5)(25,"label",13),H(26,"Password"),F(),bt(27,"input",14),bn(28,toe,2,1,"div",8),N(29,"div",15)(30,"div",16),bt(31,"div",17),F(),N(32,"span",18),H(33),F()()(),N(34,"div",5)(35,"label",19),H(36,"Confirm Password"),F(),bt(37,"input",20),bn(38,noe,2,1,"div",8)(39,ioe,2,0,"div",8),F(),N(40,"div",21),bt(41,"input",22),N(42,"label",23),H(43," I agree to the "),N(44,"a",24),H(45,"Terms of Service"),F(),H(46," and "),N(47,"a",24),H(48,"Privacy Policy"),F()()(),bn(49,roe,2,1,"div",8),N(50,"button",25),bn(51,soe,2,0,"span",26)(52,ooe,2,0,"span",26),F()(),N(53,"div",27)(54,"span"),H(55,"or"),F()(),N(56,"button",28),yt("click",function(){return r.onGoogleSignup()}),N(57,"span",29),H(58,"\u{1f535}"),F(),H(59," Sign up with Google "),F(),N(60,"div",30),H(61," Already have an account? "),N(62,"a",31),yt("click",function(o){return r.navigateToLogin(),o.preventDefault()}),H(63," Sign in "),F()()()()()),2&i&&(Xe("ngStyle",El(33,Kse)),fe(8),Xe("formGroup",r.signupForm),fe(4),si("error",r.isFieldInvalid("firstName")),fe(),Xe("ngIf",r.isFieldInvalid("firstName")),fe(4),si("error",r.isFieldInvalid("lastName")),fe(),Xe("ngIf",r.isFieldInvalid("lastName")),fe(4),si("error",r.isFieldInvalid("email")),fe(),Xe("ngIf",r.isFieldInvalid("email")),fe(4),si("error",r.isFieldInvalid("password")),fe(),Xe("ngIf",r.isFieldInvalid("password")),fe(3),Ix(r.getPasswordStrengthClass()),tg("width",r.passwordStrength,"%"),fe(),Ix(r.getPasswordStrengthClass()),fe(),Gn(" ",r.passwordStrengthText," "),fe(4),si("error",r.isFieldInvalid("confirmPassword")||r.isFormInvalid("passwordMismatch")),fe(),Xe("ngIf",r.isFieldInvalid("confirmPassword")),fe(),Xe("ngIf",r.isFormInvalid("passwordMismatch")),fe(2),si("error",r.isFieldInvalid("terms")),fe(8),Xe("ngIf",r.isFieldInvalid("terms")),fe(),si("loading",r.isLoading),Xe("disabled",r.isLoading),fe(),Xe("ngIf",!r.isLoading),fe(),Xe("ngIf",r.isLoading))},dependencies:[ZO,PM,$a,cm,wh,bM,zl,Cm,Tr,rh,Bg],styles:['.hero-section[_ngcontent-%COMP%]{position:relative;z-index:1}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-color:#fff6;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);z-index:-1}.signup-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;text-align:left;direction:ltr}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:30px;padding:40px;box-shadow:0 20px 40px #0000001a;width:100%;max-width:800px;transition:transform .3s ease,box-shadow .3s ease;animation:_ngcontent-%COMP%_slideIn .5s ease-out}.form-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 30px 50px #00000026}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2563eb;font-size:35px;font-weight:700;margin-bottom:8px}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;font-size:22px;font-weight:500}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#1e293b;font-weight:400;font-size:22px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px;border:2px solid #e2e8f0;border-radius:10px;font-size:20px;transition:all .3s ease;background:#f8fafc;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#ef4444;background:#fef2f2}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]:focus{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:18px;margin-top:5px;display:block}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;margin-bottom:15px}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#3b82f6;cursor:pointer;margin-top:2px;flex-shrink:0}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox].error[_ngcontent-%COMP%]{accent-color:#ef4444}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#475569;cursor:pointer;line-height:1.4}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none;font-weight:500}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1d4ed8}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:10px;font-size:18px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;margin-top:10px}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 10px 20px #3b82f64d}.submit-btn[_ngcontent-%COMP%]:not(:disabled):active{transform:translateY(0)}.submit-btn.loading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563)}.submit-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.submit-btn[_ngcontent-%COMP%]:not(:disabled):hover:before{left:100%}.form-footer[_ngcontent-%COMP%]{text-align:center;margin-top:25px;color:#64748b;font-size:20px}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none;font-weight:500;transition:color .3s ease}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1d4ed8}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:25px 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#e2e8f0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 15px;color:#94a3b8;font-size:22px}.social-btn[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e2e8f0;background:#fff;border-radius:10px;font-size:20px;font-weight:500;cursor:pointer;transition:all .3s ease;margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:10px}.social-btn[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#f8fafc}.google-icon[_ngcontent-%COMP%]{font-size:18px}.password-strength[_ngcontent-%COMP%]{margin-top:8px;font-size:14px}.strength-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#e2e8f0;border-radius:2px;margin-top:5px;overflow:hidden}.strength-fill[_ngcontent-%COMP%]{height:100%;width:0%;transition:width .3s ease;border-radius:2px}.strength-fill.weak[_ngcontent-%COMP%]{background:#ef4444}.strength-fill.medium[_ngcontent-%COMP%]{background:#f59e0b}.strength-fill.strong[_ngcontent-%COMP%]{background:#10b981}.strength-text[_ngcontent-%COMP%]{display:block;margin-top:5px;font-size:17px}.strength-text.weak[_ngcontent-%COMP%]{color:#ef4444}.strength-text.medium[_ngcontent-%COMP%]{color:#f59e0b}.strength-text.strong[_ngcontent-%COMP%]{color:#10b981}@media (max-width: 768px){.signup-container[_ngcontent-%COMP%]{padding:15px}.form-card[_ngcontent-%COMP%]{padding:30px 20px}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}']})}return n})()}];let coe=(()=>{class n{router;isMenuOpen=!1;searchQuery="";toggleMenu(){this.isMenuOpen=!this.isMenuOpen}onSearch(){this.searchQuery.trim()&&console.log("Searching for:",this.searchQuery)}constructor(t){this.router=t}onMenuItemClick(t){console.log("Menu item clicked:",t),this.router.navigate(["/"+t])}static \u0275fac=function(i){return new(i||n)(le(Ar))};static \u0275cmp=Kn({type:n,selectors:[["app-header"]],decls:43,vars:3,consts:[[1,"header"],[1,"search-section"],[1,"container"],[1,"search-container"],["type","text","placeholder","\u0628\u062d\u062b...",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn",3,"click"],[1,"search-icon"],[1,"user-section"],["routerLink","/login",1,"user-link"],[1,"separator"],["routerLink","/signup",1,"user-link"],[1,"nav-section"],[1,"logo-section"],["src","assets/libraryplus-logo.png","alt","Logo",1,"logo"],[1,"nav-menu"],[1,"nav-list"],[1,"nav-item"],["href","#",1,"nav-link","active",3,"click"],["href","#",1,"nav-link",3,"click"],[1,"nav-link",3,"click"],[1,"nav-link","active",3,"click"],[1,"menu-toggle",3,"click"],[1,"hamburger"]],template:function(i,r){1&i&&(N(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),Wd("ngModelChange",function(o){return ug(r.searchQuery,o)||(r.searchQuery=o),o}),yt("keyup.enter",function(){return r.onSearch()}),F(),N(5,"button",5),yt("click",function(){return r.onSearch()}),N(6,"i",6),H(7,"\u{1f50d}"),F()()(),N(8,"div",7)(9,"a",8),H(10,"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"),F(),N(11,"span",9),H(12,"|"),F(),N(13,"a",10),H(14,"\u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628"),F()()()(),N(15,"div",11)(16,"div",2)(17,"div",12),bt(18,"img",13),F(),N(19,"nav",14)(20,"ul",15)(21,"li",16)(22,"a",17),yt("click",function(){return r.onMenuItemClick("home")}),H(23,"\u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629"),F()(),N(24,"li",16)(25,"a",18),yt("click",function(){return r.onMenuItemClick("about-specialization")}),H(26,"\u0639\u0646 \u0627\u0644\u062a\u062e\u0635\u0635"),F()(),N(27,"li",16)(28,"a",19),yt("click",function(){return r.onMenuItemClick("jobs-institutions")}),H(29,"\u0627\u0644\u0648\u0638\u0627\u0626\u0641 \u0648\u0627\u0644\u0645\u0624\u0633\u0633\u0627\u062a"),F()(),N(30,"li",16)(31,"a",19),yt("click",function(){return r.onMenuItemClick("learning-reference")}),H(32,"\u0645\u0635\u0627\u062f\u0631 \u0627\u0644\u062a\u0639\u0644\u0645"),F()(),N(33,"li",16)(34,"a",19),yt("click",function(){return r.onMenuItemClick("scientific-research")}),H(35,"\u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0639\u0644\u0645\u064a"),F()(),N(36,"li",16)(37,"a",20),yt("click",function(){return r.onMenuItemClick("about-portal")}),H(38,"\u0639\u0646 \u0627\u0644\u0628\u0648\u0627\u0628\u0629"),F()()()(),N(39,"button",21),yt("click",function(){return r.toggleMenu()}),bt(40,"span",22)(41,"span",22)(42,"span",22),F()()()()),2&i&&(fe(4),Gd("ngModel",r.searchQuery),fe(15),si("active",r.isMenuOpen))},dependencies:[Tr,Mh,Wa,Em,$a,wh,wm],styles:['.header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 10px #0000001a}.container[_ngcontent-%COMP%]{max-width:1900px;margin:0 auto;padding:0 20px}.search-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e3c72,#2a5298);padding:9px 0}.search-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff26;border-radius:25px;padding:5px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.search-input[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;padding:8px 15px;font-size:18px;width:350px;outline:none;border-radius:25px;text-align:right;direction:rtl;font-family:cairo}.search-input[_ngcontent-%COMP%]::placeholder{color:#fffc}.search-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;padding:8px 12px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.search-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.05)}.search-icon[_ngcontent-%COMP%]{font-size:18px}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.user-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:18px;transition:all .3s ease}.user-link[_ngcontent-%COMP%]:hover{color:#fffc}.separator[_ngcontent-%COMP%]{color:#fff9;font-size:30px}.nav-section[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #e0e0e0;padding:14px 20px}.nav-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:70px}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center}.logo[_ngcontent-%COMP%]{height:140px;width:160px}.nav-menu[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;justify-content:center}.nav-list[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0;padding:0;gap:50px}.nav-item[_ngcontent-%COMP%]{position:relative}.nav-link[_ngcontent-%COMP%]{color:#333;text-decoration:none;font-size:24px;font-weight:700;padding:10px 15px;border-radius:25px;transition:all .3s ease;display:block;text-align:center;position:relative;cursor:pointer}.nav-link[_ngcontent-%COMP%]:hover{color:#2a5298;background-color:#46559b0d}.nav-link.active[_ngcontent-%COMP%]{color:#2a5298}.nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-15px;left:50%;transform:translate(-50%);width:30px;height:3px;border-radius:2px}.menu-toggle[_ngcontent-%COMP%]{display:absolute;flex-direction:column;background:transparent;border:none;cursor:pointer;padding:5px}.hamburger[_ngcontent-%COMP%]{width:25px;height:3px;background:#333;margin:3px 0;transition:.3s;border-radius:2px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:0 15px}.search-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.search-input[_ngcontent-%COMP%]{width:250px}.menu-toggle[_ngcontent-%COMP%]{display:flex}.nav-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;background:#fff;transform:translateY(-100%);opacity:0;visibility:hidden;transition:all .3s ease;box-shadow:0 5px 10px #0000001a}.nav-menu.active[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;visibility:visible}.nav-list[_ngcontent-%COMP%]{flex-direction:column;gap:0;padding:20px}.nav-item[_ngcontent-%COMP%]{width:100%}.nav-link[_ngcontent-%COMP%]{padding:15px 20px;border-radius:10px;margin-bottom:10px}.nav-link.active[_ngcontent-%COMP%]:after{display:none}.menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-45deg) translate(-5px,6px)}.menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:nth-child(2){opacity:0}.menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:nth-child(3){transform:rotate(45deg) translate(-5px,-6px)}}button.nav-link[_ngcontent-%COMP%]{all:unset;cursor:pointer;color:#333;text-decoration:none;font-size:16px;font-weight:500;padding:10px 15px;border-radius:25px;transition:all .3s ease;display:block;text-align:center;position:relative}button.nav-link[_ngcontent-%COMP%]:hover{color:#2a5298;background-color:#2a52980d}button.nav-link.active[_ngcontent-%COMP%]{color:#2a5298;background-color:#2a52981a}button.nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-15px;left:50%;transform:translate(-50%);width:30px;height:3px;background:#2a5298;border-radius:2px}@media (max-width: 480px){.nav-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:60px}.logo[_ngcontent-%COMP%]{height:40px}.search-input[_ngcontent-%COMP%]{width:200px;font-size:12px}.nav-link[_ngcontent-%COMP%]{font-size:14px}.user-section[_ngcontent-%COMP%]{font-size:12px}}*[_ngcontent-%COMP%]{box-sizing:border-box}.header[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{transition:all .3s ease}[dir=rtl][_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]{direction:rtl}[dir=rtl][_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{text-align:right}.search-input[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.search-input[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}']})}return n})();const loe=()=>["/ai-tools"],uoe=()=>["/flip-card"];let doe=(()=>{class n{name="";email="";subscribe(){console.log("Subscribed:",this.name,this.email)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-libraries-plus"]],decls:147,vars:6,consts:[["rel","stylesheet","href",mT`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css`],[1,"main-container"],[1,"header"],[1,"logo-container"],["src","assets/libraryplus-logo.png",1,"logo"],[1,"content-container"],[1,"column"],[1,"section-title","right-align"],[1,"menu-list","right-align"],["href","#"],[1,"footer-link",3,"routerLink"],[1,"newsletter-form"],[1,"form-row"],[1,"form-group","right-align"],["for","name"],["type","text","id","name","name","name","placeholder","Malak Hany",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","Malak.hany@gmail.com",1,"form-control",3,"ngModelChange","ngModel"],[1,"subscribe-btn",3,"click"],[1,"contact-info","right-align"],["href","mailto:libraryplus@outlook.sa"],[1,"social-media"],["href","#",1,"social-icon"],[1,"fa-brands","fa-facebook"],[1,"fab","fa-linkedin-in"],[1,"fab","fa-twitter"],[1,"fab","fa-instagram"],[1,"footer"]],template:function(i,r){1&i&&(bt(0,"link",0),N(1,"div",1)(2,"div",2)(3,"div",3),bt(4,"img",4),F()(),N(5,"div",5)(6,"div",6)(7,"h2",7),H(8,"\u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629"),F(),N(9,"h2",7),H(10,"\u0639\u0646 \u0627\u0644\u062a\u062e\u0635\u0635"),F(),N(11,"ul",8)(12,"li")(13,"a",9),H(14,"\u0645\u0627 \u0647\u0648 \u0639\u0644\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a"),F()(),N(15,"li")(16,"a",9),H(17,"\u0645\u062c\u0627\u0644\u0627\u062a \u0627\u0644\u062a\u062e\u0635\u0635"),F()(),N(18,"li")(19,"a",9),H(20,"\u0639\u0646 \u0623\u0642\u0633\u0627\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0629"),F()()(),N(21,"h2",7),H(22,"\u0627\u064a"),F(),N(23,"ul",8)(24,"li")(25,"a",9),H(26,"\u062f\u0644\u064a\u0644 \u0627\u0644\u0648\u0638\u0627\u0626\u0641"),F()(),N(27,"li")(28,"a",9),H(29,"\u0645\u062c\u0645\u0648\u0639\u0629 \u0623\u062f\u0648\u0627\u062a \u0627\u0644\u062a\u0637\u0648\u064a\u0631"),F()(),N(30,"li")(31,"a",9),H(32,"\u0627\u062a\u062d\u0627\u062f\u0627\u062a \u0648\u062c\u0645\u0639\u064a\u0627\u062a \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a"),F()(),N(33,"li")(34,"a",9),H(35,"\u062e\u062f\u0645\u0627\u062a \u0627\u0644\u062a\u0648\u062c\u064a\u0647 \u0627\u0644\u0645\u0647\u0646\u064a (\u0642\u0631\u064a\u0628\u064b\u0627)"),F()(),N(36,"li")(37,"a",9),H(38,"\u0627\u0644\u0623\u062e\u0628\u0627\u0631"),F()()(),N(39,"h2",7),H(40,"\u0627\u0644\u0623\u062e\u0628\u0627\u0631"),F(),N(41,"ul",8),bt(42,"li"),F()(),N(43,"div",6)(44,"h2",7),H(45,"\u062f\u0644\u064a\u0644 \u0627\u0644\u0637\u0627\u0644\u0628"),F(),N(46,"h2",7),H(47,"\u0627\u0644\u0644\u0648\u0627\u0626\u062d \u0627\u0644\u062f\u0631\u0627\u0633\u064a\u0629"),F(),N(48,"ul",8)(49,"li")(50,"a",9),H(51,"\u0644\u0627\u0626\u062d\u0629 \u062c\u0627\u0645\u0639\u0629 \u0627\u0644\u0642\u0627\u0647\u0631\u0629"),F()()(),N(52,"h4",7),H(53,"\u0645\u0635\u0627\u062f\u0631 \u0627\u0644\u062a\u0639\u0644\u0645"),F(),N(54,"ul",8)(55,"li")(56,"a",9),H(57,"\u0643\u062a\u0628 \u0623\u0633\u0627\u0633\u064a\u0627\u062a \u0639\u0644\u0645 \u0627\u0644\u0645\u0643\u062a\u0628\u0627\u062a"),F()(),N(58,"li")(59,"a",9),H(60,"\u062f\u0648\u0631\u064a\u0627\u062a \u0648\u0645\u062c\u0627\u0644\u0627\u062a"),F()(),N(61,"li")(62,"a",9),H(63,"\u0642\u0648\u0627\u0639\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u062a\u062e\u0635\u0635\u0629"),F()(),N(64,"li")(65,"a",9),H(66,"\u0642\u0648\u0627\u0645\u064a\u0633 \u0648\u0645\u0639\u0627\u062c\u0645"),F()(),N(67,"li")(68,"a",9),H(69,"\u0623\u062f\u0648\u0627\u062a \u0648\u0623\u062f\u0644\u0629"),F()()(),N(70,"h2",7),H(71,"\u0645\u0633\u0627\u0631\u0627\u062a \u0627\u0644\u062a\u0639\u0644\u0645 \u0627\u0644\u0630\u0627\u062a\u064a"),F(),N(72,"h2",7),H(73,"\u0627\u0644\u0645\u0646\u062d \u0627\u0644\u062f\u0631\u0627\u0633\u064a\u0629"),F(),N(74,"h2",7),H(75,"\u0627\u0644\u062a\u062f\u0631\u064a\u0628\u0627\u062a (\u0642\u0631\u064a\u0628\u064b\u0627)"),F(),N(76,"h4",7),H(77,"\u0639\u0646 \u0627\u0644\u0645\u0648\u0642\u0639"),F(),N(78,"ul",8)(79,"li")(80,"a",9),H(81,"\u0645\u0646 \u0646\u062d\u0646 \u061f"),F()(),N(82,"li")(83,"a",9),H(84,"\u0627\u0644\u0623\u0633\u0626\u0644\u0629 \u0627\u0644\u0623\u0643\u062b\u0631 \u0634\u064a\u0648\u0639\u064b\u0627"),F()()()(),N(85,"div",6)(86,"h2",7),H(87,"\u062f\u0644\u064a\u0644 \u0627\u0644\u0628\u0627\u062d\u062b"),F(),N(88,"h5",7),H(89,"\u0627\u0644\u0639\u0644\u0648\u0645 \u0627\u0644\u0628\u064a\u0646\u064a\u0629"),F(),N(90,"h5",7),H(91,"\u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0639\u0644\u0645\u064a"),F(),N(92,"ul",8)(93,"li")(94,"a",9),H(95,"\u0648\u0631\u0634 \u0639\u0645\u0644 \u0648\u062f\u0648\u0631\u0627\u062a"),F()(),N(96,"a",10),H(97," \u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0623\u0635\u0637\u0646\u0627\u0639\u064a"),F(),N(98,"li")(99,"a",9),H(100,"\u0645\u0635\u0627\u062f\u0631 \u0648 \u0645\u0642\u0627\u0644\u0627\u062a"),F()()(),N(101,"h5",7),H(102,"\u0645\u062d\u0631\u0643\u0627\u062a \u0628\u062d\u062b \u0627\u0643\u0627\u062f\u064a\u0645\u064a\u0629"),F(),N(103,"h5",7)(104,"a",10),H(105,"\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0634\u0647\u0627\u062f \u0627\u0644\u0645\u0631\u062c\u0639\u064a"),F()(),N(106,"h5",7),H(107,"\u0627\u0644\u062f\u0631\u0627\u0633\u0627\u062a \u0627\u0644\u0628\u0627\u0631\u0632\u0629 \u0641\u064a \u0627\u0644\u0645\u062c\u0627\u0644"),F(),N(108,"h5",7),H(109,"\u0627\u0644\u0646\u0634\u0631 \u0627\u0644\u0623\u0643\u0627\u062f\u064a\u0645\u064a"),F(),N(110,"h5",7),H(111,"\u0623\u062f\u0648\u0627\u062a \u0641\u062d\u0635 \u0627\u0644\u0646\u0632\u0627\u0647\u0629 \u0627\u0644\u0639\u0644\u0645\u064a\u0629"),F()(),N(112,"div",6)(113,"h2",7),H(114,"\u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0625\u062e\u0628\u0627\u0631\u064a\u0629"),F(),N(115,"div",11)(116,"div",12)(117,"div",13)(118,"label",14),H(119,"\u0627\u0644\u0627\u0633\u0645"),F(),N(120,"input",15),Wd("ngModelChange",function(o){return ug(r.name,o)||(r.name=o),o}),F()(),N(121,"div",13)(122,"label",16),H(123,"\u0627\u0644\u0627\u064a\u0645\u064a\u0644"),F(),N(124,"input",17),Wd("ngModelChange",function(o){return ug(r.email,o)||(r.email=o),o}),F()()(),N(125,"button",18),yt("click",function(){return r.subscribe()}),H(126,"\u0627\u0634\u062a\u0631\u0643"),F()(),N(127,"div",19)(128,"h3"),H(129,"\u0627\u062a\u0635\u0644 \u0628\u0646\u0627"),F(),N(130,"p"),H(131,"+02228899"),F(),N(132,"p")(133,"a",20),H(134,"libraryplusoutlook.sa"),F()(),N(135,"div",21)(136,"a",22),bt(137,"i",23),F(),N(138,"a",22),bt(139,"i",24),F(),N(140,"a",22),bt(141,"i",25),F(),N(142,"a",22),bt(143,"i",26),F()()()()(),N(144,"div",27)(145,"p"),H(146," Libraries Plus 2025 \xa9"),F()()()),2&i&&(fe(96),Xe("routerLink",El(4,loe)),fe(8),Xe("routerLink",El(5,uoe)),fe(16),Gd("ngModel",r.name),fe(4),Gd("ngModel",r.email))},dependencies:[Tr,Em,$a,wh,wm,Mh,Wa],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:cairo}.main-container[_ngcontent-%COMP%]{max-width:100%;margin:0 auto;background-color:#60aef7;min-height:100vh;display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 0}.logo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.logo[_ngcontent-%COMP%]{width:100%;height:200px}.logo-text[_ngcontent-%COMP%]{color:#333;margin-top:-40px}.content-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;padding:20px 60px;flex:1}.column[_ngcontent-%COMP%]{flex:1;min-width:250px;padding:0 15px;margin-bottom:20px}.section-title[_ngcontent-%COMP%]{color:#333;font-size:26px;margin:15px 0;padding-bottom:5px;font-family:cairo;cursor:pointer}.menu-list[_ngcontent-%COMP%]{list-style-type:none;margin-bottom:30px;text-decoration:none}.menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.menu-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333;text-decoration:none;font-size:26px;transition:color .3s;font-family:dubai}.menu-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.newsletter-form[_ngcontent-%COMP%]{padding:10px;border-radius:20px;margin-bottom:20px}.footer-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{margin-bottom:12px;flex:1;min-width:280px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;color:#333;font-size:24px;font-weight:700;font-family:dubai;text-align:center}.form-control[_ngcontent-%COMP%]{width:90%;padding:8px 12px;border:1px solid #ddd;border-radius:20px;font-size:22px;direction:ltr;font-family:dubai;height:60px}.subscribe-btn[_ngcontent-%COMP%]{background-color:gold;color:#333;border:none;padding:10px 20px;border-radius:20px;cursor:pointer;font-weight:700;display:block;margin:0 auto;transition:background-color .3s;font-family:dubai;font-size:22px;width:40%}.subscribe-btn[_ngcontent-%COMP%]:hover{background-color:#ffc107}.contact-info[_ngcontent-%COMP%]{margin-top:30px}.contact-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:10px;font-size:26px;font-family:dubai}.contact-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;margin-bottom:5px;font-size:22px}.social-media[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:15px}.social-icon[_ngcontent-%COMP%]{background-color:#fff3;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-left:10px;color:#333;text-decoration:none;transition:background-color .3s}.social-icon[_ngcontent-%COMP%]:hover{background-color:#fff6}.footer[_ngcontent-%COMP%]{background-color:#4e45451a;text-align:center;padding:25px;color:#333;font-size:20px;font-family:dubai}@media (max-width: 1024px){.content-container[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 768px){.column[_ngcontent-%COMP%]{flex:0 0 50%}}@media (max-width: 576px){.column[_ngcontent-%COMP%]{flex:0 0 100%}}"]})}return n})();(function e$(n,e){return Lj({rootComponent:n,...KP(e)})})((()=>{class n{title="library-plus";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Kn({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"app-container"]],template:function(i,r){1&i&&(N(0,"div",0),bt(1,"app-header")(2,"router-outlet")(3,"app-libraries-plus"),F())},dependencies:[Mh,rM,coe,doe],styles:[".app-container[_ngcontent-%COMP%]{font-family:Cairo,Arial,sans-serif;direction:rtl;overflow-x:hidden}"]})}return n})(),{providers:[function cZ(n,...e){return function mo(n){return{\u0275providers:n}}([{provide:bh,multi:!0,useValue:n},[],{provide:Ll,useFactory:jN,deps:[Ar]},{provide:fl,multi:!0,useFactory:$N},e.map(t=>t.\u0275providers)])}(aoe)]}).catch(n=>console.error(n))}},Au=>{Au(Au.s=848)}]);